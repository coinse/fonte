{"sha": "83f01fd864e59fa69c894da06f4a15489222d401", "log": "Access the class attribute case-insensitiviely  Fixes #814", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Attributes.java\n+++ b/src/main/java/org/jsoup/nodes/Attributes.java\n         if (attributes == null)\n             return \"\";\n \n+        Attribute attr = attributes.get(key);\n+        if (attr != null)\n+            return attr.getValue();\n+\n         for (String attrKey : attributes.keySet()) {\n             if (attrKey.equalsIgnoreCase(key))\n                 return attributes.get(attrKey).getValue();\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n      */\n     // performance sensitive\n     public boolean hasClass(String className) {\n-        final String classAttr = attributes.get(\"class\");\n+        final String classAttr = attributes.getIgnoreCase(\"class\");\n         final int len = classAttr.length();\n         final int wantLen = className.length();\n \n--- a/src/test/java/org/jsoup/select/ElementsTest.java\n+++ b/src/test/java/org/jsoup/select/ElementsTest.java\n import org.jsoup.Jsoup;\n import org.jsoup.TextUtil;\n import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n import org.jsoup.nodes.FormElement;\n import org.jsoup.nodes.Node;\n import org.junit.Test;\n \n         assertEquals(\"blue\", els.get(0).className());\n         assertEquals(\"red green blue mellow\", els.get(1).className());\n+    }\n+\n+    @Test public void hasClassCaseInsensitive() {\n+        Elements els = Jsoup.parse(\"<p Class=One>One <p class=Two>Two <p CLASS=THREE>THREE\").select(\"p\");\n+        Element one = els.get(0);\n+        Element two = els.get(1);\n+        Element thr = els.get(2);\n+\n+        assertTrue(one.hasClass(\"One\"));\n+        assertTrue(one.hasClass(\"ONE\"));\n+\n+        assertTrue(two.hasClass(\"TWO\"));\n+        assertTrue(two.hasClass(\"Two\"));\n+\n+        assertTrue(thr.hasClass(\"ThreE\"));\n+        assertTrue(thr.hasClass(\"three\"));\n     }\n     \n     @Test public void text() {\n--- a/src/test/java/org/jsoup/select/SelectorTest.java\n+++ b/src/test/java/org/jsoup/select/SelectorTest.java\n \n         Elements els2 = Jsoup.parse(\"<div class='One-Two'></div>\").select(\".one-two\");\n         assertEquals(1, els2.size());\n+    }\n+\n+    @Test public void testByClassCaseInsensitive() {\n+        String html = \"<p Class=foo>One <p Class=Foo>Two <p class=FOO>Three <p class=farp>Four\";\n+        Elements elsFromClass = Jsoup.parse(html).select(\"P.Foo\");\n+        Elements elsFromAttr = Jsoup.parse(html).select(\"p[class=foo]\");\n+\n+        assertEquals(elsFromAttr.size(), elsFromClass.size());\n+        assertEquals(3, elsFromClass.size());\n+        assertEquals(\"Two\", elsFromClass.get(1).text());\n     }\n \n     @Test public void testByAttribute() {", "timestamp": 1485041216, "metainfo": ""}