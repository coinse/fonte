{"sha": "8e52c3ee8c83b56cc306ea5384cec54231387a9f", "log": "Minor additional tests", "commit": "\n--- a/src/test/java/com/fasterxml/jackson/databind/struct/TestPOJOAsArray.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/struct/TestPOJOAsArray.java\n package com.fasterxml.jackson.databind.struct;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n \n import com.fasterxml.jackson.annotation.JsonFormat;\n import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n import com.fasterxml.jackson.annotation.JsonFormat.Shape;\n-\n import com.fasterxml.jackson.databind.*;\n import com.fasterxml.jackson.databind.introspect.Annotated;\n import com.fasterxml.jackson.databind.introspect.JacksonAnnotationIntrospector;\n+import com.fasterxml.jackson.databind.struct.TestPOJOAsArrayAdvanced.AsArrayWithMap;\n \n public class TestPOJOAsArray extends BaseMapTest\n {\n         public String bar = null;\n         public String foo = \"bar\";\n     }\n-    \n+\n+    @JsonFormat(shape=JsonFormat.Shape.ARRAY)\n+    @JsonPropertyOrder(alphabetic=true)\n+    static class AsArrayWithMap\n+    {\n+        public Map<Integer,Integer> attrs;\n+\n+        public AsArrayWithMap() { }\n+        public AsArrayWithMap(int x, int y) {\n+            attrs = new HashMap<Integer,Integer>();\n+            attrs.put(x, y);\n+        }\n+    }\n+\n     /*\n     /*****************************************************\n     /* Basic tests\n         assertNotNull(result);\n         assertEquals(\"foobar\", result.name);\n     }\n-    \n+\n     /*\n     /*****************************************************\n     /* Round-trip tests\n         mapper2.setAnnotationIntrospector(new ForceArraysIntrospector());\n         assertEquals(\"[[1,2]]\", mapper2.writeValueAsString(new A()));\n     }\n+\n+    public void testWithMaps() throws Exception\n+    {\n+        AsArrayWithMap input = new AsArrayWithMap(1, 2);\n+        String json = MAPPER.writeValueAsString(input);\n+        AsArrayWithMap output = MAPPER.readValue(json, AsArrayWithMap.class);\n+        assertNotNull(output);\n+        assertNotNull(output.attrs);\n+        assertEquals(1, output.attrs.size());\n+        assertEquals(Integer.valueOf(2), output.attrs.get(1));\n+    }\n }\n--- a/src/test/java/com/fasterxml/jackson/databind/struct/TestPOJOAsArrayAdvanced.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/struct/TestPOJOAsArrayAdvanced.java\n package com.fasterxml.jackson.databind.struct;\n \n import com.fasterxml.jackson.annotation.*;\n-\n import com.fasterxml.jackson.databind.BaseMapTest;\n import com.fasterxml.jackson.databind.ObjectMapper;\n \n         public int b;\n         public int c;\n     }\n-    \n+\n     /*\n     /*****************************************************\n     /* Basic tests", "timestamp": 1418270574, "metainfo": ""}