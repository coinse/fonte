{"sha": "db9efbd54c6ff876768eb874f7e9fe84a6632729", "log": "Have <br> output as \" \" for Element.ownText()", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n     }\n \n     private void text(StringBuilder accum) {\n-        if (tag.getName().equals(\"br\") && !TextNode.lastCharIsWhitespace(accum))\n-            accum.append(\" \");\n+        appendWhitespaceIfBr(this, accum);\n         \n         for (Node child : childNodes) {\n             if (child instanceof TextNode) {\n             if (child instanceof TextNode) {\n                 TextNode textNode = (TextNode) child;\n                 appendNormalisedText(accum, textNode);\n+            } else if (child instanceof Element) {\n+                appendWhitespaceIfBr((Element) child, accum);\n             }\n         }\n     }\n                 text = TextNode.stripLeadingWhitespace(text);\n         }\n         accum.append(text);\n+    }\n+\n+    private static void appendWhitespaceIfBr(Element element, StringBuilder accum) {\n+        if (element.tag.getName().equals(\"br\") && !TextNode.lastCharIsWhitespace(accum))\n+            accum.append(\" \");\n     }\n \n     boolean preserveWhitespace() {\n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n     @Test public void testBrHasSpace() {\n         Document doc = Jsoup.parse(\"<p>Hello<br>there</p>\");\n         assertEquals(\"Hello there\", doc.text());\n+        assertEquals(\"Hello there\", doc.select(\"p\").first().ownText());\n \n         doc = Jsoup.parse(\"<p>Hello <br> there</p>\");\n         assertEquals(\"Hello there\", doc.text());", "timestamp": 1309605128, "metainfo": ""}