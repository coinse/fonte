{"sha": "0aa50cd30a0497208057581c79ce63df2053f1a4", "log": "Fix \"Parent\" Evaluator ignores \"root\" argument for matches.", "commit": "\n--- a/src/main/java/org/jsoup/select/StructuralEvaluator.java\n+++ b/src/main/java/org/jsoup/select/StructuralEvaluator.java\n                 return false;\n \n             Element parent = element.parent();\n-            while (parent != root) {\n+            while (true) {\n                 if (evaluator.matches(root, parent))\n                     return true;\n+                if( parent == root )\n+                \tbreak;\n                 parent = parent.parent();\n             }\n             return false;\n--- a/src/test/java/org/jsoup/select/SelectorTest.java\n+++ b/src/test/java/org/jsoup/select/SelectorTest.java\n     @Test public void descendant() {\n         String h = \"<div class=head><p class=first>Hello</p><p>There</p></div><p>None</p>\";\n         Document doc = Jsoup.parse(h);\n-        Elements els = doc.select(\".head p\");\n+        Element root = doc.getElementsByClass(\"head\").first();\n+        \n+        Elements els = root.select(\".head p\");\n         assertEquals(2, els.size());\n         assertEquals(\"Hello\", els.get(0).text());\n         assertEquals(\"There\", els.get(1).text());\n \n-        Elements p = doc.select(\"p.first\");\n+        Elements p = root.select(\"p.first\");\n         assertEquals(1, p.size());\n         assertEquals(\"Hello\", p.get(0).text());\n \n-        Elements empty = doc.select(\"p .first\"); // self, not descend, should not match\n+        Elements empty = root.select(\"p .first\"); // self, not descend, should not match\n         assertEquals(0, empty.size());\n+        \n+        Elements aboveRoot = root.select(\"body div.head\");\n+        assertEquals(0, aboveRoot.size());\n     }\n \n     @Test public void and() {\n \n     @Test public void deeperDescendant() {\n         String h = \"<div class=head><p><span class=first>Hello</div><div class=head><p class=first><span>Another</span><p>Again</div>\";\n-        Elements els = Jsoup.parse(h).select(\"div p .first\");\n+        Document doc = Jsoup.parse(h);\n+        Element root = doc.getElementsByClass(\"head\").first();\n+        \n+\t\tElements els = root.select(\"div p .first\");\n         assertEquals(1, els.size());\n         assertEquals(\"Hello\", els.first().text());\n         assertEquals(\"span\", els.first().tagName());\n+        \n+        Elements aboveRoot = root.select(\"body p .first\");\n+        assertEquals(0, aboveRoot.size());\n     }\n \n     @Test public void parentChildElement() {", "timestamp": 1440935540, "metainfo": ""}