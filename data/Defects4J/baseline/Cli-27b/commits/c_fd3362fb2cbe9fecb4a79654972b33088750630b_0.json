{"sha": "fd3362fb2cbe9fecb4a79654972b33088750630b", "log": "Test checks the displayed output and does so quietly   ", "commit": "\n--- a/src/test/org/apache/commons/cli/BugsTest.java\n+++ b/src/test/org/apache/commons/cli/BugsTest.java\n  */\n package org.apache.commons.cli;\n \n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import java.io.StringWriter;\n+\n import junit.framework.Test;\n import junit.framework.TestCase;\n import junit.framework.TestSuite;\n                                        .hasArg()\n                                        .create( 'd' );\n         options.addOption( dir );\n-        try {\n-            HelpFormatter formatter = new HelpFormatter();\n-            formatter.printHelp( \"dir\", options );\n-        }\n-        catch( Exception exp ) {\n-            fail( \"Unexpected Exception: \" + exp.getMessage() );\n+        \n+        \n+        final PrintStream oldSystemOut = System.out;\n+        try{\n+            final ByteArrayOutputStream bytes = new ByteArrayOutputStream();\n+            final PrintStream print = new PrintStream(bytes);\n+            \n+            // capture this platform's eol symbol\n+            print.println();\n+            final String eol = bytes.toString();\n+            bytes.reset();\n+            \n+            System.setOut(new PrintStream(bytes));\n+            try {\n+                HelpFormatter formatter = new HelpFormatter();\n+                formatter.printHelp( \"dir\", options );\n+            }\n+            catch( Exception exp ) {\n+                fail( \"Unexpected Exception: \" + exp.getMessage() );\n+            }\n+            assertEquals(\"usage: dir\"+eol+\" -d <arg>   dir\"+eol,bytes.toString());\n+        }\n+        finally {\n+            System.setOut(oldSystemOut);\n         }\n     }\n ", "timestamp": 1094511105, "metainfo": ""}