{"sha": "a50d473a3bd44b84281a5d94432bf7e812472b68", "log": "Delimiter is not optional so change back type from Character to char. The side effect is that the \"pristine\" format must be built with somekind of default (',') seems reasonable. The comment used to say \"no settings defined\" but that was not true, since false was passed in for two values instead of null. IMO, this is all due to the fluent API making this part of the code a little more tricky.  ", "commit": "\n--- a/src/main/java/org/apache/commons/csv/CSVFormat.java\n+++ b/src/main/java/org/apache/commons/csv/CSVFormat.java\n      * @throws IllegalStateException\n      */\n     void validate() throws IllegalStateException {\n-        if (delimiter == encapsulator) {\n+        if (encapsulator != null && delimiter == encapsulator) {\n             throw new IllegalStateException(\"The encapsulator character and the delimiter cannot be the same ('\" + encapsulator + \"')\");\n         }\n \n-        if (delimiter == escape) {\n+        if (escape != null && delimiter == escape) {\n             throw new IllegalStateException(\"The escape character and the delimiter cannot be the same ('\" + escape + \"')\");\n         }\n \n-        if (delimiter == commentStart) {\n+        if (commentStart != null && delimiter == commentStart) {\n             throw new IllegalStateException(\"The comment start character and the delimiter cannot be the same ('\" + commentStart + \n                     \"')\");\n         }", "timestamp": 1350155759, "metainfo": ""}