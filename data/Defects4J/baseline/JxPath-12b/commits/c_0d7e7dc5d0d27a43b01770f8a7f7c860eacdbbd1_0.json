{"sha": "0d7e7dc5d0d27a43b01770f8a7f7c860eacdbbd1", "log": "[JXPATH-20] removeAll() only removed the first matching element; slightly inelegant fix  ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java\n+++ b/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java\n import org.apache.commons.jxpath.ri.model.beans.CollectionPointerFactory;\n import org.apache.commons.jxpath.ri.model.container.ContainerPointerFactory;\n import org.apache.commons.jxpath.ri.model.dynamic.DynamicPointerFactory;\n+import org.apache.commons.jxpath.util.ReverseComparator;\n import org.apache.commons.jxpath.util.TypeUtils;\n \n /**\n             while (it.hasNext()) {\n                 list.add(it.next());\n             }\n-            Collections.sort(list);\n-            for (int i = list.size() - 1; i >= 0; i--) {\n-                NodePointer pointer = (NodePointer) list.get(i);\n+            Collections.sort(list, ReverseComparator.INSTANCE);\n+            it = list.iterator();\n+            if (it.hasNext()) {\n+                NodePointer pointer = (NodePointer) it.next();\n                 pointer.remove();\n+                while (it.hasNext()) {\n+                    removePath(((NodePointer) it.next()).asPath());\n+                }\n             }\n         }\n         catch (Throwable ex) {", "timestamp": 1168469058, "metainfo": ""}