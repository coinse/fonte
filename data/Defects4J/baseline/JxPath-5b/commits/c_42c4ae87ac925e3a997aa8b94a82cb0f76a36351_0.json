{"sha": "42c4ae87ac925e3a997aa8b94a82cb0f76a36351", "log": "Applied patch by Nick Van den Bleeken, dealing with null default namespace   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java\n+++ b/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java\n  * A Pointer that points to a DOM node.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.24 $ $Date: 2004/06/29 22:58:17 $\n+ * @version $Revision: 1.25 $ $Date: 2004/10/06 00:34:14 $\n  */\n public class DOMNodePointer extends NodePointer {\n     private Node node;\n     }\n \n     private static boolean equalStrings(String s1, String s2) {\n-        if (s1 == null && s2 != null) {\n-            return false;\n-        }\n-        if (s1 != null && s2 == null) {\n-            return false;\n+        if (s1 == null) {\n+            return s2 == null || s2.trim().length() == 0;\n+        }\n+        \n+        if (s2 == null) {\n+            return s1 == null || s1.trim().length() == 0;\n         }\n \n         if (s1 != null && !s1.trim().equals(s2.trim())) {\n--- a/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java\n+++ b/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java\n  * Test extension functions.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.16 $ $Date: 2004/04/04 23:16:24 $\n+ * @version $Revision: 1.17 $ $Date: 2004/10/06 00:34:14 $\n  */\n \n public class ExtensionFunctionTest extends JXPathTestCase {\n             \n         context.getValue(\"add($myList, 'hello')\");\n         assertEquals(\"After adding an element\", 2, list.size());\n+        \n+        JXPathContext context = JXPathContext.newContext(new ArrayList());\n+        assertEquals(\"Extension function on root collection\", \"0\", String\n+                .valueOf(context.getValue(\"size(/)\")));\n     }\n \n     public void testStaticMethodCall() {\n--- a/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n+++ b/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n  * DOM, JDOM etc.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.23 $ $Date: 2004/06/30 00:29:13 $\n+ * @version $Revision: 1.24 $ $Date: 2004/10/06 00:34:14 $\n  */\n \n public abstract class XMLModelTestCase extends JXPathTestCase {\n \n         // child:: with a qualified name\n         assertXPathValue(context, \"vendor/product/price:amount\", \"45.95\");\n+        \n+        // null default namespace\n+        context.registerNamespace(\"x\", \"temp\");\n+        assertXPathValue(context, \"vendor/x:pos//number\", \"109\");\n     }\n \n     public void testAxisChildIndexPredicate() {", "timestamp": 1097022854, "metainfo": ""}