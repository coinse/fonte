{"sha": "013629ad4de56ce8266fcf6897b8061a238d8314", "log": "Workaround for a Crimson bug - it does not support getAttributeNS properly.   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java\n+++ b/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java,v 1.3 2002/04/26 01:00:38 dmitri Exp $\n- * $Revision: 1.3 $\n- * $Date: 2002/04/26 01:00:38 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java,v 1.4 2002/06/18 00:03:16 dmitri Exp $\n+ * $Revision: 1.4 $\n+ * $Date: 2002/06/18 00:03:16 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * An iterator of attributes of a DOM Node.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.3 $ $Date: 2002/04/26 01:00:38 $\n+ * @version $Revision: 1.4 $ $Date: 2002/06/18 00:03:16 $\n  */\n public class DOMAttributeIterator implements NodeIterator {\n     private NodePointer parent;\n             testNS = parent.getNamespaceURI(testPrefix);\n         }\n \n-        Node attr;\n         if (testNS != null){\n-            return element.getAttributeNodeNS(testNS, name.getName());\n+            Attr attr = element.getAttributeNodeNS(testNS, name.getName());\n+            if (attr == null){\n+                // This may mean that the parser does not support NS for\n+                // attributes, example - the version of Crimson bundled\n+                // with JDK 1.4.0\n+                NamedNodeMap nnm = element.getAttributes();\n+                for (int i = 0; i < nnm.getLength(); i++){\n+                    attr = (Attr)nnm.item(i);\n+                    if (testAttr(attr, name)){\n+                        return attr;\n+                    }\n+                }\n+            }\n+            return null;\n         }\n         else {\n             return element.getAttributeNode(name.getName());", "timestamp": 1024358596, "metainfo": ""}