{"sha": "7da3da7f04c7b032bdb8b7cebdc353bdede42353", "log": "Fixed a problem with passing collections as arguments and using getNodeSet in general   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/EvalContext.java\n+++ b/src/java/org/apache/commons/jxpath/ri/EvalContext.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/EvalContext.java,v 1.27 2003/10/09 21:31:38 rdonkin Exp $\n- * $Revision: 1.27 $\n- * $Date: 2003/10/09 21:31:38 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/EvalContext.java,v 1.28 2004/01/24 02:16:19 dmitri Exp $\n+ * $Revision: 1.28 $\n+ * $Date: 2004/01/24 02:16:19 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * implement behavior of various XPath axes: \"child::\", \"parent::\" etc.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.27 $ $Date: 2003/10/09 21:31:38 $\n+ * @version $Revision: 1.28 $ $Date: 2004/01/24 02:16:19 $\n  */\n public abstract class EvalContext implements ExpressionContext, Iterator {\n     protected EvalContext parentContext;\n         BasicNodeSet set = new BasicNodeSet();\n         while (nextSet()) {\n             while (nextNode()) {\n-                set.add(getCurrentNodePointer());\n+                set.add((Pointer)getCurrentNodePointer().clone());\n             }\n         }\n \n--- a/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java\n+++ b/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java,v 1.11 2004/01/19 20:44:52 dmitri Exp $\n- * $Revision: 1.11 $\n- * $Date: 2004/01/19 20:44:52 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/compiler/ExtensionFunctionTest.java,v 1.12 2004/01/24 02:16:51 dmitri Exp $\n+ * $Revision: 1.12 $\n+ * $Date: 2004/01/24 02:16:51 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * Test extension functions.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.11 $ $Date: 2004/01/19 20:44:52 $\n+ * @version $Revision: 1.12 $ $Date: 2004/01/24 02:16:51 $\n  */\n \n public class ExtensionFunctionTest extends JXPathTestCase {\n         assertXPathValue(\n             context,\n             \"test:collection()/@name\",\n-            \"foo\");        \n+            \"foo\");   \n+        \n+        List list = new ArrayList();\n+        list.add(\"foo\");\n+        list.add(\"bar\");\n+        context.getVariables().declareVariable(\"myList\", list); \n+        Object\n+        values = context.getValue(\"test:items($myList)\");\n+        System.err.println(\"Values: \" + values);\n     }\n \n     public void testNodeSetReturn() {\n--- a/src/test/org/apache/commons/jxpath/ri/compiler/TestFunctions.java\n+++ b/src/test/org/apache/commons/jxpath/ri/compiler/TestFunctions.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/compiler/TestFunctions.java,v 1.7 2003/10/09 21:31:43 rdonkin Exp $\n- * $Revision: 1.7 $\n- * $Date: 2003/10/09 21:31:43 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/compiler/TestFunctions.java,v 1.8 2004/01/24 02:16:51 dmitri Exp $\n+ * $Revision: 1.8 $\n+ * $Date: 2004/01/24 02:16:51 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n \n /**\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.7 $ $Date: 2003/10/09 21:31:43 $\n+ * @version $Revision: 1.8 $ $Date: 2004/01/24 02:16:51 $\n  */\n public class TestFunctions {\n \n         \n         return set;\n     }\n+    \n+    public static Collection items(Collection arg) {\n+        return arg;\n+    }\n }", "timestamp": 1074910611, "metainfo": ""}