{"sha": "34beb478c9c3bc015a1fc76c33458e99197b6d7c", "log": "Fixed [Issue-29]", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/FromXmlParser.java\n+++ b/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/FromXmlParser.java\n     @Override\n     public JsonToken nextToken() throws IOException, JsonParseException\n     {\n+        _binaryValue = null; // to fix [Issue-29]\n         if (_nextToken != null) {\n             JsonToken t = _nextToken;\n             _currToken = t;\n             }\n             return t;\n         }\n-\n         int token = _xmlTokens.next();\n         \n         /* Need to have a loop just because we may have to eat/convert\n--- /dev/null\n+++ b/src/test/java/com/fasterxml/jackson/dataformat/xml/TestBinaryData.java\n+package com.fasterxml.jackson.dataformat.xml;\n+\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+\n+public class TestBinaryData extends XmlTestBase\n+{\n+    public static class Data {\n+        public byte[] bytes;\n+    }\n+\n+    public static class TwoData {\n+        public Data data1;\n+        public Data data2;\n+    }\n+\n+    /*\n+    /**********************************************************\n+    /* Unit tests\n+    /**********************************************************\n+     */\n+\n+    private final XmlMapper MAPPER = new XmlMapper();\n+    \n+    // for [https://github.com/FasterXML/jackson-dataformat-xml/issues/29]\n+    public void testTwoBinaryProps() throws Exception\n+    {\n+        /* Hmmh. Looks like XmlMapper has some issues with convertValue:\n+         * should investigate at some point. But not now...\n+         */\n+        final ObjectMapper jsonMapper = new ObjectMapper();\n+        String BIN1 = jsonMapper.convertValue(\"Hello\".getBytes(\"UTF-8\"), String.class);\n+        String BIN2 = jsonMapper.convertValue(\"world!!\".getBytes(\"UTF-8\"), String.class);\n+        String xml = \n+            \"<TwoData>\" +\n+                    \"<data1><bytes>\" + BIN1 + \"</bytes></data1>\" +\n+                    \"<data2><bytes>\" + BIN2 + \"</bytes></data2>\" +\n+            \"</TwoData>\";\n+\n+        TwoData two = new XmlMapper().readValue(xml, TwoData.class);\n+        assertEquals(\"Hello\", new String(two.data1.bytes, \"UTF-8\"));\n+        assertEquals(\"world!!\", new String(two.data2.bytes, \"UTF-8\"));\n+    }\n+}", "timestamp": 1342653967, "metainfo": ""}