{"sha": "9df7dec0dfaf5d6b19ef08aa45a2001cb2639ae0", "log": "Fix #167", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java\n+++ b/src/main/java/com/fasterxml/jackson/dataformat/xml/deser/XmlTokenStream.java\n         }\n         try {\n             String text = _collectUntilTag();\n-            if (text != null && _xmlReader.getEventType() == XMLStreamReader.END_ELEMENT) {\n+            // 23-Dec-2015, tatu: Used to require text not to be null, but as per\n+            //   [dataformat-xml#167], empty tag does count\n+            if (_xmlReader.getEventType() == XMLStreamReader.END_ELEMENT) {\n+                if (text == null) {\n+                    text = \"\";\n+                }\n                 if (_currentWrapper != null) {\n                     _currentWrapper = _currentWrapper.getParent();\n                 }\n--- a/src/test/java/com/fasterxml/jackson/dataformat/xml/deser/TestStringValues.java\n+++ b/src/test/java/com/fasterxml/jackson/dataformat/xml/deser/TestStringValues.java\n         public String toString() {\n             return \"[a=\"+a+\",b=\"+b+\"]\";\n         }\n+    }\n+\n+    static class Issue167Bean {\n+        public String d;\n     }\n \n     /*\n         assertEquals(\"Bulla\", beans[1].text);\n         assertEquals(\"Good stuff\", beans[2].text);\n     }\n+\n+    public void testEmptyElementToString() throws Exception\n+    {\n+        final String XML =\n+\"<a xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>\\n\"+\n+\"<d xsi:nil='true'/>\\n\"+\n+\"</a>\\n\";\n+        Issue167Bean result = MAPPER.readValue(XML, Issue167Bean.class);\n+        assertNotNull(result);\n+        assertEquals(\"\", result.d);\n+    }\n }", "timestamp": 1450933322, "metainfo": ""}