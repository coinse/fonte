{"sha": "84234a65638f0e9e4be73dfcccaa6530a5b571af", "log": "Applying additional patch to throw IllegalStateException when the specified width is not enough to fit the flags, indent and 1 character for the description. This closes out CLI-162 (for now :) ).   ", "commit": "\n--- a/src/java/org/apache/commons/cli/HelpFormatter.java\n+++ b/src/java/org/apache/commons/cli/HelpFormatter.java\n         // characters\n         final String padding = createPadding(nextLineTabStop);\n \n+        if (nextLineTabStop >= width)\n+        {\n+            // stops infinite loop happening\n+            throw new IllegalStateException(\"Total width is less than the width of the argument and indent \" + \n+                                            \"- no room for the description\");\n+        }\n+\n         while (true)\n         {\n             text = padding + text.substring(pos).trim();\n--- a/src/test/org/apache/commons/cli/bug/BugCLI162Test.java\n+++ b/src/test/org/apache/commons/cli/bug/BugCLI162Test.java\n                           \"                      yes.\\n\" +\n                           \"Footer\\n\";\n         assertEquals( \"Long arguments did not split as expected\", expected, sw.toString() );\n+\n+        try {\n+            formatter.printHelp(new PrintWriter(sw), 22, this.getClass().getName(), \"Header\", options, 0, 5, \"Footer\");\n+            fail(\"IllegalStateException expected\");\n+        } catch(IllegalStateException ise) {\n+            // expected\n+        }\n+\n     }\n \n }", "timestamp": 1235106059, "metainfo": ""}