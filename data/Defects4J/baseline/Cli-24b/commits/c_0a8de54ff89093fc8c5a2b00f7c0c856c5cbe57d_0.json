{"sha": "0a8de54ff89093fc8c5a2b00f7c0c856c5cbe57d", "log": "Changed UnrecognizedOptionException to include the option that wasn't recognized  ", "commit": "\n--- a/src/java/org/apache/commons/cli/Parser.java\n+++ b/src/java/org/apache/commons/cli/Parser.java\n         // if there is no option throw an UnrecognisedOptionException\n         if (!hasOption)\n         {\n-            throw new UnrecognizedOptionException(\"Unrecognized option: \" \n-                                                  + arg);\n+            throw new UnrecognizedOptionException(\"Unrecognized option: \" + arg, arg);\n         }\n         \n         // get the option represented by arg\n--- a/src/java/org/apache/commons/cli/UnrecognizedOptionException.java\n+++ b/src/java/org/apache/commons/cli/UnrecognizedOptionException.java\n  */\n public class UnrecognizedOptionException extends ParseException\n {\n+    /** The  unrecognized option */\n+    private String option;\n+\n     /**\n      * Construct a new <code>UnrecognizedArgumentException</code>\n      * with the specified detail message.\n     {\n         super(message);\n     }\n+\n+    /**\n+     * Construct a new <code>UnrecognizedArgumentException</code>\n+     * with the specified option and detail message.\n+     *\n+     * @param message the detail message\n+     * @param option  the unrecognized option\n+     * @since 1.2\n+     */\n+    public UnrecognizedOptionException(String message, String option)\n+    {\n+        this(message);\n+        this.option = option;\n+    }\n+\n+    /**\n+     * Returns the unrecognized option.\n+     *\n+     * @since 1.2\n+     */\n+    public String getOption()\n+    {\n+        return option;\n+    }\n }\n--- a/src/test/org/apache/commons/cli/GnuParserTest.java\n+++ b/src/test/org/apache/commons/cli/GnuParserTest.java\n         assertTrue(\"Confirm size of extra args\", cl.getArgList().size() == 2);\n     }\n \n-    public void testExtraOption() throws Exception\n-    {\n-        String[] args = new String[] { \"-a\", \"-d\", \"-b\", \"toast\",\n-                                       \"foo\", \"bar\" };\n-\n-        boolean caught = false;\n+    public void testUnrecognizedOption() throws Exception\n+    {\n+        String[] args = new String[] { \"-a\", \"-d\", \"-b\", \"toast\", \"foo\", \"bar\" };\n \n         try\n         {\n-            CommandLine cl = parser.parse(options, args);\n-\n-            assertTrue(\"Confirm -a is set\", cl.hasOption(\"a\"));\n-            assertTrue(\"Confirm -b is set\", cl.hasOption(\"b\"));\n-            assertTrue(\"confirm arg of -b\", cl.getOptionValue(\"b\").equals(\"toast\"));\n-            assertTrue(\"Confirm size of extra args\", cl.getArgList().size() == 3);\n+            parser.parse(options, args);\n+            fail(\"UnrecognizedOptionException wasn't thrown\");\n         }\n         catch (UnrecognizedOptionException e)\n         {\n-            caught = true;\n-        }\n-\n-        assertTrue( \"Confirm UnrecognizedOptionException caught\", caught );\n+            assertEquals(\"-d\", e.getOption());\n+        }\n     }\n \n     public void testMissingArg() throws Exception\n--- a/src/test/org/apache/commons/cli/PosixParserTest.java\n+++ b/src/test/org/apache/commons/cli/PosixParserTest.java\n         assertTrue( \"Confirm size of extra args\", cl.getArgList().size() == 2);\n     }\n \n-    public void testExtraOption() throws Exception\n-    {\n-        String[] args = new String[] { \"-adbtoast\",\n-                                       \"foo\", \"bar\" };\n-\n-        boolean caught = false;\n+    public void testUnrecognizedOption() throws Exception\n+    {\n+        String[] args = new String[] { \"-adbtoast\", \"foo\", \"bar\" };\n \n         try\n         {\n-            CommandLine cl = parser.parse(options, args);\n-\n-            assertTrue( \"Confirm -a is set\", cl.hasOption(\"a\") );\n-            assertTrue( \"Confirm -b is set\", cl.hasOption(\"b\") );\n-            assertTrue( \"confirm arg of -b\", cl.getOptionValue(\"b\").equals(\"toast\") );\n-            assertTrue( \"Confirm size of extra args\", cl.getArgList().size() == 3);\n+            parser.parse(options, args);\n+            fail(\"UnrecognizedOptionException wasn't thrown\");\n         }\n         catch (UnrecognizedOptionException e)\n         {\n-            caught = true;\n-        }\n-\n-        assertTrue( \"Confirm UnrecognizedOptionException caught\", caught );\n+            assertEquals(\"-adbtoast\", e.getOption());\n+        }\n     }\n \n     public void testMissingArg() throws Exception", "timestamp": 1216938338, "metainfo": ""}