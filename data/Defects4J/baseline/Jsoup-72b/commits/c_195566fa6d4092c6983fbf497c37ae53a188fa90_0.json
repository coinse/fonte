{"sha": "195566fa6d4092c6983fbf497c37ae53a188fa90", "log": "Allow rctext / rcdata tags to self -close  Fixes #906", "commit": "\n--- a/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n+++ b/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n     }\n \n     private static void handleRcData(Token.StartTag startTag, HtmlTreeBuilder tb) {\n-        tb.insert(startTag);\n         tb.tokeniser.transition(TokeniserState.Rcdata);\n         tb.markInsertionMode();\n         tb.transition(Text);\n+        tb.insert(startTag);\n     }\n \n     private static void handleRawtext(Token.StartTag startTag, HtmlTreeBuilder tb) {\n-        tb.insert(startTag);\n         tb.tokeniser.transition(TokeniserState.Rawtext);\n         tb.markInsertionMode();\n         tb.transition(Text);\n+        tb.insert(startTag);\n     }\n \n     // lists of tags to search through. A little harder to read here, but causes less GC than dynamic varargs.\n--- a/src/test/java/org/jsoup/parser/HtmlParserTest.java\n+++ b/src/test/java/org/jsoup/parser/HtmlParserTest.java\n         assertEquals(\"<div id=\\\"1\\\"></div><script src=\\\"/foo\\\"></script><div id=\\\"2\\\"><img><img></div><a id=\\\"3\\\"></a><i></i><foo /><foo>One</foo> <hr> hr text <hr> hr text two\", TextUtil.stripNewlines(doc.body().html()));\n     }\n \n+    @Test public void handlesKnownEmptyNoFrames() {\n+        String h = \"<html><head><noframes /><meta name=foo></head><body>One</body></html>\";\n+        Document doc = Jsoup.parse(h);\n+        assertEquals(\"<html><head><noframes></noframes><meta name=\\\"foo\\\"></head><body>One</body></html>\", TextUtil.stripNewlines(doc.html()));\n+    }\n+\n+    @Test public void handlesKnownEmptyStyle() {\n+        String h = \"<html><head><style /><meta name=foo></head><body>One</body></html>\";\n+        Document doc = Jsoup.parse(h);\n+        assertEquals(\"<html><head><style></style><meta name=\\\"foo\\\"></head><body>One</body></html>\", TextUtil.stripNewlines(doc.html()));\n+    }\n+\n+    @Test public void handlesKnownEmptyTitle() {\n+        String h = \"<html><head><title /><meta name=foo></head><body>One</body></html>\";\n+        Document doc = Jsoup.parse(h);\n+        assertEquals(\"<html><head><title></title><meta name=\\\"foo\\\"></head><body>One</body></html>\", TextUtil.stripNewlines(doc.html()));\n+    }\n+\n     @Test public void handlesSolidusAtAttributeEnd() {\n         // this test makes sure [<a href=/>link</a>] is parsed as [<a href=\"/\">link</a>], not [<a href=\"\" /><a>link</a>]\n         String h = \"<a href=/>link</a>\";", "timestamp": 1498775045, "metainfo": ""}