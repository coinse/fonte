{"sha": "d0418222830f42f4f0c770e406f71454ea50e56d", "log": "Tweaked escaped entity detection in attributes to not treat &entity_... as an entity form.", "commit": "\n--- a/src/main/java/org/jsoup/parser/Tokeniser.java\n+++ b/src/main/java/org/jsoup/parser/Tokeniser.java\n             return null;\n         if (additionalAllowedCharacter != null && additionalAllowedCharacter == reader.current())\n             return null;\n-        if (reader.matchesAny('\\t', '\\n', '\\f', '<', '&'))\n+        if (reader.matchesAny('\\t', '\\n', '\\f', ' ', '<', '&'))\n             return null;\n \n         reader.mark();\n                 reader.rewindToMark();\n                 return null;\n             }\n-            if (inAttribute && (reader.matchesLetter() || reader.matchesDigit() || reader.matches('='))) {\n+            if (inAttribute && (reader.matchesLetter() || reader.matchesDigit() || reader.matchesAny('=', '-', '_'))) {\n                 // don't want that to match\n                 reader.rewindToMark();\n                 return null;\n--- a/src/test/java/org/jsoup/parser/AttributeParseTest.java\n+++ b/src/test/java/org/jsoup/parser/AttributeParseTest.java\n         assertEquals(\"?foo=bar\u2223&lt=true\", els.first().attr(\"href\")); // &mid gets to \u2223 because not tailed by =; lt is so not unescaped\n         assertEquals(\"?foo=bar<qux&lg=1\", els.last().attr(\"href\"));\n     }\n+\n+    @Test public void moreAttributeUnescapes() {\n+        String html = \"<a href='&wr_id=123&mid-size=true&ok=&wr'>Check</a>\";\n+        Elements els = Jsoup.parse(html).select(\"a\");\n+        assertEquals(\"&wr_id=123&mid-size=true&ok=\u2240\", els.first().attr(\"href\"));\n+    }\n }", "timestamp": 1314504801, "metainfo": ""}