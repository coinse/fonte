{"sha": "93ff111c590ea57b311705360111a3e54329a026", "log": "Added jsoup.connect.cookies(Map) method, to set multiple cookies at once, possibly from a prior request.", "commit": "\n--- a/src/main/java/org/jsoup/Connection.java\n+++ b/src/main/java/org/jsoup/Connection.java\n     public Connection header(String name, String value);\n \n     /**\n-     * Set a cookie to be sent in the request\n+     * Set a cookie to be sent in the request.\n      * @param name name of cookie\n      * @param value value of cookie\n      * @return this Connection, for chaining\n      */\n     public Connection cookie(String name, String value);\n+\n+    /**\n+     * Adds each of the supplied cookies to the request.\n+     * @param cookies map of cookie name -> value pairs\n+     * @return this Connection, for chaining\n+     */\n+    public Connection cookies(Map<String, String> cookies);\n \n     /**\n      * Execute the request as a GET, and parse the result.\n--- a/src/main/java/org/jsoup/helper/HttpConnection.java\n+++ b/src/main/java/org/jsoup/helper/HttpConnection.java\n \n     public Connection cookie(String name, String value) {\n         req.cookie(name, value);\n+        return this;\n+    }\n+\n+    public Connection cookies(Map<String, String> cookies) {\n+        Validate.notNull(cookies, \"Cookie map must not be null\");\n+        for (Map.Entry<String, String> entry : cookies.entrySet()) {\n+            req.cookie(entry.getKey(), entry.getValue());\n+        }\n         return this;\n     }\n \n--- a/src/test/java/org/jsoup/integration/UrlConnectTest.java\n+++ b/src/test/java/org/jsoup/integration/UrlConnectTest.java\n \n import java.net.URL;\n import java.io.IOException;\n+import java.util.Map;\n \n /**\n  Tests the URL connection. Not enabled by default, so tests don't require network connection.\n         }\n         assertTrue(threw);\n     }\n+\n+    @Test\n+    public void multiCookieSet() throws IOException {\n+        Connection con = Jsoup.connect(\"http://infohound.net/tools/302-cookie.pl\");\n+        Connection.Response res = con.execute();\n+\n+        // test cookies set by redirect:\n+        Map<String, String> cookies = res.cookies();\n+        assertEquals(\"asdfg123\", cookies.get(\"token\"));\n+        assertEquals(\"jhy\", cookies.get(\"uid\"));\n+\n+        // send those cookies into the echo URL by map:\n+        Document doc = Jsoup.connect(echoURL).cookies(cookies).get();\n+        assertEquals(\"uid=jhy; token=asdfg123\", ihVal(\"HTTP_COOKIE\", doc));\n+    }\n }", "timestamp": 1314493783, "metainfo": ""}