{"sha": "a58c8e679c00be9abea4925d3b96c16fd2cd9c64", "log": "removing last class should remove class attribute (#963)", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n      */\n     public Element classNames(Set<String> classNames) {\n         Validate.notNull(classNames);\n-        attributes().put(\"class\", StringUtil.join(classNames, \" \"));\n+        if (classNames.isEmpty()) {\n+            attributes().remove(\"class\");\n+        } else {\n+            attributes().put(\"class\", StringUtil.join(classNames, \" \"));\n+        }\n         return this;\n     }\n \n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n         assertEquals(cloneExpect, cloneNextElementSibling.text());\n         assertEquals(cloneExpect, cloneNextSibling.text());\n     }\n+\n+    @Test\n+    public void testRemovingEmptyClassAttributeWhenLastClassRemoved() {\n+        // https://github.com/jhy/jsoup/issues/947\n+        Document doc = Jsoup.parse(\"<img class=\\\"one two\\\" />\");\n+        Element img = doc.select(\"img\").first();\n+        img.removeClass(\"one\");\n+        img.removeClass(\"two\");\n+        assertFalse(doc.body().html().contains(\"class=\\\"\\\"\"));\n+    }\n+\n }", "timestamp": 1509816350, "metainfo": ""}