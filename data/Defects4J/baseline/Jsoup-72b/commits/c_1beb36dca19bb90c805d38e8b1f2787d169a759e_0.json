{"sha": "1beb36dca19bb90c805d38e8b1f2787d169a759e", "log": "Add method cssPath to Element to get the CSS unique path of an element.", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n     }\n \n     /**\n+     * Get this element's CSS Path. If the element has an id, returns #id,\n+     * Otherwise it returns the parent (if any) css path followed by '>',\n+     * followed by an unique selector for the element (tag.class.class:nth-child(n)).\n+     * @return the CSS Path that can be used to retrieve the element in a selector.\n+     */\n+    public String cssPath() {\n+        if (!id().isEmpty())\n+            return \"#\" + id();\n+\n+        StringBuilder selector = new StringBuilder(tagName());\n+        String classes = StringUtil.join(classNames(), \".\");\n+        if (!classes.isEmpty())\n+            selector.append('.').append(classes);\n+\n+        if (parent() == null)\n+            return selector.toString();\n+\n+        selector.insert(0, \" > \");\n+        if (parent().select(selector.toString()).size() > 1)\n+            selector.append(String.format(\n+                \":nth-child(%d)\", elementSiblingIndex() + 1));\n+\n+        return parent().cssPath() + selector.toString();\n+    }\n+\n+    /**\n      * Get sibling elements. If the element has no sibling elements, returns an empty list. An element is not a sibling\n      * of itself, so will not be included in the returned list.\n      * @return sibling elements\n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n         assertEquals(\"<div id=\\\"1\\\">Text <p>One</p> Text <p>Two</p></div><div id=\\\"2\\\"><p>One cloned</p><p>Two</p></div>\",\n             TextUtil.stripNewlines(doc.body().html()));\n     }\n+\n+    @Test\n+    public void testCssPath() {\n+        Document doc = Jsoup.parse(\"<div id=\\\"id1\\\">A</div><div>B</div><div class=\\\"c1 c2\\\">C</div>\");\n+        Element divA = doc.select(\"div\").get(0);\n+        Element divB = doc.select(\"div\").get(1);\n+        Element divC = doc.select(\"div\").get(2);\n+        assertEquals(divA.cssPath(), \"#id1\");\n+        assertEquals(divB.cssPath(), \"#root > html > body > div:nth-child(2)\");\n+        assertEquals(divC.cssPath(), \"#root > html > body > div.c1.c2\");\n+    }\n+\n }", "timestamp": 1410343224, "metainfo": ""}