{"sha": "e922bf949aa055fe1da03056f202b80d17506791", "log": "CSV-84 Clarify comment handling Fix code so comment only detected at start of a line  ", "commit": "\n--- a/src/main/java/org/apache/commons/csv/CSVLexer.java\n+++ b/src/main/java/org/apache/commons/csv/CSVLexer.java\n         *       is to call 'readAgain' on the stream...\n         */\n         int c = in.read();\n+\n+        if (isStartOfLine(lastChar) && isCommentStart(c)) {\n+            in.readLine();\n+            tkn.type = COMMENT;\n+            return tkn;\n+        }\n+\n         boolean eol = isEndOfLine(c);\n         c = in.readAgain();\n \n         //  empty line detection: eol AND (last char was EOL or beginning)\n         if (emptyLinesIgnored) {\n-            while (eol && (lastChar == '\\n' || lastChar == '\\r' || lastChar == ExtendedBufferedReader.UNDEFINED)) {\n+            while (eol && isStartOfLine(lastChar)) {\n                 // go on char ahead ...\n                 lastChar = c;\n                 c = in.read();\n                 }\n             }\n             \n-            // ok, start of token reached: comment, encapsulated, or token\n-            if (isCommentStart(c)) { // TODO should only match at start of line\n-                // ignore everything till end of line and continue (incr linecount)\n-                in.readLine();\n-                tkn.type = COMMENT;\n-            } else if (isDelimiter(c)) {\n+            // ok, start of token reached: encapsulated, or token\n+            if (isDelimiter(c)) {\n                 // empty token return TOKEN(\"\")\n                 tkn.type = TOKEN;\n             } else if (eol) {", "timestamp": 1332942387, "metainfo": ""}