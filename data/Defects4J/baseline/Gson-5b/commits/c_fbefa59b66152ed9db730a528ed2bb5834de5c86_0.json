{"sha": "fbefa59b66152ed9db730a528ed2bb5834de5c86", "log": "changed synchronization on Date type adapter to be for the format object per code review comments on r452", "commit": "\n--- a/gson/src/main/java/com/google/gson/DefaultTypeAdapters.java\n+++ b/gson/src/main/java/com/google/gson/DefaultTypeAdapters.java\n \n     // These methods need to be synchronized since JDK DateFormat classes are not thread-safe\n     // See issue 162\n-    public synchronized JsonElement serialize(\n-        Date src, Type typeOfSrc, JsonSerializationContext context) {\n-      String dateFormatAsString = format.format(src);\n-      return new JsonPrimitive(dateFormatAsString);\n-    }\n-\n-    public synchronized Date deserialize(\n-        JsonElement json, Type typeOfT, JsonDeserializationContext context)\n+    public JsonElement serialize(Date src, Type typeOfSrc, JsonSerializationContext context) {\n+      synchronized (format) {\n+        String dateFormatAsString = format.format(src);\n+        return new JsonPrimitive(dateFormatAsString);\n+      }\n+    }\n+\n+    public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context)\n         throws JsonParseException {\n       if (!(json instanceof JsonPrimitive)) {\n         throw new JsonParseException(\"The date should be a string value\");\n       }\n-\n       try {\n-        return format.parse(json.getAsString());\n+        synchronized (format) {\n+          return format.parse(json.getAsString());\n+        }\n       } catch (ParseException e) {\n         throw new JsonParseException(e);\n       }", "timestamp": 1254352290, "metainfo": ""}