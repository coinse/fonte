{"sha": "de74482fe8dffcf6eed62438244cb08ddbc3f442", "log": "Implemented hashCode and equals for TypedKey to make it a value object. Asserted preconditions on constructor input.", "commit": "\n--- a/wsdef/src/main/java/com/google/gson/webservice/definition/TypedKey.java\n+++ b/wsdef/src/main/java/com/google/gson/webservice/definition/TypedKey.java\n   private final Class<T> classOfT;\n \n   public TypedKey(String name, Class<T> classOfT) {\n+    Preconditions.checkNotNull(name);\n+    Preconditions.checkNotNull(classOfT);\n+\n     this.name = name;\n     this.classOfT = classOfT;\n   }\n   public Class<T> getClassOfT() {\n     return classOfT;\n   }\n+\n+  \n+  @Override\n+  public int hashCode() {\n+    return name.hashCode() + classOfT.getCanonicalName().hashCode() >> 1;\n+  }\n+\n+  @Override\n+  public boolean equals(Object obj) {\n+    if (this == obj) {\n+      return true;\n+    }\n+    if (obj == null) {\n+      return false;\n+    }\n+    if (getClass() != obj.getClass()) {\n+      return false;\n+    }\n+    TypedKey<?> other = (TypedKey<?>) obj;\n+    return name.equals(other.name) && classOfT.equals(other.classOfT);\n+  }\n+\n+  @Override\n+  public String toString() {\n+    return String.format(\"{name:%s, classOfT:%s}\", name, classOfT);\n+  }\n }\n--- /dev/null\n+++ b/wsdef/src/test/java/com/google/gson/webservice/definition/TypedKeyTest.java\n+// Copyright 2010 Google Inc. All Rights Reserved.\n+\n+package com.google.gson.webservice.definition;\n+\n+import junit.framework.TestCase;\n+\n+/**\n+ * Unit tests for {@link TypedKey}\n+ *\n+ * @author inder\n+ */\n+public class TypedKeyTest extends TestCase {\n+\n+  public void testEqualsForSameName() {\n+    assertEquals(new TypedKey<String>(\"name\", String.class),\n+        new TypedKey<String>(new String(\"name\"), String.class));\n+  }\n+\n+  public void testEqualsFailsForDifferentClasses() {\n+    assertFalse(new TypedKey<Object>(\"name\", Object.class).equals(\n+        new TypedKey<String>(\"name\", String.class)));\n+  }\n+}", "timestamp": 1278972818, "metainfo": ""}