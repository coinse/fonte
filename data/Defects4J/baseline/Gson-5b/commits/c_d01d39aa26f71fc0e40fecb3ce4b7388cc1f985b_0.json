{"sha": "d01d39aa26f71fc0e40fecb3ce4b7388cc1f985b", "log": "Use locals instead of fields when figuring out the buffer's offset line and column. This saves about 2% when parsing twitter data.", "commit": "\n--- a/gson/src/main/java/com/google/gson/stream/JsonReader.java\n+++ b/gson/src/main/java/com/google/gson/stream/JsonReader.java\n    * false.\n    */\n   private boolean fillBuffer(int minimum) throws IOException {\n+    char[] buffer = this.buffer;\n+\n     // Before clobbering the old characters, update where buffer starts\n-    for (int i = 0; i < pos; i++) {\n+    // Using locals here saves ~2%.\n+    int line = bufferStartLine;\n+    int column = bufferStartColumn;\n+    for (int i = 0, p = pos; i < p; i++) {\n       if (buffer[i] == '\\n') {\n-        bufferStartLine++;\n-        bufferStartColumn = 1;\n+        line++;\n+        column = 1;\n       } else {\n-        bufferStartColumn++;\n-      }\n-    }\n+        column++;\n+      }\n+    }\n+    bufferStartLine = line;\n+    bufferStartColumn = column;\n \n     if (limit != pos) {\n       limit -= pos;", "timestamp": 1323841798, "metainfo": ""}