{"sha": "a0afec71fff2e36827e83351bded4b4aae281b87", "log": "Test case to demonstrate no such crash as reported in issue 408.", "commit": "\n--- a/gson/src/test/java/com/google/gson/functional/MapTest.java\n+++ b/gson/src/test/java/com/google/gson/functional/MapTest.java\n     } catch (JsonSyntaxException expected) {\n     }\n   }\n-\n+  \n+  public void testSerializeMapOfMaps() {\n+    Type type = new TypeToken<Map<String, Map<String, String>>>() {}.getType();\n+    Map<String, Map<String, String>> map = newMap(\n+        \"a\", newMap(\"ka1\", \"va1\", \"ka2\", \"va2\"),\n+        \"b\", newMap(\"kb1\", \"vb1\", \"kb2\", \"vb2\"));\n+    assertEquals(\"{'a':{'ka1':'va1','ka2':'va2'},'b':{'kb1':'vb1','kb2':'vb2'}}\",\n+        gson.toJson(map, type).replace('\"', '\\''));\n+  }\n+  \n+  public void testDeerializeMapOfMaps() {\n+    Type type = new TypeToken<Map<String, Map<String, String>>>() {}.getType();\n+    Map<String, Map<String, String>> map = newMap(\n+        \"a\", newMap(\"ka1\", \"va1\", \"ka2\", \"va2\"),\n+        \"b\", newMap(\"kb1\", \"vb1\", \"kb2\", \"vb2\"));\n+    String json = \"{'a':{'ka1':'va1','ka2':'va2'},'b':{'kb1':'vb1','kb2':'vb2'}}\";\n+    assertEquals(map, gson.fromJson(json, type));\n+  }\n+  \n+  private <K, V> Map<K, V> newMap(K key1, V value1, K key2, V value2) {\n+    Map<K, V> result = new LinkedHashMap<K, V>();\n+    result.put(key1, value1);\n+    result.put(key2, value2);\n+    return result;\n+  }\n+    \n   public void testMapNamePromotionWithJsonElementReader() {\n     String json = \"{'2.3':'a'}\";\n     Map<Double, String> map = new LinkedHashMap<Double, String>();", "timestamp": 1328984394, "metainfo": ""}