{"sha": "1030e6182d2fde38d4d307af8e21791ad9b91429", "log": "Correctly handle content (ignore it) after frameset end. Fixes #162", "commit": "\n--- a/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n+++ b/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n                 return tb.process(t, InBody);\n             } else if (t.isEOF()) {\n                 // nice work chuck\n-            } else if (t.isStartTag() && t.asStartTag().name().equals(\"nofrmes\")) {\n+            } else if (t.isStartTag() && t.asStartTag().name().equals(\"noframes\")) {\n                 return tb.process(t, InHead);\n             } else {\n                 tb.error(this);\n-                tb.transition(InBody);\n-                return tb.process(t);\n+                return false;\n             }\n             return true;\n         }\n--- a/src/test/java/org/jsoup/parser/HtmlParserTest.java\n+++ b/src/test/java/org/jsoup/parser/HtmlParserTest.java\n         assertEquals(\"<html><head><script></script><noscript></noscript></head><frameset><frame src=\\\"foo\\\" /><frame src=\\\"foo\\\" /></frameset></html>\",\n                 TextUtil.stripNewlines(doc.html()));\n         // no body auto vivification\n+    }\n+    \n+    @Test public void ignoresContentAfterFrameset() {\n+        String h = \"<html><head><title>One</title></head><frameset><frame /><frame /></frameset><table></table></html>\";\n+        Document doc = Jsoup.parse(h);\n+        assertEquals(\"<html><head><title>One</title></head><frameset><frame /><frame /></frameset></html>\", TextUtil.stripNewlines(doc.html()));\n+        // no body, no table. No crash!\n     }\n \n     @Test public void handlesJavadocFont() {", "timestamp": 1332739460, "metainfo": ""}