{"sha": "f5ddda0a3ed0c0a8adf4e74dcb230bb609a2717f", "log": "Tag namespaces cause cssSelector() to fail (#677)", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n         if (id().length() > 0)\n             return \"#\" + id();\n \n-        StringBuilder selector = new StringBuilder(tagName());\n+        // Translate HTML namespace ns:tag to CSS namespace syntax ns|tag\n+        String tagName = tagName().replace(':', '|');\n+        StringBuilder selector = new StringBuilder(tagName);\n         String classes = StringUtil.join(classNames(), \".\");\n         if (classes.length() > 0)\n             selector.append('.').append(classes);\n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n         root.appendChild(new Element(Tag.valueOf(\"a\"), \"\"));\n         assertTrue(set.contains(root));\n     }\n+\n+    @Test\n+    public void testNamespacedElements() {\n+        // Namespaces with ns:tag in HTML must be translated to ns|tag in CSS.\n+        String html = \"<html><body><fb:comments /></body></html>\";\n+        Document doc = Jsoup.parse(html, \"http://example.com/bar/\");\n+        Elements els = doc.select(\"fb|comments\");\n+        assertEquals(1, els.size());\n+        assertEquals(\"html > body > fb|comments\", els.get(0).cssSelector());\n+    }\n }", "timestamp": 1461034746, "metainfo": ""}