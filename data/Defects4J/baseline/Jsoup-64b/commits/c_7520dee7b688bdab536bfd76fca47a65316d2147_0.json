{"sha": "7520dee7b688bdab536bfd76fca47a65316d2147", "log": "Changed DT & DD tags to block-mode tags, to follow practise over spec.", "commit": "\n--- a/src/main/java/org/jsoup/parser/Tag.java\n+++ b/src/main/java/org/jsoup/parser/Tag.java\n         }\n         \n         // dt and dd (in dl)\n-        if (this.tagName.equals(\"dt\") && child.tagName.equals(\"dd\"))\n-            return false;\n-        if (this.tagName.equals(\"dd\") && child.tagName.equals(\"dt\"))\n+        if (this.tagName.equals(\"dt\") && (child.tagName.equals(\"dd\") || child.tagName.equals(\"dl\")))\n+            return false;\n+        if (this.tagName.equals(\"dd\") && (child.tagName.equals(\"dt\") || child.tagName.equals(\"dl\")))\n             return false;\n \n         // don't allow children to contain their parent (directly)\n \n \n         // formctrl\n-        createBlock(\"FORM\").setOptionalClosing(); // can't contian self\n+        createBlock(\"FORM\").setOptionalClosing(); // can't contain self\n         createInline(\"INPUT\").setAncestor(\"FORM\").setEmpty();\n         createInline(\"SELECT\").setAncestor(\"FORM\"); // just contain optgroup or option\n         createInline(\"TEXTAREA\").setAncestor(\"FORM\").setContainDataOnly();\n         createBlock(\"INS\"); // only within body\n         createBlock(\"DEL\"); // only within body\n \n-        createBlock(\"DL\");\n-        createInline(\"DT\").setParent(\"DL\").setOptionalClosing(); // only within DL.\n-        createInline(\"DD\").setParent(\"DL\").setOptionalClosing(); // only within DL.\n+        // definition lists. per spec, dt and dd are inline and must directly descend from dl. However in practise\n+        // these are all used as blocks and dl need only be an ancestor\n+        createBlock(\"DL\").setOptionalClosing(); // can't nest\n+        createBlock(\"DT\").setAncestor(\"DL\").setOptionalClosing(); // only within DL.\n+        createBlock(\"DD\").setAncestor(\"DL\").setOptionalClosing(); // only within DL.\n \n         createBlock(\"LI\").setAncestor(\"UL\", \"OL\").setOptionalClosing(); // only within OL or UL.\n \n--- a/src/test/java/org/jsoup/parser/ParserTest.java\n+++ b/src/test/java/org/jsoup/parser/ParserTest.java\n         assertEquals(\"Zug\", dts.get(1).nextElementSibling().text());\n     }\n \n+    @Test public void handlesBlocksInDefinitions() {\n+        // per the spec, dt and dd are inline, but in practise are block\n+        String h = \"<dl><dt><div id=1>Term</div></dt><dd><div id=2>Def</div></dd></dl>\";\n+        Document doc = Jsoup.parse(h);\n+        assertEquals(\"dt\", doc.select(\"#1\").first().parent().tagName());\n+        assertEquals(\"dd\", doc.select(\"#2\").first().parent().tagName());\n+        assertEquals(\"<dl><dt><div id=\\\"1\\\">Term</div></dt><dd><div id=\\\"2\\\">Def</div></dd></dl>\", TextUtil.stripNewlines(doc.body().html()));\n+    }\n+\n     @Test public void handlesFrames() {\n         String h = \"<html><head><script></script><noscript></noscript></head><frameset><frame src=foo></frame><frame src=foo></frameset></html>\";\n         Document doc = Jsoup.parse(h);", "timestamp": 1309605115, "metainfo": ""}