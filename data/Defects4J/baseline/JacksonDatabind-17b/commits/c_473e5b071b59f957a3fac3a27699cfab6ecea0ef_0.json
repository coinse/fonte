{"sha": "473e5b071b59f957a3fac3a27699cfab6ecea0ef", "log": "Merge branch 'master' of github.com:FasterXML/jackson-databind", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/CalendarSerializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/CalendarSerializer.java\n         } else if (_customFormat != null) {\n             // 21-Feb-2011, tatu: not optimal, but better than alternatives:\n             synchronized (_customFormat) {\n-                jgen.writeString(_customFormat.format(value));\n+                // _customformat cannot parse Calendar, so Date should be passed\n+                jgen.writeString(_customFormat.format(value.getTime()));\n             }\n         } else {\n             provider.defaultSerializeDateValue(value.getTime(), jgen);\n--- a/src/test/java/com/fasterxml/jackson/databind/ser/TestDateSerialization.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/ser/TestDateSerialization.java\n         @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=\"yyyy-MM-dd,HH:00\", timezone=\"CET\")\n         public Date date;\n         public DateInCETBean(long l) { date = new java.util.Date(l); }\n+    }\n+\n+    static class CalendarAsStringBean {\n+        @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=\"yyyy-MM-dd\")\n+        public Calendar value;\n+        public CalendarAsStringBean(long l) {\n+            value = new GregorianCalendar();\n+            value.setTimeInMillis(l);\n+        }\n     }\n     \n     /*\n         // and with different DateFormat; CET is one hour ahead of GMT\n         json = mapper.writeValueAsString(new DateInCETBean(0L));\n         assertEquals(\"{\\\"date\\\":\\\"1970-01-01,01:00\\\"}\", json);\n+        \n+        // and for [Issue#423] as well:\n+        json = mapper.writer().with(getUTCTimeZone()).writeValueAsString(new CalendarAsStringBean(0L));\n+        assertEquals(\"{\\\"value\\\":\\\"1970-01-01\\\"}\", json);\n     }\n \n     /**", "timestamp": 1394830365, "metainfo": ""}