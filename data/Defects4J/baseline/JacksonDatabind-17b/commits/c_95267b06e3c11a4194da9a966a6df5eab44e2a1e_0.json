{"sha": "95267b06e3c11a4194da9a966a6df5eab44e2a1e", "log": "Minor fix to type handling", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/NumberSerializers.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/NumberSerializers.java\n import com.fasterxml.jackson.databind.annotation.JacksonStdImpl;\n import com.fasterxml.jackson.databind.jsonFormatVisitors.JsonFormatVisitorWrapper;\n import com.fasterxml.jackson.databind.jsonFormatVisitors.JsonIntegerFormatVisitor;\n+import com.fasterxml.jackson.databind.jsonFormatVisitors.JsonNumberFormatVisitor;\n import com.fasterxml.jackson.databind.jsontype.TypeSerializer;\n import com.fasterxml.jackson.databind.ser.ContextualSerializer;\n \n     {\n         protected final JsonParser.NumberType _numberType;\n         protected final String _schemaType;\n+        protected final boolean _isInt;\n \n         protected Base(Class<T> cls, JsonParser.NumberType numberType, String schemaType) {\n             super(cls);\n             _numberType = numberType;\n             _schemaType = schemaType;\n+            _isInt = (numberType == JsonParser.NumberType.INT)\n+                    || (numberType == JsonParser.NumberType.LONG)\n+                    || (numberType == JsonParser.NumberType.BIG_INTEGER)\n+                    ;\n         }\n \n         @Override\n         @Override\n         public void acceptJsonFormatVisitor(JsonFormatVisitorWrapper visitor, JavaType typeHint) throws JsonMappingException\n         {\n-            JsonIntegerFormatVisitor v2 = visitor.expectIntegerFormat(typeHint);\n-            if (v2 != null) {\n-                v2.numberType(_numberType);\n+            if (_isInt) {\n+                JsonIntegerFormatVisitor v2 = visitor.expectIntegerFormat(typeHint);\n+                if (v2 != null) {\n+                    v2.numberType(_numberType);\n+                }\n+            } else {\n+                JsonNumberFormatVisitor v2 = visitor.expectNumberFormat(typeHint);\n+                if (v2 != null) {\n+                    v2.numberType(_numberType);\n+                }\n             }\n         }\n ", "timestamp": 1415403382, "metainfo": ""}