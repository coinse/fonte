{"sha": "e602790de2c22593576fd1ec88202e8e820a7a4e", "log": "tests for custom null deser with collections unit tests showing custom null deserialization of values in arrays and maps", "commit": "\n--- a/src/test/java/com/fasterxml/jackson/databind/deser/TestNullHandling.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/deser/TestNullHandling.java\n package com.fasterxml.jackson.databind.deser;\n \n import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.List;\n+import java.util.Map;\n \n \n import com.fasterxml.jackson.core.*;\n+import com.fasterxml.jackson.core.type.TypeReference;\n import com.fasterxml.jackson.databind.*;\n import com.fasterxml.jackson.databind.module.SimpleModule;\n \n         assertNotNull(str);\n         assertEquals(\"funny\", str);\n     }\n+\n+    // Test for [jackson-databind-407]\n+    public void testListOfNulls() throws Exception\n+    {\n+        ObjectMapper mapper = new ObjectMapper();\n+        SimpleModule module = new SimpleModule(\"test\", Version.unknownVersion());\n+        module.addDeserializer(String.class, new FunnyNullDeserializer());\n+        mapper.registerModule(module);\n+\n+        List<String> list = Arrays.asList(\"funny\");\n+        JavaType type = mapper.getTypeFactory().constructCollectionType(List.class, String.class);\n+\n+        // should get non-default null directly:\n+        List deser = mapper.readValue(\"[null]\", type);\n+        assertNotNull(deser);\n+        assertEquals(1, deser.size());\n+        assertEquals(list.get(0), deser.get(0));\n+\n+        // as well as via ObjectReader\n+        ObjectReader reader = mapper.reader(type);\n+        deser = reader.readValue(\"[null]\");\n+        assertNotNull(deser);\n+        assertEquals(1, deser.size());\n+        assertEquals(list.get(0), deser.get(0));\n+    }\n+\n+    // Test for [jackson-databind-407]\n+    public void testMapOfNulls() throws Exception\n+    {\n+        ObjectMapper mapper = new ObjectMapper();\n+        SimpleModule module = new SimpleModule(\"test\", Version.unknownVersion());\n+        module.addDeserializer(String.class, new FunnyNullDeserializer());\n+        mapper.registerModule(module);\n+\n+        JavaType type = mapper.getTypeFactory().constructMapType(Map.class, String.class, String.class);\n+        // should get non-default null directly:\n+        Map deser = mapper.readValue(\"{\\\"key\\\":null}\", type);\n+        assertNotNull(deser);\n+        assertEquals(1, deser.size());\n+        assertEquals(\"funny\", deser.get(\"key\"));\n+\n+        // as well as via ObjectReader\n+        ObjectReader reader = mapper.reader(type);\n+        deser = mapper.readValue(\"{\\\"key\\\":null}\", type);\n+        assertNotNull(deser);\n+        assertEquals(1, deser.size());\n+        assertEquals(\"funny\", deser.get(\"key\"));\n+    }\n }", "timestamp": 1392420232, "metainfo": ""}