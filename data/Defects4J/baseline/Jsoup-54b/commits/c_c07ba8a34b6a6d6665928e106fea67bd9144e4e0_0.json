{"sha": "c07ba8a34b6a6d6665928e106fea67bd9144e4e0", "log": "If pretty-print is disabled, don't trim outer whitespace in Element.html()  Fixes #368", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n      */\n     public String html() {\n         StringBuilder accum = new StringBuilder();\n-        html(accum); \n-        return accum.toString().trim();\n+        html(accum);\n+        return getOutputSettings().prettyPrint() ? accum.toString().trim() : accum.toString();\n     }\n \n     private void html(StringBuilder accum) {\n--- a/src/main/java/org/jsoup/nodes/Node.java\n+++ b/src/main/java/org/jsoup/nodes/Node.java\n     }\n \n     // if this node has no document (or parent), retrieve the default output settings\n-    private Document.OutputSettings getOutputSettings() {\n+    Document.OutputSettings getOutputSettings() {\n         return ownerDocument() != null ? ownerDocument().outputSettings() : (new Document(\"\")).outputSettings();\n     }\n \n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n     }\n \n     @Test public void testInnerHtml() {\n-        Document doc = Jsoup.parse(\"<div><p>Hello</p></div>\");\n+        Document doc = Jsoup.parse(\"<div>\\n <p>Hello</p> </div>\");\n         assertEquals(\"<p>Hello</p>\", doc.getElementsByTag(\"div\").get(0).html());\n     }\n \n     }\n \n     @Test public void testNotPretty() {\n-        Document doc = Jsoup.parse(\"<div>   \\n<p>Hello\\n there</p></div>\");\n+        Document doc = Jsoup.parse(\"<div>   \\n<p>Hello\\n there\\n</p></div>\");\n         doc.outputSettings().prettyPrint(false);\n-        assertEquals(\"<html><head></head><body><div>   \\n<p>Hello\\n there</p></div></body></html>\", doc.html());\n+        assertEquals(\"<html><head></head><body><div>   \\n<p>Hello\\n there\\n</p></div></body></html>\", doc.html());\n+\n+        Element div = doc.select(\"div\").first();\n+        assertEquals(\"   \\n<p>Hello\\n there\\n</p>\", div.html());\n     }\n     \n     @Test public void testEmptyElementFormatHtml() {", "timestamp": 1384649323, "metainfo": ""}