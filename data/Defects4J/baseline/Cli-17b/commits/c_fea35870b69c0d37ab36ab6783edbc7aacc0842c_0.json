{"sha": "fea35870b69c0d37ab36ab6783edbc7aacc0842c", "log": "Adding comma delimited whitespace to the exception message that lists missing required options as requested in CLI-149. I didn't add the requested -, as it could be -- or some other prefix. Unit tests also added.   ", "commit": "\n--- a/src/java/org/apache/commons/cli/Parser.java\n+++ b/src/java/org/apache/commons/cli/Parser.java\n             while (iter.hasNext())\n             {\n                 buff.append(iter.next());\n-            }\n-\n-            throw new MissingOptionException(buff.toString());\n+                buff.append(\", \");\n+            }\n+\n+            throw new MissingOptionException(buff.substring(0, buff.length() - 2));\n         }\n     }\n \n--- a/src/test/org/apache/commons/cli/OptionsTest.java\n+++ b/src/test/org/apache/commons/cli/OptionsTest.java\n             new PosixParser().parse(options, new String[0]);\n             fail(\"Expected MissingOptionException to be thrown\");\n         } catch (MissingOptionException e) {\n-            assertEquals(\"Missing required options: fx\", e.getMessage());\n+            assertEquals(\"Missing required options: f, x\", e.getMessage());\n         }\n     }\n \n--- a/src/test/org/apache/commons/cli/ParseRequiredTest.java\n+++ b/src/test/org/apache/commons/cli/ParseRequiredTest.java\n             CommandLine cl = parser.parse(_options,args);\n             fail( \"exception should have been thrown\" );\n         }\n+        catch (MissingOptionException e)\n+        {\n+            assertEquals( \"Incorrect exception message\", \"Missing required option: b\", e.getMessage() );\n+        }\n         catch (ParseException e)\n         {\n-            if( !( e instanceof MissingOptionException ) )\n-            {\n-                fail( \"expected to catch MissingOptionException\" );\n-            }\n+            fail( \"expected to catch MissingOptionException\" );\n+        }\n+    }\n+\n+    public void testMissingRequiredOptions()\n+    {\n+        String[] args = new String[] { \"-a\" };\n+\n+        _options.addOption( OptionBuilder.withLongOpt( \"cfile\" )\n+                                     .hasArg()\n+                                     .isRequired()\n+                                     .withDescription( \"set the value of [c]\" )\n+                                     .create( 'c' ) );\n+\n+        try\n+        {\n+            CommandLine cl = parser.parse(_options,args);\n+            fail( \"exception should have been thrown\" );\n+        }\n+        catch (MissingOptionException e)\n+        {\n+            assertEquals( \"Incorrect exception message\", \"Missing required options: b, c\", e.getMessage() );\n+        }\n+        catch (ParseException e)\n+        {\n+            fail( \"expected to catch MissingOptionException\" );\n         }\n     }\n ", "timestamp": 1210229796, "metainfo": ""}