{"sha": "4a0e5a59e690f53f4fbeb16ef80ba5afe66bb744", "log": "Changed Elements#attr(key) to scan all elements for attribute.  Closes #4.", "commit": "\n--- a/src/main/java/org/jsoup/select/Elements.java\n+++ b/src/main/java/org/jsoup/select/Elements.java\n     \n     // attribute methods\n     /**\n-     Get the attribute value of the first matched element.\n+     Get an attribute value from the first matched element that has the attribute.\n      @param attributeKey The attribute key.\n-     @return The attribute value from the first matched element. If no elements were matched (isEmpty() == true),\n-     or if the first element does not have the attribute, returns empty string.\n+     @return The attribute value from the first matched element that has the attribute.. If no elements were matched (isEmpty() == true),\n+     or if the no elements have the attribute, returns empty string.\n      @see #hasAttr(String)\n      */\n     public String attr(String attributeKey) {\n-        return !contents.isEmpty() ? first().attr(attributeKey) : \"\";\n+        for (Element element : contents) {\n+            if (element.hasAttr(attributeKey))\n+                return element.attr(attributeKey);\n+        }\n+        return \"\";\n     }\n \n     /**\n--- a/src/test/java/org/jsoup/select/ElementsTest.java\n+++ b/src/test/java/org/jsoup/select/ElementsTest.java\n         assertEquals(4, ps.size());\n         assertEquals(\"classy\", ps.last().attr(\"style\"));\n         assertEquals(\"bar\", ps.last().attr(\"class\"));\n+    }\n+    \n+    @Test public void hasAttr() {\n+        Document doc = Jsoup.parse(\"<p title=foo><p title=bar><p class=foo><p class=bar>\");\n+        Elements ps = doc.select(\"p\");\n+        assertTrue(ps.hasAttr(\"class\"));\n+        assertFalse(ps.hasAttr(\"style\"));\n+    }\n+    \n+    @Test public void attr() {\n+        Document doc = Jsoup.parse(\"<p title=foo><p title=bar><p class=foo><p class=bar>\");\n+        String classVal = doc.select(\"p\").attr(\"class\");\n+        assertEquals(\"foo\", classVal);\n     }\n \n     @Test public void classes() {", "timestamp": 1309605111, "metainfo": ""}