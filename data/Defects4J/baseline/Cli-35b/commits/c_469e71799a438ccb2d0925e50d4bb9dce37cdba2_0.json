{"sha": "469e71799a438ccb2d0925e50d4bb9dce37cdba2", "log": "bug no 11458: added test   ", "commit": "\n--- a/src/test/org/apache/commons/cli/BugsTest.java\n+++ b/src/test/org/apache/commons/cli/BugsTest.java\n  * version 1.1, a copy of which has been included with this distribution in\n  * the LICENSE file.\n  * \n- * $Id: BugsTest.java,v 1.2 2002/08/15 22:05:19 jkeyes Exp $\n+ * $Id: BugsTest.java,v 1.3 2002/08/18 15:52:23 jkeyes Exp $\n  */\n \n package org.apache.commons.cli;\n \n     public void tearDown()\n     {\n+    }\n+\n+    public void test11458()\n+    {\n+        Options options = new Options();\n+        options.addOption( OptionBuilder.withValueSeparator( '=' )\n+                           .hasArgs()\n+                           .create( 'D' ) );\n+        options.addOption( OptionBuilder.withValueSeparator( ':' )\n+                           .hasArgs()\n+                           .create( 'p' ) );\n+        String[] args = new String[] { \"-DJAVA_HOME=/opt/java\" ,\n+        \"-pfile1:file2:file3\" };\n+\n+        CommandLineParser parser = CommandLineParserFactory.newParser();\n+\n+        try {\n+            CommandLine cmd = parser.parse( options, args );\n+\n+            String[] values = cmd.getOptionValues( 'D' );\n+\n+            assertEquals( values[0], \"JAVA_HOME\" );\n+            assertEquals( values[1], \"/opt/java\" );\n+\n+            values = cmd.getOptionValues( 'p' );\n+\n+            assertEquals( values[0], \"file1\" );\n+            assertEquals( values[1], \"file2\" );\n+            assertEquals( values[2], \"file3\" );\n+\n+            java.util.Iterator iter = cmd.iterator();\n+            while( iter.hasNext() ) {\n+                Option opt = (Option)iter.next();\n+                switch( opt.getId() ) {\n+                    case 'D':\n+                        assertEquals( opt.getValue( 0 ), \"JAVA_HOME\" );\n+                        assertEquals( opt.getValue( 1 ), \"/opt/java\" );\n+                        break;\n+                    case 'p':\n+                        assertEquals( opt.getValue( 0 ), \"file1\" );\n+                        assertEquals( opt.getValue( 1 ), \"file2\" );\n+                        assertEquals( opt.getValue( 2 ), \"file3\" );\n+                        break;\n+                    default:\n+                        fail( \"-D option not found\" );\n+                }\n+            }\n+        }\n+        catch( ParseException exp ) {\n+            fail( \"Unexpected Exception:\\nMessage:\" + exp.getMessage() \n+                  + \"Type: \" + exp.getClass().getName() );\n+        }\n     }\n \n     public void test11680()", "timestamp": 1029685943, "metainfo": ""}