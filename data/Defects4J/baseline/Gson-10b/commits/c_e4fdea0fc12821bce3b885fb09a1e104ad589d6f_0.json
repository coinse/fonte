{"sha": "e4fdea0fc12821bce3b885fb09a1e104ad589d6f", "log": "Updated Gson escaper to not escape unicode characters. This is in response to Issue 80.", "commit": "\n--- a/gson/src/main/java/com/google/gson/Escaper.java\n+++ b/gson/src/main/java/com/google/gson/Escaper.java\n        int codePoint = Character.codePointAt(plainText, i);\n        charCount = Character.charCount(codePoint);\n \n-         if (!((codePoint < 0x20 || codePoint >= 0x7f)\n+         if (!(isControlCharacter(codePoint)\n                || mustEscapeCharInJsString(codePoint))) {\n             continue;\n          }\n            case '\\\\':\n              out.append(\"\\\\\\\\\");\n              break;\n+           case '/':\n+             out.append(\"\\\\/\");\n+             break;\n            case '\"':\n              out.append('\\\\').append((char) codePoint);\n              break;\n          }\n      }\n      out.append(plainText, pos, len);\n+  }\n+\n+  private static boolean isControlCharacter(int codePoint) {\n+    return codePoint < 0x20 \n+        || codePoint == 0x7f \n+        || (codePoint >= 0x80 && codePoint <= 0x9f);\n   }\n \n   private static void appendHexJavaScriptRepresentation(int codePoint, Appendable out)\n--- a/gson/src/test/java/com/google/gson/functional/InternationalizationTest.java\n+++ b/gson/src/test/java/com/google/gson/functional/InternationalizationTest.java\n   public void testStringsWithUnicodeChineseCharactersSerialization() throws Exception {\n     String target = \"\\u597d\\u597d\\u597d\";\n     String json = gson.toJson(target);\n-    String expected = \"\\\"\\\\u597d\\\\u597d\\\\u597d\\\"\";\n+    String expected = \"\\\"\\u597d\\u597d\\u597d\\\"\";\n     assertEquals(expected, json);\n   }\n ", "timestamp": 1229719313, "metainfo": ""}