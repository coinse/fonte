{"sha": "ddde79c861cd2a3f62c33650698942cac1bb961c", "log": "Added a deepCopy() method in GsonBuilder. This allows a web-service to create a pre-configured GsonBuilder and then for each request, create a Gson instance by adding type adapters to a copy. In TypeAdapter.Factory.create() method, using the term gson to refer to the Gson instance instead of a little ambiguous context.", "commit": "\n--- a/gson/src/main/java/com/google/gson/GsonBuilder.java\n+++ b/gson/src/main/java/com/google/gson/GsonBuilder.java\n \n package com.google.gson;\n \n-import com.google.gson.internal.$Gson$Preconditions;\n-import com.google.gson.internal.Excluder;\n-import com.google.gson.internal.Primitives;\n-import com.google.gson.internal.bind.TypeAdapters;\n-import com.google.gson.reflect.TypeToken;\n import java.lang.reflect.Type;\n import java.sql.Timestamp;\n import java.text.DateFormat;\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n+\n+import com.google.gson.internal.$Gson$Preconditions;\n+import com.google.gson.internal.Excluder;\n+import com.google.gson.internal.Primitives;\n+import com.google.gson.internal.bind.TypeAdapters;\n+import com.google.gson.reflect.TypeToken;\n \n /**\n  * <p>Use this builder to construct a {@link Gson} instance when you need to set configuration\n   }\n \n   /**\n+   * Creates a deep copy of this instance: The collections for factories are deep copied, but the\n+   * factories and type adapters themselves are not.\n+   *\n+   * @since 2.1\n+   */\n+  public GsonBuilder deepCopy() {\n+    GsonBuilder copy = new GsonBuilder();\n+    copy.excluder = excluder;\n+    copy.longSerializationPolicy = longSerializationPolicy;\n+    copy.fieldNamingPolicy = fieldNamingPolicy;\n+    copy.instanceCreators.putAll(instanceCreators);\n+    copy.factories.addAll(factories);\n+    copy.hierarchyFactories.addAll(hierarchyFactories);\n+    copy.serializeNulls = serializeNulls;\n+    copy.datePattern = datePattern;\n+    copy.dateStyle = dateStyle;\n+    copy.timeStyle = timeStyle;\n+    copy.complexMapKeySerialization = complexMapKeySerialization;\n+    copy.serializeSpecialFloatingPointValues = serializeSpecialFloatingPointValues;\n+    copy.escapeHtmlChars = escapeHtmlChars;\n+    copy.prettyPrinting = prettyPrinting;\n+    copy.generateNonExecutableJson = generateNonExecutableJson;\n+    return copy;\n+  }\n+\n+  /**\n    * Configures Gson to enable versioning support.\n    *\n    * @param ignoreVersionsAfter any field or type marked with a version higher than this value\n--- a/gson/src/main/java/com/google/gson/TypeAdapter.java\n+++ b/gson/src/main/java/com/google/gson/TypeAdapter.java\n   }\n \n   public interface Factory {\n-    <T> TypeAdapter<T> create(Gson context, TypeToken<T> type);\n+    <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type);\n   }\n }", "timestamp": 1322199617, "metainfo": ""}