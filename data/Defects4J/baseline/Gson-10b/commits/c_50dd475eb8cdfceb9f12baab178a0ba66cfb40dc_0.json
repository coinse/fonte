{"sha": "50dd475eb8cdfceb9f12baab178a0ba66cfb40dc", "log": "Added more tests involving Since and Until versioning.", "commit": "\n--- a/gson/src/test/java/com/google/gson/functional/VersioningTest.java\n+++ b/gson/src/test/java/com/google/gson/functional/VersioningTest.java\n     gson = builder.setVersion(1.3).create();\n     json = gson.toJson(target);\n     assertFalse(json.contains(\"\\\"a\\\":\" + A));\n+  }\n+  \n+  public void testVersionedUntilDeserialization() {\n+    Gson gson = builder.setVersion(1.3).create();\n+    String json = \"{\\\"a\\\":3,\\\"b\\\":4,\\\"c\\\":5}\";\n+    Version1 version1 = gson.fromJson(json, Version1.class);\n+    assertEquals(A, version1.a);\n   }\n \n   public void testVersionedClassesSerialization() {\n     assertEquals(expected, actual);\n   }\n \n+  public void testVersionedGsonMixingSinceAndUntilSerialization() {\n+    Gson gson = builder.setVersion(1.0).create();\n+    SinceUntilMixing target = new SinceUntilMixing();\n+    String json = gson.toJson(target);\n+    assertFalse(json.contains(\"\\\"b\\\":\" + B));\n+    \n+    gson = builder.setVersion(1.2).create();\n+    json = gson.toJson(target);\n+    assertTrue(json.contains(\"\\\"b\\\":\" + B));\n+    \n+    gson = builder.setVersion(1.3).create();\n+    json = gson.toJson(target);\n+    assertFalse(json.contains(\"\\\"b\\\":\" + B));\n+  }\n+\n+  public void testVersionedGsonMixingSinceAndUntilDeserialization() {\n+    String json = \"{\\\"a\\\":5,\\\"b\\\":6}\";\n+    Gson gson = builder.setVersion(1.0).create();\n+    SinceUntilMixing result = gson.fromJson(json, SinceUntilMixing.class);\n+    assertEquals(5, result.a);\n+    assertEquals(B, result.b);\n+    \n+    gson = builder.setVersion(1.2).create();\n+    result = gson.fromJson(json, SinceUntilMixing.class);\n+    assertEquals(5, result.a);\n+    assertEquals(6, result.b);\n+    \n+    gson = builder.setVersion(1.3).create();\n+    result = gson.fromJson(json, SinceUntilMixing.class);\n+    assertEquals(5, result.a);\n+    assertEquals(B, result.b);\n+  }\n+\n   private static class Version1 {\n     @Until(1.3) int a = A;\n     @Since(1.0) int b = B;\n   private static class Version1_2 extends Version1_1 {\n     int d = D;\n   }\n+  \n+  private static class SinceUntilMixing {\n+    int a = A;\n+    \n+    @Since(1.1)\n+    @Until(1.3)\n+    int b = B;\n+  }\n }", "timestamp": 1228091015, "metainfo": ""}