{"sha": "4d873d5dd7fc33487eaa6cf5edf24e31cd1204f7", "log": "replaced the use of RestServerConfig with ServerConfig. Added an example query QueryOrdersByName and its use in a client.", "commit": "\n--- a/wsclient/src/main/java/com/google/gson/rest/client/RestClientStub.java\n+++ b/wsclient/src/main/java/com/google/gson/rest/client/RestClientStub.java\n import com.google.gson.rest.definition.RestRequest;\n import com.google.gson.rest.definition.RestResource;\n import com.google.gson.rest.definition.RestResponse;\n+import com.google.gson.webservice.client.ServerConfig;\n import com.google.gson.webservice.definition.WebServiceSystemException;\n \n import java.io.IOException;\n  * @author inder\n  */\n public class RestClientStub {\n-  private final RestServerConfig config;\n+  private final ServerConfig config;\n   private final Logger logger;\n   private final Level logLevel;\n \n-  public RestClientStub(RestServerConfig serverConfig) {\n+  public RestClientStub(ServerConfig serverConfig) {\n     this(serverConfig, null);\n   }\n \n-  public RestClientStub(RestServerConfig serverConfig, Level logLevel) {\n+  public RestClientStub(ServerConfig serverConfig, Level logLevel) {\n     this.config = serverConfig;\n     this.logger = logLevel == null ? null : Logger.getLogger(RestClientStub.class.getName());\n     this.logLevel = logLevel;\n--- a/wsexample/client/src/main/java/com/google/gson/example/rest/client/OrderClient.java\n+++ b/wsexample/client/src/main/java/com/google/gson/example/rest/client/OrderClient.java\n import com.google.gson.example.model.Cart;\n import com.google.gson.example.model.LineItem;\n import com.google.gson.example.model.Order;\n+import com.google.gson.example.model.QueryOrdersByItemName;\n import com.google.gson.rest.client.ResourceDepotClient;\n import com.google.gson.rest.client.RestClientStub;\n-import com.google.gson.rest.client.RestServerConfig;\n import com.google.gson.rest.definition.ValueBasedId;\n+import com.google.gson.rest.query.client.ResourceQueryClient;\n+import com.google.gson.webservice.client.ServerConfig;\n+import com.google.gson.webservice.client.WebServiceClient;\n import com.google.gson.webservice.definition.CallPath;\n \n import java.util.ArrayList;\n import java.util.List;\n-import java.util.logging.Level;\n \n /**\n  * A sample client for the rest resource for {@link Order}\n public class OrderClient {\n   public static final CallPath CALL_PATH = new CallPath(\"/rest/order\");\n   private final ResourceDepotClient<ValueBasedId<Order>, Order> restClient;\n+  private final ResourceQueryClient<\n+      ValueBasedId<Order>, Order, QueryOrdersByItemName> queryClient;\n   public OrderClient() {\n-    RestServerConfig serverConfig = new RestServerConfig(\"http://localhost\");\n-    RestClientStub stub = new RestClientStub(serverConfig, Level.INFO);\n+    ServerConfig serverConfig = new ServerConfig(\"http://localhost\");\n+    Gson gson = new Gson();\n+\n     restClient = new ResourceDepotClient<ValueBasedId<Order>, Order>(\n-        stub, CALL_PATH, Order.class, new Gson());\n+        new RestClientStub(serverConfig), CALL_PATH, Order.class, new Gson());\n+    ServerConfig wsServerConfig = new ServerConfig(\"http://localhost\");\n+    queryClient = new ResourceQueryClient<ValueBasedId<Order>, Order, QueryOrdersByItemName>(\n+        new WebServiceClient(wsServerConfig), CALL_PATH, gson); \n   }\n \n   public Order placeOrder(Cart cart) {\n     return restClient.post(order);\n   }\n \n+  private List<Order> query(String itemName) {\n+    return queryClient.query(new QueryOrdersByItemName(itemName));\n+  }\n+\n   public static void main(String[] args) {\n     OrderClient client = new OrderClient();\n     List<LineItem> lineItems = new ArrayList<LineItem>();\n-    lineItems.add(new LineItem(\"item1\", 2, 1000000L, \"USD\"));\n+    String itemName = \"item1\";\n+    lineItems.add(new LineItem(itemName, 2, 1000000L, \"USD\"));\n     Cart cart = new Cart(lineItems, \"first last\", \"4111-1111-1111-1111\");\n-    client.placeOrder(cart);\n+    Order order = client.placeOrder(cart);\n+    System.out.println(\"Placed order: \" + order);\n+    List<Order> queriedOrder = client.query(itemName);\n+    System.out.println(\"Queried order by item name ( \" + itemName + \"): \" + order);\n   }\n }\n--- /dev/null\n+++ b/wsexample/definition/src/main/java/com/google/gson/example/model/QueryOrdersByItemName.java\n+/*\n+ * Copyright (C) 2010 Google Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.gson.example.model;\n+\n+/**\n+ * A query for orders by item name\n+ *\n+ * @author Inderjeet Singh\n+ */\n+public class QueryOrdersByItemName {\n+  private final String itemName;\n+\n+  public QueryOrdersByItemName() {\n+    this(null);\n+  }\n+\n+  public QueryOrdersByItemName(String itemName) {\n+    this.itemName = itemName;\n+  }\n+  \n+  public String getItemName() {\n+    return itemName;\n+  }\n+}", "timestamp": 1289434976, "metainfo": ""}