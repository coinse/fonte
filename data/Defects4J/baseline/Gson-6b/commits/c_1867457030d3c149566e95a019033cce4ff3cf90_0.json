{"sha": "1867457030d3c149566e95a019033cce4ff3cf90", "log": "fix #680 - make RuntimeTypeAdapterFactory null-safe", "commit": "\n--- a/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java\n+++ b/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java\n         }\n         Streams.write(clone, out);\n       }\n-    };\n+    }.nullSafe();\n   }\n }\n--- a/extras/src/test/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactoryTest.java\n+++ b/extras/src/test/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactoryTest.java\n     }\n   }\n \n+  public void testSerializeWrappedNullValue() {\n+    TypeAdapterFactory billingAdapter = RuntimeTypeAdapterFactory.of(BillingInstrument.class)\n+        .registerSubtype(CreditCard.class)\n+        .registerSubtype(BankTransfer.class);    \n+    Gson gson = new GsonBuilder()\n+        .registerTypeAdapterFactory(billingAdapter)\n+        .create();    \n+    String serialized = gson.toJson(new BillingInstrumentWrapper(null), BillingInstrumentWrapper.class);\n+    BillingInstrumentWrapper deserialized = gson.fromJson(serialized, BillingInstrumentWrapper.class);\n+    assertNull(deserialized.instrument);\n+  }\n+\n+  static class BillingInstrumentWrapper {\n+    BillingInstrument instrument;\n+    BillingInstrumentWrapper(BillingInstrument instrument) {\n+      this.instrument = instrument;\n+    }\n+  }\n+\n   static class BillingInstrument {\n     private final String ownerName;\n     BillingInstrument(String ownerName) {", "timestamp": 1438817238, "metainfo": ""}