{"sha": "5659f6cff55102c7cb7d6a1f6b575dcf33df4a5b", "log": "\"compile\" is now a static method   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/JXPathContext.java\n+++ b/src/java/org/apache/commons/jxpath/JXPathContext.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/JXPathContext.java,v 1.8 2002/05/08 23:05:05 dmitri Exp $\n- * $Revision: 1.8 $\n- * $Date: 2002/05/08 23:05:05 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/JXPathContext.java,v 1.9 2002/05/08 23:19:31 dmitri Exp $\n+ * $Revision: 1.9 $\n+ * $Date: 2002/05/08 23:19:31 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * Also see <a href=\"http://www.w3.org/TR/xpath\">XML Path Language (XPath) Version 1.0 </a>\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.8 $ $Date: 2002/05/08 23:05:05 $\n+ * @version $Revision: 1.9 $ $Date: 2002/05/08 23:19:31 $\n  */\n public abstract class JXPathContext {\n     protected JXPathContext parentContext;\n     protected Locale locale;\n     protected boolean lenient = false;\n \n+    private static JXPathContext compilationContext;\n+\n     /**\n      * Creates a new JXPathContext with the specified bean as the root node.\n      */\n      * and there is a convenient place to cache CompiledExpression\n      * between invocations.\n      */\n-    public abstract CompiledExpression compile(String xpath);\n+    public static CompiledExpression compile(String xpath){\n+        if (compilationContext == null){\n+            compilationContext = JXPathContext.newContext(null);\n+        }\n+        return compilationContext.compilePath(xpath);\n+    }\n+\n+    /**\n+     * Overridden by each concrete implementation of JXPathContext\n+     * to perform compilation.\n+     */\n+    protected abstract CompiledExpression compilePath(String xpath);\n \n     /**\n      * Evaluates the xpath and returns the resulting object. Primitive\n--- a/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java\n+++ b/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java,v 1.16 2002/05/08 23:05:05 dmitri Exp $\n- * $Revision: 1.16 $\n- * $Date: 2002/05/08 23:05:05 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/JXPathContextReferenceImpl.java,v 1.17 2002/05/08 23:19:31 dmitri Exp $\n+ * $Revision: 1.17 $\n+ * $Date: 2002/05/08 23:19:31 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * The reference implementation of JXPathContext.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.16 $ $Date: 2002/05/08 23:05:05 $\n+ * @version $Revision: 1.17 $ $Date: 2002/05/08 23:19:31 $\n  */\n public class JXPathContextReferenceImpl extends JXPathContext\n {\n         return nodeFactoryArray;\n     }\n \n-    public CompiledExpression compile(String xpath){\n+    protected CompiledExpression compilePath(String xpath){\n         return new JXPathCompiledExpression(xpath, compileExpression(xpath));\n     }\n ", "timestamp": 1020899971, "metainfo": ""}