{"sha": "83b1072703023411900b5eaefe9b8e99bc6b9414", "log": "Add test for CSV-75  ", "commit": "\n--- a/src/test/java/org/apache/commons/csv/ExtendedBufferedReaderTest.java\n+++ b/src/test/java/org/apache/commons/csv/ExtendedBufferedReaderTest.java\n         assertEquals('3', br.readAgain());\n \n         assertEquals('\\n', br.lookAhead());\n-        assertEquals(1, br.getLineNumber());\n+        assertEquals(1, br.getLineNumber()); // will need fixing for CSV-75\n         assertEquals('3', br.readAgain());\n         assertEquals('\\n', br.read());\n-        assertEquals(2, br.getLineNumber());\n+        assertEquals(2, br.getLineNumber()); // will need fixing for CSV-75\n         assertEquals('\\n', br.readAgain());\n-        assertEquals(2, br.getLineNumber());\n+        assertEquals(2, br.getLineNumber()); // will need fixing for CSV-75\n \n         assertEquals(ExtendedBufferedReader.END_OF_STREAM, br.lookAhead());\n         assertEquals('\\n', br.readAgain());\n         assertTrue(br.readLine() == null);\n     }\n \n+    /*\n+     * Test to illustrate  https://issues.apache.org/jira/browse/CSV-75\n+     * \n+     * TODO fix checks when code is fixed\n+     */\n+    @Test\n+    public void testReadChar() throws Exception {\n+        String LF=\"\\n\"; String CR=\"\\r\"; String CRLF=CR+LF; String LFCR=LF+CR;// easier to read the string below\n+        String test=\"a\" + LF + \"b\" + CR + \"c\" + LF + LF + \"d\" + CR + CR + \"e\" + LFCR + \"f \"+ CRLF;\n+        //                EOL        eol        EOL  EOL        eol  eol        EOL+CR        EOL\n+        // EOL = current EOL behaviour with read() methods\n+        // eol = additional behaviour with readLine()\n+        final int EOLct=5;\n+        final int EOLeolct=9;\n+        ExtendedBufferedReader br;\n+        \n+        br = getBufferedReader(test);\n+        assertEquals(0, br.getLineNumber());\n+        while(br.readLine()!=null) {}\n+        assertEquals(EOLeolct, br.getLineNumber());\n+\n+        br = getBufferedReader(test);\n+        assertEquals(0, br.getLineNumber());\n+        while(br.read()!=-1) {}\n+        assertEquals(EOLct, br.getLineNumber()); // will need fixing for CSV-75\n+\n+        br = getBufferedReader(test);\n+        assertEquals(0, br.getLineNumber());\n+        char[] buff = new char[10];\n+        while(br.read(buff ,0, 3)!=-1) {}\n+        assertEquals(EOLct, br.getLineNumber()); // will need fixing for CSV-75\n+    }\n+\n     private ExtendedBufferedReader getBufferedReader(String s) {\n         return new ExtendedBufferedReader(new StringReader(s));\n     }", "timestamp": 1332008235, "metainfo": ""}