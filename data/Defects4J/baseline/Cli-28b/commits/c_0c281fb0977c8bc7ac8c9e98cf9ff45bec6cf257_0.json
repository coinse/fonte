{"sha": "0c281fb0977c8bc7ac8c9e98cf9ff45bec6cf257", "log": "added fix for Rob's problem (2), so it is now possible to query using either the opt or longOpt   ", "commit": "\n--- a/src/java/org/apache/commons/cli/CommandLine.java\n+++ b/src/java/org/apache/commons/cli/CommandLine.java\n     /** the processed options */\n     private Map options = new HashMap();\n \n+    /** the option name map */\n+    private Map names   = new HashMap();\n+\n     /** Map of unique options for ease to get complete list of options */\n     private Map hashcodeMap = new HashMap();\n \n     public String[] getOptionValues( String opt ) {\n         List values = new java.util.ArrayList();\n \n-        if( options.containsKey( opt ) ) {\n-            List opts = (List)options.get( opt );\n+        String key = opt;\n+        if( names.containsKey( opt ) ) {\n+            key = (String)names.get( opt );\n+        }\n+\n+        if( options.containsKey( key ) ) {\n+            List opts = (List)options.get( key );\n             Iterator iter = opts.iterator();\n \n             while( iter.hasNext() ) {\n         if( \" \".equals(key) ) {\n             key = opt.getLongOpt();\n         }\n+        else {\n+            names.put( opt.getLongOpt(), key );\n+        }\n \n         if( options.get( key ) != null ) {\n             ((java.util.List)options.get( key )).add( opt );\n--- a/src/test/org/apache/commons/cli/ParseTest.java\n+++ b/src/test/org/apache/commons/cli/ParseTest.java\n             assertTrue( \"Confirm -a is set\", cl.hasOption(\"a\") );\n             assertTrue( \"Confirm -b is set\", cl.hasOption(\"b\") );\n             assertTrue( \"Confirm arg of -b\", cl.getOptionValue(\"b\").equals(\"toast\") );\n+            assertTrue( \"Confirm arg of --bfile\", cl.getOptionValue( \"bfile\" ).equals( \"toast\" ) );\n             assertTrue( \"Confirm size of extra args\", cl.getArgList().size() == 2);\n         } \n         catch (ParseException e)", "timestamp": 1037316603, "metainfo": ""}