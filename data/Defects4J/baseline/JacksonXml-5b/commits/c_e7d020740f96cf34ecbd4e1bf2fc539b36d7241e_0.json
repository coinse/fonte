{"sha": "e7d020740f96cf34ecbd4e1bf2fc539b36d7241e", "log": "...", "commit": "\n--- /dev/null\n+++ b/src/test/java/com/fasterxml/jackson/xml/TestViews.java\n+package com.fasterxml.jackson.xml;\n+\n+import org.codehaus.jackson.annotate.*;\n+import org.codehaus.jackson.map.*;\n+import org.codehaus.jackson.map.annotate.*;\n+\n+public class TestViews extends XmlTestBase\n+{\n+    /*\n+    /**********************************************************\n+    /* Helper types\n+    /**********************************************************\n+     */\n+\n+    static class RestrictedView { };\n+\n+    static class Foo\n+    {\n+        @JsonView(RestrictedView.class)\n+        @JsonProperty\n+        public String restrictedFooProperty;\n+\n+        @JsonView(RestrictedView.class)\n+        @JsonProperty\n+        public Bar[] bars;\n+    }\n+\n+    static class Bar\n+    {\n+        @JsonView(RestrictedView.class)\n+        @JsonProperty\n+        public int restrictedBarProperty;\n+    }    \n+\n+    /*\n+    /**********************************************************\n+    /* Unit tests\n+    /**********************************************************\n+     */\n+    \n+    public void testIssue7() throws Exception\n+    {\n+        Foo foo = new Foo();\n+        foo.restrictedFooProperty = \"test\";\n+\n+        Bar bar1 = new Bar();\n+        bar1.restrictedBarProperty = 10;\n+\n+        Bar bar2 = new Bar();\n+        bar2.restrictedBarProperty = 11;\n+\n+        foo.bars = new Bar[] { bar1, bar2 };\n+\n+        ObjectMapper xmlMapper = new XmlMapper();\n+\n+        xmlMapper.configure( SerializationConfig.Feature.AUTO_DETECT_FIELDS, false );\n+        xmlMapper.configure( SerializationConfig.Feature.AUTO_DETECT_GETTERS, false );\n+        xmlMapper.configure( SerializationConfig.Feature.AUTO_DETECT_IS_GETTERS, false );\n+        xmlMapper.configure( SerializationConfig.Feature.DEFAULT_VIEW_INCLUSION, false );\n+\n+        String xml = xmlMapper.viewWriter(RestrictedView.class).writeValueAsString(foo);\n+\n+        // views not used for deserialization\n+        Foo result = xmlMapper.readValue(xml, Foo.class);\n+        assertEquals(\"test\", result.restrictedFooProperty);\n+        assertNotNull(result.bars);\n+        assertEquals(2, result.bars.length);\n+        assertEquals(10, result.bars[0].restrictedBarProperty);\n+        assertEquals(11, result.bars[1].restrictedBarProperty);\n+        \n+    }\n+}", "timestamp": 1306292642, "metainfo": ""}