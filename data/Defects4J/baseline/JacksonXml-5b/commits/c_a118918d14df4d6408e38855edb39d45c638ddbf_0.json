{"sha": "a118918d14df4d6408e38855edb39d45c638ddbf", "log": "Fix [Issue#41]", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/dataformat/xml/JacksonXmlModule.java\n+++ b/src/main/java/com/fasterxml/jackson/dataformat/xml/JacksonXmlModule.java\n             XmlMapper m = (XmlMapper) context.getOwner();\n             m.setXMLTextElementName(_cfgNameForTextElement);\n         }\n+\n+        /* Usually this would be the first call; but here anything added will\n+         * be stuff user may has added, so do it afterwards instead.\n+         */\n+        super.setupModule(context);\n     }    \n \n     /*\n--- a/src/main/java/com/fasterxml/jackson/dataformat/xml/XmlMapper.java\n+++ b/src/main/java/com/fasterxml/jackson/dataformat/xml/XmlMapper.java\n  */\n public class XmlMapper extends ObjectMapper\n {\n+    private static final long serialVersionUID = -724333029147285918L;\n+\n     protected final static JacksonXmlModule DEFAULT_XML_MODULE = new JacksonXmlModule();\n     \n     // need to hold on to module instance just in case copy() is used\n--- a/src/test/java/com/fasterxml/jackson/dataformat/xml/TestSerialization.java\n+++ b/src/test/java/com/fasterxml/jackson/dataformat/xml/TestSerialization.java\n import java.io.*;\n import java.util.*;\n \n+import com.fasterxml.jackson.core.JsonGenerator;\n+import com.fasterxml.jackson.databind.SerializerProvider;\n+import com.fasterxml.jackson.databind.ser.std.StdScalarSerializer;\n import com.fasterxml.jackson.dataformat.xml.XmlMapper;\n import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n import com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\n     static class NsRootBean\n     {\n         public String value = \"abc\";\n+    }\n+\n+    static class CustomSerializer extends StdScalarSerializer<String>\n+    {\n+        public CustomSerializer() { super(String.class); }\n+        \n+        @Override\n+        public void serialize(String value, JsonGenerator jgen,\n+                SerializerProvider provider) throws IOException {\n+            jgen.writeString(\"custom:\"+value);\n+        }\n     }\n     \n     /*\n                 +\"</map></MapBean>\",\n                 xml);\n     }\n+\n+    // for [Issue#41]\n+    public void testCustomSerializer() throws Exception\n+    {\n+        JacksonXmlModule module = new JacksonXmlModule();\n+        module.addSerializer(String.class, new CustomSerializer());\n+        XmlMapper xml = new XmlMapper(module);\n+        assertEquals(\"<String>custom:foo</String>\", xml.writeValueAsString(\"foo\"));\n+    }\n     \n     // manual 'test' to see \"what would JAXB do?\"\n     /*", "timestamp": 1352412252, "metainfo": ""}