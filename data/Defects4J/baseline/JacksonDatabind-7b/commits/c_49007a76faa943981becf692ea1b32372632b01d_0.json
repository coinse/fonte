{"sha": "49007a76faa943981becf692ea1b32372632b01d", "log": "Merge branch 'master' of github.com:FasterXML/jackson-databind", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/DeserializationFeature.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/DeserializationFeature.java\n \n     /**\n      * Feature that controls whether numeric timestamp values are expected\n-     * to be written using nanosecond timestamps (enabled) or not (disabled);\n-     * if disabled, standard millisecond timestamps are assumed.\n+     * to be written using nanosecond timestamps (enabled) or not (disabled),\n+     * <b>if and only if</b> datatype supports such resolution.\n+     * Only newer datatypes (such as Java8 Date/Time) support such resolution --\n+     * older types (pre-Java8 <b>java.util.Date</b> etc) and Joda do not --\n+     * and this setting <b>has no effect</b> on such types.\n+     *<p>\n+     * If disabled, standard millisecond timestamps are assumed.\n      * This is the counterpart to {@link SerializationFeature#WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS}.\n      *<p>\n-     * Feature is disabled by default.\n+     * Feature is enabled by default, to support most accurate time values possible.\n      * \n      * @since 2.2\n      */\n-    READ_DATE_TIMESTAMPS_AS_NANOSECONDS(false),\n+    READ_DATE_TIMESTAMPS_AS_NANOSECONDS(true),\n+\n+    /**\n+     * Feature that specifies whether context provided {@link java.util.TimeZone}\n+     * ({@link DeserializationContext#getTimeZone()} should be used to adjust Date/Time\n+     * values on deserialization, even if value itself contains timezone information.\n+     * If enabled, contextual <code>TimeZone</code> will essentially override any other\n+     * TimeZone information; if disabled, it will only be used if value itself does not\n+     * contain any TimeZone information.\n+     * \n+     * @since 2.2\n+     */\n+    ADJUST_DATES_TO_CONTEXT_TIME_ZONE(true),\n \n     /*\n     /******************************************************\n--- a/src/main/java/com/fasterxml/jackson/databind/SerializationFeature.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/SerializationFeature.java\n     /**\n      * Feature that controls whether numeric timestamp values are\n      * to be written using nanosecond timestamps (enabled) or not (disabled);\n-     * if disabled, standard millisecond timestamps are assumed.\n-     * This is the counterpart to {@link DeserializationFeature#READ_DATE_TIMESTAMPS_AS_NANOSECONDS}.\n-     *<p>\n-     * Feature is disabled by default.\n+     * <b>if and only if</b> datatype supports such resolution.\n+     * Only newer datatypes (such as Java8 Date/Time) support such resolution --\n+     * older types (pre-Java8 <b>java.util.Date</b> etc) and Joda do not --\n+     * and this setting <b>has no effect</b> on such types.\n+     *<p>\n+     * If disabled, standard millisecond timestamps are assumed.\n+     * This is the counterpart to {@link SerializationFeature#WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS}.\n+     *<p>\n+     * Feature is enabled by default, to support most accurate time values possible.\n      * \n      * @since 2.2\n      */\n-    WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS(false),    \n+    WRITE_DATE_TIMESTAMPS_AS_NANOSECONDS(true),    \n     \n     /**\n      * Feature that determines whether {@link java.util.Map} entries are first\n      * Feature is disabled by default.\n      */\n     ORDER_MAP_ENTRIES_BY_KEYS(false),\n-\n-    /**\n-     * Feature that specifies whether context provided {@link java.util.TimeZone}\n-     * ({@link SerializerProvider#getTimeZone()} should be used to adjust Date/Time\n-     * values on deserialization, even if value itself contains timezone information.\n-     * If enabled, contextual <code>TimeZone</code> will essentially override any other\n-     * TimeZone information; if disabled, it will only be used if value itself does not\n-     * contain any TimeZone information.\n-     * \n-     * @since 2.2\n-     */\n-    ADJUST_DATES_TO_CONTEXT_TIME_ZONE(true),\n \n     /*\n     /******************************************************\n--- a/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ObjectMapper.java\n      * for deserializing a single root value.\n      * Can be overridden if a custom context is needed.\n      */\n-    protected final DefaultDeserializationContext createDeserializationContext(JsonParser jp,\n+    protected DefaultDeserializationContext createDeserializationContext(JsonParser jp,\n             DeserializationConfig cfg)\n     {\n         return _deserializationContext.createInstance(cfg,\n--- a/src/test/java/com/fasterxml/jackson/databind/TestObjectMapper.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/TestObjectMapper.java\n import java.io.*;\n \n import com.fasterxml.jackson.core.JsonFactory;\n+import com.fasterxml.jackson.core.JsonParser;\n \n import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.deser.DefaultDeserializationContext;\n import com.fasterxml.jackson.databind.node.*;\n import com.fasterxml.jackson.databind.type.TypeFactory;\n \n         public void setX(int v) { value = v; }\n     }\n \n+    // for [Issue#206]\n+    @SuppressWarnings(\"serial\")\n+    static class CustomMapper extends ObjectMapper {\n+        @Override\n+        protected DefaultDeserializationContext createDeserializationContext(JsonParser jp,\n+                DeserializationConfig cfg) {\n+            return super.createDeserializationContext(jp, cfg);\n+        }\n+    }\n+    \n     /*\n     /**********************************************************\n     /* Test methods", "timestamp": 1365723033, "metainfo": ""}