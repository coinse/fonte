{"sha": "b2199542e47ab36b9976637fb003f9d52e99e024", "log": "Add a sanity check to try to handle problemt of not passing SerializerProvider via schema introspection", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/BeanPropertyWriter.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/BeanPropertyWriter.java\n \n     // Also part of BeanProperty implementation\n     @Override\n-    public void depositSchemaProperty(JsonObjectFormatVisitor objectVisitor)\n+    public void depositSchemaProperty(JsonObjectFormatVisitor v)\n         throws JsonMappingException\n     {\n-        if (objectVisitor != null) {\n+        if (v != null) {\n             if (isRequired()) {\n-                objectVisitor.property(this); \n+                v.property(this); \n             } else {\n-                objectVisitor.optionalProperty(this);\n+                v.optionalProperty(this);\n             }\n         }\n     }\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/DateTimeSerializerBase.java\n     /**********************************************************\n      */\n     \n-    protected boolean _asTimestamp(SerializerProvider provider) {\n+    protected boolean _asTimestamp(SerializerProvider provider)\n+    {\n         if (_useTimestamp != null) {\n-        \treturn _useTimestamp.booleanValue();\n+            return _useTimestamp.booleanValue();\n         }\n         if (_customFormat == null) {\n-        \treturn provider.isEnabled(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n+            if (provider != null) {\n+                return provider.isEnabled(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);\n+            }\n+            // 12-Jun-2014, tatu: Is it legal not to have provider? Was NPE:ing earlier so leave a check\n+            throw new IllegalArgumentException(\"Null 'provider' passed for \"+handledType().getName());\n         }\n         return false;\n     }", "timestamp": 1402603489, "metainfo": ""}