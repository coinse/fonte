{"sha": "fa1d99255915f21c868f28307fd6e3adb2029ea0", "log": "Try to fix #479", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/StringArrayDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/StringArrayDeserializer.java\n             if (t == JsonToken.VALUE_STRING) {\n                 value = jp.getText();\n             } else if (t == JsonToken.VALUE_NULL) {\n-                value = _elementDeserializer.getNullValue();\n+                value = null; // since we have established that '_elementDeserializer == null' earlier\n             } else {\n                 value = _parseString(jp, ctxt);\n             }\n         \n         while ((t = jp.nextToken()) != JsonToken.END_ARRAY) {\n             // Ok: no need to convert Strings, but must recognize nulls\n-            String value = (t == JsonToken.VALUE_NULL) ? null : deser.deserialize(jp, ctxt);\n+            String value = (t == JsonToken.VALUE_NULL) ? deser.getNullValue() : deser.deserialize(jp, ctxt);\n             if (ix >= chunk.length) {\n                 chunk = buffer.appendCompletedChunk(chunk);\n                 ix = 0;\n--- a/src/test/java/com/fasterxml/jackson/databind/deser/TestArrayDeserialization.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/deser/TestArrayDeserialization.java\n public class TestArrayDeserialization\n     extends BaseMapTest\n {\n-    /*\n-    /**********************************************************\n-    /* Helper classes\n-    /**********************************************************\n-     */\n-\n     public final static class Bean1\n     {\n         int _x, _y;\n             \"a\", \"b\", \"abcd\", \"\", \"???\", \"\\\"quoted\\\"\", \"lf: \\n\",\n         };\n         StringWriter sw = new StringWriter();\n-        JsonGenerator jg = new JsonFactory().createGenerator(sw);\n+        JsonGenerator jg = MAPPER.getFactory().createGenerator(sw);\n         jg.writeStartArray();\n         for (String str : STRS) {\n             jg.writeString(str);\n         for (int i = 0; i < STRS.length; ++i) {\n             assertEquals(STRS[i], result[i]);\n         }\n+\n+        // [#479]: null handling was busted in 2.4.0\n+        result = MAPPER.readValue(\" [ null ]\", String[].class);\n+        assertNotNull(result);\n+        assertEquals(1, result.length);\n+        assertNull(result[0]);\n     }\n \n     public void testCharArray() throws Exception", "timestamp": 1401847074, "metainfo": ""}