{"sha": "e4670a7278fcc4537d4b114defc9a3bd7e9712df", "log": "Fix #324 in mainline", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/std/EnumDeserializer.java\n             try {\n                 return _factory.invoke(_enumClass, value);\n             } catch (Exception e) {\n-                ClassUtil.unwrapAndThrowAsIAE(e);\n+                Throwable t = ClassUtil.getRootCause(e);\n+                if (t instanceof IOException) {\n+                    throw (IOException) t;\n+                }\n+                throw ctxt.instantiationException(_enumClass, t);\n             }\n-            return null;\n         }\n     }\n }\n--- a/src/test/java/com/fasterxml/jackson/databind/deser/TestEnumDeserialization.java\n+++ b/src/test/java/com/fasterxml/jackson/databind/deser/TestEnumDeserialization.java\n         }\n     }\n \n+    // [Issue#324]: exception from creator method\n+    protected enum TestEnum324\n+    {\n+        A, B;\n+        \n+        @JsonCreator public static TestEnum324 creator(String arg) {\n+            throw new RuntimeException(\"Foobar!\");\n+        }\n+    }\n+    \n     /*\n     /**********************************************************\n     /* Tests\n     // [JACKSON-834]\n     public void testEnumsFromInts() throws Exception\n     {\n-        ObjectMapper mapper = new ObjectMapper();\n-        TestEnumFor834 res = mapper.readValue(\"1 \", TestEnumFor834.class);\n+        TestEnumFor834 res = MAPPER.readValue(\"1 \", TestEnumFor834.class);\n         assertSame(TestEnumFor834.ENUM_A, res);\n     }\n \n        // not sure this is totally safe but...\n        assertEquals(TestEnum.JACKSON, mapper.readValue(quote(\"jackson\"), TestEnum.class));\n     }\n+    \n+    // [Issue#324]\n+    public void testExceptionFromCreator() throws Exception\n+    {\n+        try {\n+            /*TestEnum324 e =*/ MAPPER.readValue(quote(\"xyz\"), TestEnum324.class);\n+            fail(\"Should throw exception\");\n+        } catch (JsonMappingException e) {\n+            verifyException(e, \"foobar\");\n+        }\n+    }\n }", "timestamp": 1381804299, "metainfo": ""}