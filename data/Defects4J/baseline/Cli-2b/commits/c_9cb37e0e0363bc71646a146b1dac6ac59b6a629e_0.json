{"sha": "9cb37e0e0363bc71646a146b1dac6ac59b6a629e", "log": "Line separator as first char for helpformatter footer and header no longer throws exception  BR: 21215   ", "commit": "\n--- a/src/java/org/apache/commons/cli/HelpFormatter.java\n+++ b/src/java/org/apache/commons/cli/HelpFormatter.java\n         if (((pos = text.indexOf('\\n', startPos)) != -1 && pos <= width)\n             || ((pos = text.indexOf('\\t', startPos)) != -1 && pos <= width))\n         {\n-            return pos;\n+            return pos+1;\n         }\n         else if ((startPos + width) >= text.length())\n         {\n \n         int pos = s.length();\n \n-        while ((pos >= 0) && Character.isWhitespace(s.charAt(pos - 1)))\n+        while ((pos > 0) && Character.isWhitespace(s.charAt(pos - 1)))\n         {\n             --pos;\n         }\n--- a/src/test/org/apache/commons/cli/BugsTest.java\n+++ b/src/test/org/apache/commons/cli/BugsTest.java\n         assertTrue(cl.hasOption('o'));\n         assertEquals(\"ovalue\",cl.getOptionValue('o'));\n     }\n+    \n+    public void test21215() {\n+        Options options = new Options();\n+        HelpFormatter formatter = new HelpFormatter();\n+        String SEP = System.getProperty(\"line.separator\");\n+        String header = SEP+\"Header\";\n+        String footer = \"Footer\";\n+        StringWriter out = new StringWriter();\n+        formatter.printHelp(new PrintWriter(out),80, \"foobar\", header, options, 2, 2, footer, true);\n+        assertEquals(\n+                \"usage: foobar\"+SEP+\n+                \"\"+SEP+\n+                \"Header\"+SEP+\n+                \"\"+SEP+\n+                \"Footer\"+SEP\n+                ,out.toString());\n+    }\n \n }", "timestamp": 1104159098, "metainfo": ""}