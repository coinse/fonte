{"sha": "9a3f8e0cad47a90f8f648abee54159b00f334a85", "log": "- added comparator test  ", "commit": "\n--- a/src/test/org/apache/commons/cli2/util/HelpFormatterTest.java\n+++ b/src/test/org/apache/commons/cli2/util/HelpFormatterTest.java\n import java.io.StringReader;\n import java.io.StringWriter;\n import java.util.Collections;\n+import java.util.Comparator;\n import java.util.HashSet;\n import java.util.Iterator;\n import java.util.List;\n         assertNull(reader.readLine());\n     }\n \n+    public void testComparator() throws IOException {\n+        final StringWriter writer = new StringWriter();\n+        final PrintWriter pw = new PrintWriter(writer);\n+        helpFormatter.setPrintWriter(pw);\n+        final Comparator comparator = new OptionComparator();\n+        helpFormatter.setComparator(comparator);\n+        helpFormatter.print();\n+\n+        // test comparator\n+        assertEquals(\"invalid comparator\", comparator, helpFormatter.getComparator());\n+        final BufferedReader reader =\n+            new BufferedReader(new StringReader(writer.toString()));\n+        assertEquals(\n+            \"+------------------------------------------------------------------------------+\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*Jakarta Commons CLI                                                         *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"+------------------------------------------------------------------------------+\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*Usage:                                                                      *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*ant [--verbose --projecthelp --help --diagnostics] [<target1> [<target2>    *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*...]]                                                                       *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"+------------------------------------------------------------------------------+\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*options              *-*                                                    *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*  --verbose          *-*print the version information and exit              *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*  --projecthelp      *-*print project help information                      *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*  --help (-?,-h)     *-*Displays the help                                   *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*  --diagnostics      *-*print information that might be helpful to diagnose *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*                     *-*or report problems.                                 *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*  target [target ...]*-*The targets ant should build                        *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"+------------------------------------------------------------------------------+\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*Copyright 2003                                                              *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"|*Apache Software Foundation                                                  *|\",\n+            reader.readLine());\n+        assertEquals(\n+            \"+------------------------------------------------------------------------------+\",\n+            reader.readLine());\n+        assertNull(reader.readLine());\n+    }\n+\n     public void testPrintHelp() throws IOException {\n         final StringWriter writer = new StringWriter();\n         helpFormatter.setPrintWriter(new PrintWriter(writer));\n         assertNull(reader.readLine());\n     }\n }\n+\n+\n+class OptionComparator implements Comparator {\n+\n+    public int compare(Object o1, Object o2) {\n+        Option opt1 = (Option) o1;\n+        Option opt2 = (Option) o2;\n+        return -opt1.getPreferredName().compareTo(opt2.getPreferredName());\n+    }\n+}", "timestamp": 1125963290, "metainfo": ""}