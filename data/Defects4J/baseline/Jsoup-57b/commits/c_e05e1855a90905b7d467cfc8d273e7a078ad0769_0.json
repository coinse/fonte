{"sha": "e05e1855a90905b7d467cfc8d273e7a078ad0769", "log": "Cleaned tag definitions to make head and dl parsing more generic.", "commit": "\n--- a/src/main/java/org/jsoup/parser/Tag.java\n+++ b/src/main/java/org/jsoup/parser/Tag.java\n \n         if (this.empty || this.isData())\n             return false;\n-\n-        // head can only contain a few. if more than head in here, modify to have a list of valids\n-        // TODO: (could solve this with walk for ancestor)\n-        if (this.tagName.equals(\"head\")) {\n-            if (child.tagName.equals(\"base\") || child.tagName.equals(\"script\") || child.tagName.equals(\"noscript\") || child.tagName.equals(\"link\") ||\n-                    child.tagName.equals(\"meta\") || child.tagName.equals(\"title\") || child.tagName.equals(\"style\") || child.tagName.equals(\"object\")) {\n-                return true;\n-            }\n-            return false;\n-        }\n         \n-        // dt and dd (in dl)\n-        if (this.tagName.equals(\"dt\") && (child.tagName.equals(\"dd\") || child.tagName.equals(\"dl\")))\n-            return false;\n-        if (this.tagName.equals(\"dd\") && (child.tagName.equals(\"dt\") || child.tagName.equals(\"dl\")))\n-            return false;\n-\n         // don't allow children to contain their parent (directly)\n         if (this.requiresSpecificParent() && this.getImplicitParent().equals(child))\n             return false;\n \n         // document\n         createBlock(\"HTML\").setAncestor(new String[0]); // specific includes not impl\n-        createBlock(\"HEAD\").setAncestor(\"HTML\"); // specific includes not impl: SCRIPT, STYLE, META, LINK, OBJECT\n+        createBlock(\"HEAD\").setParent(\"HTML\").setLimitChildren();\n         createBlock(\"BODY\").setAncestor(\"HTML\"); // specific includes not impl\n         createBlock(\"FRAMESET\").setAncestor(\"HTML\");\n \n         createInline(\"LABEL\").setAncestor(\"FORM\").setOptionalClosing(); // not self\n         createInline(\"BUTTON\").setAncestor(\"FORM\"); // bunch of excludes not defined\n         createInline(\"OPTGROUP\").setParent(\"SELECT\"); //  only contain option\n-        createInline(\"OPTION\").setParent(\"SELECT\").setOptionalClosing();\n+        createInline(\"OPTION\").setParent(\"SELECT\", \"OPTGROUP\").setOptionalClosing();\n         createBlock(\"FIELDSET\").setAncestor(\"FORM\");\n         createInline(\"LEGEND\").setAncestor(\"FIELDSET\");\n \n         // definition lists. per spec, dt and dd are inline and must directly descend from dl. However in practise\n         // these are all used as blocks and dl need only be an ancestor\n         createBlock(\"DL\").setOptionalClosing(); // can't nest\n-        createBlock(\"DT\").setAncestor(\"DL\").setOptionalClosing(); // only within DL.\n-        createBlock(\"DD\").setAncestor(\"DL\").setOptionalClosing(); // only within DL.\n+        createBlock(\"DT\").setAncestor(\"DL\").setExcludes(\"DL\", \"DD\").setOptionalClosing(); // only within DL.\n+        createBlock(\"DD\").setAncestor(\"DL\").setExcludes(\"DL\", \"DT\").setOptionalClosing(); // only within DL.\n \n         createBlock(\"LI\").setAncestor(\"UL\", \"OL\").setOptionalClosing(); // only within OL or UL.\n ", "timestamp": 1309605115, "metainfo": ""}