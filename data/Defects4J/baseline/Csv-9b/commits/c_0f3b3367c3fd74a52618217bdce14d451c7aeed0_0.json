{"sha": "0f3b3367c3fd74a52618217bdce14d451c7aeed0", "log": "Add org.apache.commons.csv.CSVParserTest.testGetOneLineOneParser(). See discussion in [CSV-110].  ", "commit": "\n--- a/src/test/java/org/apache/commons/csv/CSVParserTest.java\n+++ b/src/test/java/org/apache/commons/csv/CSVParserTest.java\n import java.io.File;\n import java.io.IOException;\n import java.io.InputStreamReader;\n+import java.io.PipedReader;\n+import java.io.PipedWriter;\n import java.io.Reader;\n import java.io.StringReader;\n import java.io.StringWriter;\n                     + \"   \\\"foo\\n,,\\n\\\"\\\",,\\n\\\"\\\"\\\",d,e\\n\";   // changed to use standard CSV escaping\n \n     private static final String CSV_INPUT_1 = \"a,b,c,d\";\n+\n+    private static final String CSV_INPUT_2 = \"a,b,1 2\";\n \n     private static final String[][] RESULT = {\n             {\"a\", \"b\", \"c\", \"d\"},\n         parser.close();\n     }\n \n+    /**\n+     * Tests reusing a parser to process new string records one at a time as they are being discovered. See [CSV-110].\n+     * \n+     * @throws IOException\n+     */\n+    @Test\n+    public void testGetOneLineOneParser() throws IOException {\n+        PipedWriter writer = new PipedWriter();\n+        PipedReader reader = new PipedReader(writer);\n+        final CSVFormat format = CSVFormat.DEFAULT;\n+        final CSVParser parser = new CSVParser(reader, format);\n+        try {\n+            writer.append(CSV_INPUT_1 + format.getRecordSeparator());\n+            final CSVRecord record1 = parser.nextRecord();\n+            assertArrayEquals(RESULT[0], record1.values());\n+            writer.append(CSV_INPUT_2 + format.getRecordSeparator());\n+            final CSVRecord record2 = parser.nextRecord();\n+            assertArrayEquals(RESULT[1], record2.values());\n+        } finally {\n+            parser.close();\n+        }\n+    }\n+\n     @Test\n     public void testGetRecordNumberWithCR() throws Exception {\n         this.validateRecordNumbers(String.valueOf(CR));", "timestamp": 1396880972, "metainfo": ""}