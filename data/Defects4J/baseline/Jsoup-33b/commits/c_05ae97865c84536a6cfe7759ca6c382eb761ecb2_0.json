{"sha": "05ae97865c84536a6cfe7759ca6c382eb761ecb2", "log": "Whitespace normalise document.title() output.  Fixes #168", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Document.java\n+++ b/src/main/java/org/jsoup/nodes/Document.java\n package org.jsoup.nodes;\n \n+import org.jsoup.helper.StringUtil;\n import org.jsoup.helper.Validate;\n import org.jsoup.parser.Tag;\n import org.jsoup.select.Elements;\n      @return Trimmed title, or empty string if none set.\n      */\n     public String title() {\n+        // title is a preserve whitespace tag (for document output), but normalised here\n         Element titleEl = getElementsByTag(\"title\").first();\n-        return titleEl != null ? titleEl.text().trim() : \"\";\n+        return titleEl != null ? StringUtil.normaliseWhitespace(titleEl.text()).trim() : \"\";\n     }\n \n     /**\n--- a/src/test/java/org/jsoup/nodes/DocumentTest.java\n+++ b/src/test/java/org/jsoup/nodes/DocumentTest.java\n         withTitle.title(\"Hello\");\n         assertEquals(\"Hello\", withTitle.title());\n         assertEquals(\"Hello\", withTitle.select(\"title\").first().text());\n+\n+        Document normaliseTitle = Jsoup.parse(\"<title>   Hello\\nthere   \\n   now   \\n\");\n+        assertEquals(\"Hello there now\", normaliseTitle.title());\n     }\n \n     @Test public void testOutputEncoding() {", "timestamp": 1348429640, "metainfo": ""}