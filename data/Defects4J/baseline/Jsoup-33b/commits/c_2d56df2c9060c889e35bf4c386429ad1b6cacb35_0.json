{"sha": "2d56df2c9060c889e35bf4c386429ad1b6cacb35", "log": "Limit how far up the stack the formatting adoption agency algorithm will travel  Fixes #234", "commit": "\n--- a/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n+++ b/src/main/java/org/jsoup/parser/HtmlTreeBuilderState.java\n                             Element commonAncestor = null;\n                             boolean seenFormattingElement = false;\n                             LinkedList<Element> stack = tb.getStack();\n-                            for (int si = 0; si < stack.size(); si++) {\n+                            // the spec doesn't limit to < 64, but in degenerate cases (9000+ stack depth) this prevents\n+                            // run-aways\n+                            for (int si = 0; si < stack.size() && si < 64; si++) {\n                                 Element el = stack.get(si);\n                                 if (el == formatEl) {\n                                     commonAncestor = stack.get(si - 1);", "timestamp": 1356554727, "metainfo": ""}