{"sha": "b85ddf03612c6fe36b27c3985ee54675d91c5a7d", "log": "minor refactoring", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerBase.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializerBase.java\n                     unwrapped = new UnwrappedPropertyHandler();\n                 }\n                 unwrapped.addProperty(prop);\n+                // 10-Apr-2014, tatu: Looks like we should also do this? (no observed diff tho)\n+                if (prop != origProp) {\n+                    _beanProperties.replace(prop);\n+                }\n                 continue;\n             }\n             // [JACKSON-594]: non-static inner classes too:\n             BeanProperty property) throws JsonMappingException\n     {\n         ObjectIdReader oir = _objectIdReader;\n-        String[] ignorals = null;\n         \n         // First: may have an override for Object Id:\n         final AnnotationIntrospector intr = ctxt.getAnnotationIntrospector();\n         final AnnotatedMember accessor = (property == null || intr == null)\n                 ? null : property.getMember();\n-        if (property != null && intr != null) {\n-            ignorals = intr.findPropertiesToIgnore(accessor);\n+        if (accessor != null && intr != null) {\n             ObjectIdInfo objectIdInfo = intr.findObjectIdInfo(accessor);\n             if (objectIdInfo != null) { // some code duplication here as well (from BeanDeserializerFactory)\n                 // 2.1: allow modifications by \"id ref\" annotations as well:\n             contextual = contextual.withObjectIdReader(oir);\n         }\n         // And possibly add more properties to ignore\n-        if (ignorals != null && ignorals.length != 0) {\n-            HashSet<String> newIgnored = ArrayBuilders.setAndArray(contextual._ignorableProps, ignorals);\n-            contextual = contextual.withIgnorableProperties(newIgnored);\n+        if (accessor != null) {\n+            String[] ignorals = intr.findPropertiesToIgnore(accessor);\n+            if (ignorals != null && ignorals.length != 0) {\n+                HashSet<String> newIgnored = ArrayBuilders.setAndArray(contextual._ignorableProps, ignorals);\n+                contextual = contextual.withIgnorableProperties(newIgnored);\n+            }\n         }\n \n         // One more thing: are we asked to serialize POJO as array?", "timestamp": 1397146630, "metainfo": ""}