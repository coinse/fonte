{"sha": "0a4a03116be150464746e347bb73dba309e5578f", "log": "minor tweaks for TokenBuffer", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/util/TokenBuffer.java\n                 break;\n             case VALUE_NUMBER_INT:\n                 {\n-                    Number n = (Number) segment.get(ptr);\n-                    if (n instanceof BigInteger) {\n+                    Object n = segment.get(ptr);\n+                    if (n instanceof Integer) {\n+                        jgen.writeNumber((Integer) n);\n+                    } else if (n instanceof BigInteger) {\n                         jgen.writeNumber((BigInteger) n);\n                     } else if (n instanceof Long) {\n-                        jgen.writeNumber(n.longValue());\n+                        jgen.writeNumber((Long) n);\n+                    } else if (n instanceof Short) {\n+                        jgen.writeNumber((Short) n);\n                     } else {\n-                        jgen.writeNumber(n.intValue());\n+                        jgen.writeNumber(((Number) n).intValue());\n                     }\n                 }\n                 break;\n             case VALUE_NUMBER_FLOAT:\n                 {\n                     Object n = segment.get(ptr);\n-                    if (n instanceof BigDecimal) {\n+                    if (n instanceof Double) {\n+                        jgen.writeNumber(((Double) n).doubleValue());\n+                    } else if (n instanceof BigDecimal) {\n                         jgen.writeNumber((BigDecimal) n);\n                     } else if (n instanceof Float) {\n                         jgen.writeNumber(((Float) n).floatValue());\n-                    } else if (n instanceof Double) {\n-                        jgen.writeNumber(((Double) n).doubleValue());\n                     } else if (n == null) {\n                         jgen.writeNull();\n                     } else if (n instanceof String) {\n         public NumberType getNumberType() throws IOException, JsonParseException\n         {\n             Number n = getNumberValue();\n-            if (n instanceof Short) return NumberType.INT;\t\t// should be SHORT\n             if (n instanceof Integer) return NumberType.INT;\n             if (n instanceof Long) return NumberType.LONG;\n             if (n instanceof Double) return NumberType.DOUBLE;\n             if (n instanceof BigDecimal) return NumberType.BIG_DECIMAL;\n+            if (n instanceof BigInteger) return NumberType.BIG_INTEGER;\n             if (n instanceof Float) return NumberType.FLOAT;\n-            if (n instanceof BigInteger) return NumberType.BIG_INTEGER;\n+            if (n instanceof Short) return NumberType.INT;       // should be SHORT\n             return null;\n         }\n ", "timestamp": 1366167757, "metainfo": ""}