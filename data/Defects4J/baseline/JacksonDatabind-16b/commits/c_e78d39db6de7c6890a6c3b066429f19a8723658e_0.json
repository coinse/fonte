{"sha": "e78d39db6de7c6890a6c3b066429f19a8723658e", "log": "trivial simplification", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/deser/BeanDeserializer.java\n     {\n         final Class<?> activeView = _needViewProcesing ? ctxt.getActiveView() : null;\n         final ExternalTypeHandler ext = _externalTypeIdHandler.start();\n-        JsonToken t = p.getCurrentToken();\n-        for (; t == JsonToken.FIELD_NAME; t = p.nextToken()) {\n-            String propName = p.getCurrentName();\n-            p.nextToken();\n+        \n+        for (JsonToken t = p.getCurrentToken(); t == JsonToken.FIELD_NAME; t = p.nextToken()) {\n+            String propName = p.getCurrentName();\n+            t = p.nextToken();\n             SettableBeanProperty prop = _beanProperties.find(propName);\n             if (prop != null) { // normal case\n                 // [JACKSON-831]: may have property AND be used as external type id:\n-                if (p.getCurrentToken().isScalarValue()) {\n+                if (t.isScalarValue()) {\n                     ext.handleTypePropertyValue(p, ctxt, propName, bean);\n                 }\n                 if (activeView != null && !prop.visibleInView(activeView)) {\n--- a/src/test/java/com/fasterxml/jackson/failing/JSOGDeserialize622Test.java\n+++ b/src/test/java/com/fasterxml/jackson/failing/JSOGDeserialize622Test.java\n    */\n   @JsonIdentityInfo(generator=JSOGGenerator.class)\n   public static class IdentifiableExampleJSOG {\n-    public int foo;\n-    public IdentifiableExampleJSOG next;\n+      public int foo;\n+      public IdentifiableExampleJSOG next;\n   }\n \n   /*\n \n   // for [databind#622]\n   public void testStructJSOGRef() throws Exception {\n+      // Because the value ({@ref:1}) is not scalar, parser thinks it is not an id \n+      // and tries to deserialize as normal a new IdentifiableExampleJSOG \n+      // then  complains about unrecognized field \"@ref\"\n+      IdentifiableExampleJSOG result = mapper.readValue(EXP_EXAMPLE_JSOG,\n+              IdentifiableExampleJSOG.class);\n \n-    // Because the value ({@ref:1}) is not scalar, parser thinks it is not an id \n-    // and tries to deserialize as normal a new IdentifiableExampleJSOG \n-    // then  complains about unrecognized field \"@ref\"\n-    IdentifiableExampleJSOG result = mapper.readValue(EXP_EXAMPLE_JSOG,\n-            IdentifiableExampleJSOG.class);\n-\n-    assertEquals(66, result.foo);\n-    assertSame(result, result.next);\n+      assertEquals(66, result.foo);\n+      assertSame(result, result.next);\n   }\n }", "timestamp": 1418182422, "metainfo": ""}