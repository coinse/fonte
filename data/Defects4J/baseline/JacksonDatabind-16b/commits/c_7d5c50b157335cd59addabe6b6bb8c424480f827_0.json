{"sha": "7d5c50b157335cd59addabe6b6bb8c424480f827", "log": "Minor fix to Enum/schema/toString() combination (backport from 2.6)", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/EnumSerializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/EnumSerializer.java\n                 serializers.isEnabled(SerializationFeature.WRITE_ENUMS_USING_TO_STRING);\n \n         JsonStringFormatVisitor stringVisitor = visitor.expectStringFormat(typeHint);\n-        if (typeHint != null && stringVisitor != null) {\n+        if (stringVisitor != null) {\n             Set<String> enums = new LinkedHashSet<String>();\n-            for (SerializableString value : _values.values()) {\n-                if (usingToString) {\n-                    enums.add(value.toString());\n-                } else {\n+            if (usingToString) {\n+                for (Enum<?> en : _values.enums()) {\n+                    enums.add(en.toString());\n+                }\n+            } else {\n+                for (SerializableString value : _values.values()) {\n                     enums.add(value.getValue());\n                 }\n             }\n--- a/src/main/java/com/fasterxml/jackson/databind/util/EnumValues.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/util/EnumValues.java\n         throw new IllegalArgumentException(\"Can not determine enum constants for Class \"+enumClass.getName());\n     }\n \n+    /**\n+     * Convenience accessor for getting raw Enum instances.\n+     * \n+     * @since 2.6\n+     */\n+    @SuppressWarnings(\"unchecked\")\n+    public Collection<Enum<?>> enums() {\n+        return (Collection<Enum<?>>) _values.keySet();\n+    }\n+\n     public SerializableString serializedValueFor(Enum<?> key) { return _values.get(key); }\n     public Collection<SerializableString> values() { return _values.values(); }\n ", "timestamp": 1429938705, "metainfo": ""}