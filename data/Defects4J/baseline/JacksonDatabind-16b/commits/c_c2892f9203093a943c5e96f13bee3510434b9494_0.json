{"sha": "c2892f9203093a943c5e96f13bee3510434b9494", "log": "... and yet more tweaking", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/databind/ser/std/StdDelegatingSerializer.java\n+++ b/src/main/java/com/fasterxml/jackson/databind/ser/std/StdDelegatingSerializer.java\n     public JsonSerializer<?> createContextual(SerializerProvider provider, BeanProperty property)\n         throws JsonMappingException\n     {\n-        // First: if already got serializer to delegate to, contextualize it:\n-        if (_delegateSerializer != null) {\n-            if (_delegateSerializer instanceof ContextualSerializer) {\n-                JsonSerializer<?> ser = provider.handleSecondaryContextualization(_delegateSerializer, property);\n-                if (ser == _delegateSerializer) {\n-                    return this;\n-                }\n-                return withDelegate(_converter, _delegateType, ser);\n+        JsonSerializer<?> delSer = _delegateSerializer;\n+        JavaType delegateType = _delegateType;\n+\n+        if (delSer == null) {\n+            // Otherwise, need to locate serializer to delegate to. For that we need type information...\n+            if (delegateType == null) {\n+                delegateType = _converter.getOutputType(provider.getTypeFactory());\n             }\n-            return this;\n-        }\n-        // Otherwise, need to locate serializer to delegate to. For that we need type information...\n-        JavaType delegateType = _delegateType;\n-        if (delegateType == null) {\n-            delegateType = _converter.getOutputType(provider.getTypeFactory());\n-        }\n-        // and then find the thing...\n-        return withDelegate(_converter, delegateType,\n-                provider.findValueSerializer(delegateType, property));\n+            delSer = provider.findValueSerializer(delegateType);\n+        }\n+        if (delSer instanceof ContextualSerializer) {\n+            delSer = provider.handleSecondaryContextualization(delSer, property);\n+        }\n+        return (delSer == _delegateSerializer) ? this\n+                : withDelegate(_converter, delegateType, delSer);\n     }\n \n     /*", "timestamp": 1413738160, "metainfo": ""}