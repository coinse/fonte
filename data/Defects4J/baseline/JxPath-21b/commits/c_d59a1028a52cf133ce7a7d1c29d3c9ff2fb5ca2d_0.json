{"sha": "d59a1028a52cf133ce7a7d1c29d3c9ff2fb5ca2d", "log": "tests for [JXPATH-98]  ", "commit": "\n--- a/src/test/org/apache/commons/jxpath/JXPathTestSuite.java\n+++ b/src/test/org/apache/commons/jxpath/JXPathTestSuite.java\n import org.apache.commons.jxpath.ri.compiler.CoreOperationTest;\n import org.apache.commons.jxpath.ri.compiler.ExtensionFunctionTest;\n import org.apache.commons.jxpath.ri.compiler.VariableTest;\n+import org.apache.commons.jxpath.ri.model.EmptyCollectionTest;\n import org.apache.commons.jxpath.ri.model.ExternalXMLNamespaceTest;\n import org.apache.commons.jxpath.ri.model.MixedModelTest;\n import org.apache.commons.jxpath.ri.model.XMLPreserveSpaceTest;\n         suite.addTestSuite(VariableTest.class);\n         suite.addTestSuite(ContainerModelTest.class);\n         suite.addTestSuite(BeanModelTest.class);\n+        suite.addTestSuite(EmptyCollectionTest.class);\n         suite.addTestSuite(DynamicPropertiesModelTest.class);\n         suite.addTestSuite(DOMModelTest.class);\n         suite.addTestSuite(DynaBeanModelTest.class);\n--- /dev/null\n+++ b/src/test/org/apache/commons/jxpath/ri/model/EmptyCollectionTest.java\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.jxpath.ri.model;\n+\n+import java.util.Collections;\n+\n+import org.apache.commons.jxpath.JXPathContext;\n+import org.apache.commons.jxpath.JXPathTestCase;\n+\n+/**\n+ * Be sure empty lists/sets/arrays work.\n+ * @author mbenson\n+ * @version $Revision$ $Date$\n+ */\n+public class EmptyCollectionTest extends JXPathTestCase {\n+    public static class HasChild {\n+        private Object child;\n+\n+        /**\n+         * Construct a new EmptyCollectionTest.HasChild instance.\n+         */\n+        public HasChild(Object child) {\n+            this.child = child;\n+        }\n+\n+        public Object getChild() {\n+            return child;\n+        }\n+    }\n+\n+    /**\n+     * Construct a new EmptyCollectionTest instance.\n+     */\n+    public EmptyCollectionTest(String s) {\n+        super(s);\n+    }\n+\n+    public void testEmptyList() {\n+        assertXPathPointerIterator(JXPathContext.newContext(Collections.EMPTY_LIST), \"/*\",\n+                Collections.EMPTY_LIST);\n+    }\n+\n+    public void testEmptyArray() {\n+        assertXPathPointerIterator(JXPathContext.newContext(new Object[0]), \"/*\", list());\n+    }\n+\n+    public void testEmptySet() {\n+        assertXPathPointerIterator(JXPathContext.newContext(Collections.EMPTY_SET), \"/*\",\n+                Collections.EMPTY_SET);\n+    }\n+\n+    public void testEmptyChildList() {\n+        assertXPathPointerIterator(JXPathContext.newContext(new HasChild(Collections.EMPTY_LIST)),\n+                \"/child/*\", Collections.EMPTY_LIST);\n+    }\n+\n+    public void testEmptyChildArray() {\n+        assertXPathPointerIterator(JXPathContext.newContext(new HasChild(new Object[0])),\n+                \"/child/*\", list());\n+    }\n+\n+    public void testEmptyChildSet() {\n+        assertXPathPointerIterator(JXPathContext.newContext(new HasChild(Collections.EMPTY_SET)),\n+                \"/child/*\", Collections.EMPTY_SET);\n+    }\n+}", "timestamp": 1186412298, "metainfo": ""}