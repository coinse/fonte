{"sha": "a9af506c38f995d30a68309a77b90c461accb59e", "log": "remove accidentally-implemented XSLT 2.0 key() extension  ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/compiler/CoreFunction.java\n+++ b/src/java/org/apache/commons/jxpath/ri/compiler/CoreFunction.java\n     }\n \n     protected Object functionKey(EvalContext context) {\n-        assertArgRange(2, 3);\n+        assertArgCount(2);\n         String key = InfoSetUtil.stringValue(getArg1().computeValue(context));\n         Object value = getArg2().compute(context);\n         EvalContext ec = null;\n             }\n         }\n         JXPathContext jxpathContext = context.getJXPathContext();\n-        if (getArgumentCount() == 3) {\n-            Object arg3 = getArg3().computeValue(context);\n-            if (arg3 instanceof EvalContext) {\n-                arg3 = ((EvalContext) arg3).getCurrentNodePointer();\n-            }\n-            if (!(arg3 instanceof NodePointer)) {\n-                throw new JXPathException(\"invalid third key() argument: \" + arg3);\n-            }\n-            jxpathContext = jxpathContext.getRelativeContext((NodePointer) arg3);\n-        }\n         NodeSet nodeSet = jxpathContext.getNodeSetByKey(key, value);\n         if (ec != null && ec.hasNext()) {\n             BasicNodeSet accum = new BasicNodeSet();\n--- a/src/test/org/apache/commons/jxpath/ri/compiler/CoreFunctionTest.java\n+++ b/src/test/org/apache/commons/jxpath/ri/compiler/CoreFunctionTest.java\n         assertXPathValueIterator(context, \"key('a', /list[position() < 4])\", list(\"53\", \"64\", \"53\", \"64\", \"53\", \"64\"));\n         context.getVariables().declareVariable(\"ints\", new int[] { 0, 0 });\n         assertXPathValueIterator(context, \"key('a', $ints)\", list(\"53\", \"64\", \"53\", \"64\"));\n-        assertXPathValueIterator(context, \"key('a', 'b', /list)\", list(\"53\", \"64\"));\n-        assertXPathValueIterator(context, \"key('a', $ints, /list)\", list(\"53\", \"64\", \"53\", \"64\"));\n     }\n \n     public void testFormatNumberFunction() {", "timestamp": 1183912117, "metainfo": ""}