{"sha": "53daa46759965e4656d3c6f7d96e1fe2542f09fd", "log": "[JXPATH-108] solve ExtensionFunction NodeSet issues by converting to an EvalContext  ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/compiler/ExtensionFunction.java\n+++ b/src/java/org/apache/commons/jxpath/ri/compiler/ExtensionFunction.java\n \n import org.apache.commons.jxpath.Function;\n import org.apache.commons.jxpath.JXPathFunctionNotFoundException;\n+import org.apache.commons.jxpath.NodeSet;\n import org.apache.commons.jxpath.ri.EvalContext;\n import org.apache.commons.jxpath.ri.QName;\n+import org.apache.commons.jxpath.ri.axes.NodeSetContext;\n \n /**\n  * Represents an element of the parse tree representing an extension function\n             throw new JXPathFunctionNotFoundException(\"No such function: \"\n                     + functionName + Arrays.asList(parameters));\n         }\n-\n-        return function.invoke(context, parameters);\n+        Object result = function.invoke(context, parameters);\n+        return result instanceof NodeSet ? new NodeSetContext(context,\n+                (NodeSet) result) : result;\n     }\n     \n     private Object convert(Object object) {", "timestamp": 1197659289, "metainfo": ""}