{"sha": "bd5a8a717f62fbe602c59f92ff18766da392b15a", "log": "Applied patch submitted by Ulrich Nicolas Liss\ufffd   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java\n+++ b/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java,v 1.6 2002/08/10 16:13:04 dmitri Exp $\n- * $Revision: 1.6 $\n- * $Date: 2002/08/10 16:13:04 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/model/dom/DOMAttributeIterator.java,v 1.7 2002/12/02 01:12:20 dmitri Exp $\n+ * $Revision: 1.7 $\n+ * $Date: 2002/12/02 01:12:20 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * An iterator of attributes of a DOM Node.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.6 $ $Date: 2002/08/10 16:13:04 $\n+ * @version $Revision: 1.7 $ $Date: 2002/12/02 01:12:20 $\n  */\n public class DOMAttributeIterator implements NodeIterator {\n     private NodePointer parent;\n \n         if (testNS != null){\n             Attr attr = element.getAttributeNodeNS(testNS, name.getName());\n-            if (attr == null){\n-                // This may mean that the parser does not support NS for\n-                // attributes, example - the version of Crimson bundled\n-                // with JDK 1.4.0\n-                NamedNodeMap nnm = element.getAttributes();\n-                for (int i = 0; i < nnm.getLength(); i++){\n-                    attr = (Attr)nnm.item(i);\n-                    if (testAttr(attr, name)){\n-                        return attr;\n-                    }\n+            if (attr != null){\n+                return attr;\n+            }\n+            \n+            // This may mean that the parser does not support NS for\n+            // attributes, example - the version of Crimson bundled\n+            // with JDK 1.4.0\n+            NamedNodeMap nnm = element.getAttributes();\n+            for (int i = 0; i < nnm.getLength(); i++){\n+                attr = (Attr)nnm.item(i);\n+                if (testAttr(attr, name)){\n+                    return attr;\n                 }\n             }\n-            return attr;\n+            return null;\n         }\n         else {\n             return element.getAttributeNode(name.getName());\n--- a/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n+++ b/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java,v 1.6 2002/11/29 07:22:01 dmitri Exp $\n- * $Revision: 1.6 $\n- * $Date: 2002/11/29 07:22:01 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java,v 1.7 2002/12/02 01:12:19 dmitri Exp $\n+ * $Revision: 1.7 $\n+ * $Date: 2002/12/02 01:12:19 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * DOM, JDOM etc.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.6 $ $Date: 2002/11/29 07:22:01 $\n+ * @version $Revision: 1.7 $ $Date: 2002/12/02 01:12:19 $\n  */\n \n public abstract class XMLModelTestCase extends JXPathTestCase\n                 \"vendor/location/@missing\",\n                 null);\n \n+        // Missing attribute with namespace\n+        assertXPathValueLenient(context,\n+                \"vendor/location/@miss:missing\",\n+                null);\n+                \n         // Using attribute in a predicate\n         assertXPathValue(context,\n                 \"vendor/location[@id='101']//street\",", "timestamp": 1038791540, "metainfo": ""}