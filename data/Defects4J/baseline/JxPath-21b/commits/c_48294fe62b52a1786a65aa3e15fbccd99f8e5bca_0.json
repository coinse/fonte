{"sha": "48294fe62b52a1786a65aa3e15fbccd99f8e5bca", "log": "[JXPATH-104] filter out invalid property paths  ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/axes/SimplePathInterpreter.java\n+++ b/src/java/org/apache/commons/jxpath/ri/axes/SimplePathInterpreter.java\n         NodePointer childPointer =\n             createChildPointerForStep(parentPointer, step);\n \n+        if (childPointer == null) {\n+            return null;\n+        }\n         if (!childPointer.isActual()) {\n             // The property does not exist - create a null pointer.\n             return createNullPointer(\n     {\n         int axis = step.getAxis();\n         if (axis == Compiler.AXIS_CHILD || axis == Compiler.AXIS_ATTRIBUTE) {\n-            NodePointer childPointer;\n             QName name = ((NodeNameTest) step.getNodeTest()).getNodeName();\n             if (axis == Compiler.AXIS_ATTRIBUTE && isLangAttribute(name)) {\n-                childPointer = new LangAttributePointer(parentPointer);\n-            }\n-            else {\n-                childPointer = parentPointer.getPropertyPointer();\n+                return new LangAttributePointer(parentPointer);\n+            }\n+            if (parentPointer.isValidProperty(name)) {\n+                NodePointer childPointer = parentPointer.getPropertyPointer();\n                 ((PropertyPointer) childPointer).setPropertyName(\n-                    name.toString());\n+                        name.toString());\n                 childPointer.setAttribute(axis == Compiler.AXIS_ATTRIBUTE);\n-            }\n-            return childPointer;\n+                return childPointer;\n+            }\n+            //invalid property gets nothing, not even a NullPointer\n+            return null;\n         }\n         return parentPointer;\n     }", "timestamp": 1196888655, "metainfo": ""}