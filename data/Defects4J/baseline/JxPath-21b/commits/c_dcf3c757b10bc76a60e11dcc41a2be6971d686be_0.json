{"sha": "dcf3c757b10bc76a60e11dcc41a2be6971d686be", "log": "[JXPATH-128]  ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/model/dynabeans/DynaBeanPropertyPointer.java\n+++ b/src/java/org/apache/commons/jxpath/ri/model/dynabeans/DynaBeanPropertyPointer.java\n  */\n package org.apache.commons.jxpath.ri.model.dynabeans;\n \n+import java.util.ArrayList;\n import java.util.Arrays;\n \n import org.apache.commons.beanutils.DynaBean;\n  * @version $Revision$ $Date$\n  */\n public class DynaBeanPropertyPointer extends PropertyPointer {\n+    private static final String CLASS = \"class\";\n+\n     private DynaBean dynaBean;\n     private String name;\n     private String[] names;\n         /* @todo do something about the sorting - LIKE WHAT? - MJB */\n         if (names == null) {\n             DynaClass dynaClass = dynaBean.getDynaClass();\n-            DynaProperty[] properties = dynaClass.getDynaProperties();\n-            int count = properties.length;\n-            boolean hasClass = dynaClass.getDynaProperty(\"class\") != null;\n-            if (hasClass) {\n-                count--;       // Exclude \"class\" from properties\n-            }\n-            names = new String[count];\n-            for (int i = 0, j = 0; i < properties.length; i++) {\n-                String name = properties[i].getName();\n-                if (!hasClass || !name.equals(\"class\")) {\n-                    names[j++] = name;\n+            DynaProperty[] dynaProperties = dynaClass.getDynaProperties();\n+            ArrayList properties = new ArrayList(dynaProperties.length);\n+            for (int i = 0; i < dynaProperties.length; i++) {\n+                String name = dynaProperties[i].getName();\n+                if (!CLASS.equals(name)) {\n+                    properties.add(name);\n                 }\n             }\n+            names = (String[]) properties.toArray(new String[properties.size()]);\n             Arrays.sort(names);\n         }\n         return names;", "timestamp": 1233263887, "metainfo": ""}