{"sha": "fdfd50689b311e21a99b11380ea941df3d153802", "log": "Fixed the implementation of the boolean() function   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/ri/InfoSetUtil.java\n+++ b/src/java/org/apache/commons/jxpath/ri/InfoSetUtil.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/InfoSetUtil.java,v 1.4 2002/07/03 21:13:06 dmitri Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/07/03 21:13:06 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/ri/InfoSetUtil.java,v 1.5 2002/11/29 07:22:02 dmitri Exp $\n+ * $Revision: 1.5 $\n+ * $Date: 2002/11/29 07:22:02 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * Type conversions, XPath style.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.4 $ $Date: 2002/07/03 21:13:06 $\n+ * @version $Revision: 1.5 $ $Date: 2002/11/29 07:22:02 $\n  */\n public class InfoSetUtil {\n \n             return ((String)object).length() != 0;\n         }\n         else if (object instanceof NodePointer){\n-            return booleanValue(((NodePointer)object).getValue());\n+            return ((NodePointer)object).isActual();\n         }\n         else if (object == null){\n             return false;\n--- a/src/test/org/apache/commons/jxpath/ri/model/BeanModelTestCase.java\n+++ b/src/test/org/apache/commons/jxpath/ri/model/BeanModelTestCase.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/BeanModelTestCase.java,v 1.3 2002/11/26 01:33:35 dmitri Exp $\n- * $Revision: 1.3 $\n- * $Date: 2002/11/26 01:33:35 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/BeanModelTestCase.java,v 1.4 2002/11/29 07:22:01 dmitri Exp $\n+ * $Revision: 1.4 $\n+ * $Date: 2002/11/29 07:22:01 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * Abstract superclass for Bean access with JXPath.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.3 $ $Date: 2002/11/26 01:33:35 $\n+ * @version $Revision: 1.4 $ $Date: 2002/11/29 07:22:01 $\n  */\n \n public abstract class BeanModelTestCase extends JXPathTestCase\n         assertXPathValue(context, \n             \"lang('fr')\", \n             Boolean.FALSE);\n-            \n-        assertXPathValueIterator(\n-            context,\n-            \"beans[1]/strings[string-length() = 8]\",\n-            list(\"String 1\", \"String 2\", \"String 3\"));\n+    }\n+    \n+    public void testCoreFunctions(){\n             \n         assertXPathValue(context, \n             \"boolean(boolean)\", \n-            Boolean.FALSE);\n+            Boolean.TRUE);\n+\n+        assertXPathValue(context,\n+            \"boolean(boolean = false())\",\n+            Boolean.TRUE);\n             \n         assertXPathValue(\n             context,\n                 \"beans[int > 2]/name\",\n                 \"Name 2\");\n \n+        assertXPathValueIterator(\n+            context,\n+            \"beans[1]/strings[string-length() = 8]\",\n+            list(\"String 1\", \"String 2\", \"String 3\"));\n+\n         // use some fancy axis and the child axis in the predicate\n         assertXPathValueIterator(context,\n                 \"//self::node()[name = 'Name 0']/name\",\n--- a/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n+++ b/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java,v 1.5 2002/11/29 06:44:15 dmitri Exp $\n- * $Revision: 1.5 $\n- * $Date: 2002/11/29 06:44:15 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/test/org/apache/commons/jxpath/ri/model/XMLModelTestCase.java,v 1.6 2002/11/29 07:22:01 dmitri Exp $\n+ * $Revision: 1.6 $\n+ * $Date: 2002/11/29 07:22:01 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * DOM, JDOM etc.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.5 $ $Date: 2002/11/29 06:44:15 $\n+ * @version $Revision: 1.6 $ $Date: 2002/11/29 07:22:01 $\n  */\n \n public abstract class XMLModelTestCase extends JXPathTestCase\n                 \"vendor//promotion[../@stores = 'all']\",\n                 list(\"\"));\n     }\n-\n+    \n     public void testAxisParent() {\n         // parent::\n         assertXPathPointer(context,\n                 \"vendor/location/employeeCount and true()\",\n                 Boolean.TRUE);\n     }\n+    \n+    public void testBooleanFunction(){\n+        assertXPathValue(context,\n+            \"boolean(vendor//saleEnds[../@stores = 'all'])\",\n+            Boolean.TRUE);\n+\n+        assertXPathValue(context,\n+            \"boolean(vendor//promotion[../@stores = 'all'])\",\n+            Boolean.TRUE);\n+\n+        assertXPathValue(context,\n+            \"boolean(vendor//promotion[../@stores = 'some'])\",\n+            Boolean.FALSE);\n+     }    \n }", "timestamp": 1038554522, "metainfo": ""}