{"sha": "5daa84bffadb43f33f6719baaff3dfc20c91628a", "log": "Fixed this bug: if called setValue with an xpath with an index on a scalar property, the property would remain unchanged without an error message.   ", "commit": "\n--- a/src/java/org/apache/commons/jxpath/util/ValueUtils.java\n+++ b/src/java/org/apache/commons/jxpath/util/ValueUtils.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/util/ValueUtils.java,v 1.7 2002/08/10 01:19:09 dmitri Exp $\n- * $Revision: 1.7 $\n- * $Date: 2002/08/10 01:19:09 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//jxpath/src/java/org/apache/commons/jxpath/util/ValueUtils.java,v 1.8 2002/10/12 20:57:44 dmitri Exp $\n+ * $Revision: 1.8 $\n+ * $Date: 2002/10/12 20:57:44 $\n  *\n  * ====================================================================\n  * The Apache Software License, Version 1.1\n  * Collection and property access utilities.\n  *\n  * @author Dmitri Plotnikov\n- * @version $Revision: 1.7 $ $Date: 2002/08/10 01:19:09 $\n+ * @version $Revision: 1.8 $ $Date: 2002/10/12 20:57:44 $\n  */\n public class ValueUtils {\n     private static Map dynamicPropertyHandlerMap = new HashMap();\n             }\n         }\n         // We will fall through if there is no indexed read\n-        setValue(getValue(bean, propertyDescriptor), index, value);\n+        Object collection = getValue(bean, propertyDescriptor);\n+        if (isCollection(collection)){\n+            setValue(collection, index, value);\n+        }\n+        else if (index == 0){\n+            setValue(bean, propertyDescriptor, value);\n+        }\n+        else {\n+            throw new RuntimeException(\"Not a collection: \" + propertyDescriptor.getName());\n+        }\n     }\n \n     /**", "timestamp": 1034456264, "metainfo": ""}