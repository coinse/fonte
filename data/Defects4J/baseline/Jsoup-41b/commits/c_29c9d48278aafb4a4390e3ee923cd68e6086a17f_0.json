{"sha": "29c9d48278aafb4a4390e3ee923cd68e6086a17f", "log": "Updated Element.text() method to ensure <br> tags output as whitespace.", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n     }\n \n     private void text(StringBuilder accum) {\n+        if (tag.getName().equals(\"br\") && !TextNode.lastCharIsWhitespace(accum))\n+            accum.append(\" \");\n+        \n         for (Node child : childNodes) {\n             if (child instanceof TextNode) {\n                 TextNode textNode = (TextNode) child;\n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n         Document doc = Jsoup.parse(h);\n         assertEquals(\"code\\n\\ncode\", doc.text());\n         assertEquals(\"<pre><code>code\\n\\ncode</code></pre>\", doc.body().html());\n+    }\n+\n+    @Test public void testBrHasSpace() {\n+        Document doc = Jsoup.parse(\"<p>Hello<br>there</p>\");\n+        assertEquals(\"Hello there\", doc.text());\n+\n+        doc = Jsoup.parse(\"<p>Hello <br> there</p>\");\n+        assertEquals(\"Hello there\", doc.text());\n     }\n \n     @Test public void testGetSiblings() {", "timestamp": 1309605127, "metainfo": ""}