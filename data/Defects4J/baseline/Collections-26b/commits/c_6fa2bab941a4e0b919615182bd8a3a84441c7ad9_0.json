{"sha": "6fa2bab941a4e0b919615182bd8a3a84441c7ad9", "log": "Merging from -r468106:814127 of collections_jdk5_branch - namely where this code was generified; mostly in r738956.  Also see the following revisions:      ------------------------------------------------------------------------     r471201 | scolebourne | 2006-11-04 06:17:26 -0800 (Sat, 04 Nov 2006) | 1 line          Remove getBag() - use covariant decorated()     ------------------------------------------------------------------------   ", "commit": "\n--- a/src/java/org/apache/commons/collections/bag/UnmodifiableBag.java\n+++ b/src/java/org/apache/commons/collections/bag/UnmodifiableBag.java\n  *\n  * @author Stephen Colebourne\n  */\n-public final class UnmodifiableBag\n-        extends AbstractBagDecorator implements Unmodifiable, Serializable {\n+public final class UnmodifiableBag<E>\n+        extends AbstractBagDecorator<E> implements Unmodifiable, Serializable {\n \n     /** Serialization version */\n     private static final long serialVersionUID = -1873799975157099624L;\n      * @return an unmodifiable Bag\n      * @throws IllegalArgumentException if bag is null\n      */\n-    public static Bag decorate(Bag bag) {\n+    public static <E> Bag<E> decorate(Bag<E> bag) {\n         if (bag instanceof Unmodifiable) {\n             return bag;\n         }\n-        return new UnmodifiableBag(bag);\n+        return new UnmodifiableBag<E>(bag);\n     }\n \n     //-----------------------------------------------------------------------\n      * @param bag  the bag to decorate, must not be null\n      * @throws IllegalArgumentException if bag is null\n      */\n-    private UnmodifiableBag(Bag bag) {\n+    private UnmodifiableBag(Bag<E> bag) {\n         super(bag);\n     }\n \n      * @throws IOException\n      * @throws ClassNotFoundException\n      */\n+    @SuppressWarnings(\"unchecked\")\n     private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {\n         in.defaultReadObject();\n-        collection = (Collection) in.readObject();\n+        collection = (Collection<E>) in.readObject();\n     }\n \n     //-----------------------------------------------------------------------\n-    public Iterator iterator() {\n-        return UnmodifiableIterator.decorate(getCollection().iterator());\n+    public Iterator<E> iterator() {\n+        return UnmodifiableIterator.<E>decorate(decorated().iterator());\n     }\n \n-    public boolean add(Object object) {\n+    public boolean add(E object) {\n         throw new UnsupportedOperationException();\n     }\n \n-    public boolean addAll(Collection coll) {\n+    public boolean addAll(Collection<? extends E> coll) {\n         throw new UnsupportedOperationException();\n     }\n \n         throw new UnsupportedOperationException();\n     }\n \n-    public boolean removeAll(Collection coll) {\n+    public boolean removeAll(Collection<?> coll) {\n         throw new UnsupportedOperationException();\n     }\n \n-    public boolean retainAll(Collection coll) {\n+    public boolean retainAll(Collection<?> coll) {\n         throw new UnsupportedOperationException();\n     }\n \n     //-----------------------------------------------------------------------\n-    public boolean add(Object object, int count) {\n+    public boolean add(E object, int count) {\n         throw new UnsupportedOperationException();\n     }\n \n         throw new UnsupportedOperationException();\n     }\n \n-    public Set uniqueSet() {\n-        Set set = getBag().uniqueSet();\n-        return UnmodifiableSet.decorate(set);\n+    public Set<E> uniqueSet() {\n+        Set<E> set = decorated().uniqueSet();\n+        return UnmodifiableSet.<E>decorate(set);\n     }\n \n }", "timestamp": 1252994046, "metainfo": ""}