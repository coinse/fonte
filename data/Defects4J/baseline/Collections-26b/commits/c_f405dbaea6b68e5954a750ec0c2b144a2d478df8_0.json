{"sha": "f405dbaea6b68e5954a750ec0c2b144a2d478df8", "log": "Added a start and end index to the ArrayIterator. Unit tests also added and currently passing.   ", "commit": "\n--- a/src/java/org/apache/commons/collections/ArrayIterator.java\n+++ b/src/java/org/apache/commons/collections/ArrayIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/Attic/ArrayIterator.java,v 1.13 2002/06/12 03:59:15 mas Exp $\n- * $Revision: 1.13 $\n- * $Date: 2002/06/12 03:59:15 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/Attic/ArrayIterator.java,v 1.14 2002/06/20 02:51:18 bayard Exp $\n+ * $Revision: 1.14 $\n+ * $Date: 2002/06/20 02:51:18 $\n  *\n  * ====================================================================\n  *\n   * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n   * @author Mauricio S. Moura\n   * @author <a href=\"mailto:mas@apache.org\">Michael A. Smith</a>\n-  * @version $Revision: 1.13 $\n+  * @version $Revision: 1.14 $\n   */\n public class ArrayIterator implements Iterator {\n     \n      **/\n     public ArrayIterator(Object array) {\n         setArray( array );\n+    }\n+\n+    /**\n+     *  Construct an ArrayIterator that will iterate over the values in the\n+     *  specified array.\n+     *\n+     *  @param array the array to iterate over.\n+     *  @param start the index to start iterating at.\n+     *\n+     *  @exception IllegalArgumentException if <code>array</code> is not an\n+     *  array.\n+     *\n+     *  @exception NullPointerException \n+     *  if <code>array</code> is <code>null</code>\n+     **/\n+    public ArrayIterator(Object array, int start) {\n+        setArray( array );\n+        checkBound(start, \"start\");\n+        this.index = start;\n+    }\n+\n+    /**\n+     *  Construct an ArrayIterator that will iterate over the values in the\n+     *  specified array.\n+     *\n+     *  @param array the array to iterate over.\n+     *  @param start the index to start iterating at.\n+     *  @param end the index to finish iterating at.\n+     *\n+     *  @exception IllegalArgumentException if <code>array</code> is not an\n+     *  array.\n+     *\n+     *  @exception NullPointerException \n+     *  if <code>array</code> is <code>null</code>\n+     **/\n+    public ArrayIterator(Object array, int start, int end) {\n+        setArray( array );\n+        checkBound(start, \"start\");\n+        checkBound(end, \"end\");\n+        if(end <= start) {\n+            throw new IllegalArgumentException(\n+                \"End index must be greater than start index. \"\n+            );\n+        }\n+        this.index = start;\n+        this.length = end;\n+    }\n+\n+    private void checkBound(int bound, String type ) {\n+        if(bound > this.length) {\n+            throw new ArrayIndexOutOfBoundsException(\n+              \"Attempt to make an ArrayIterator that \"+type+\n+              \"s beyond the end of the array. \"\n+            );\n+        }\n+        if(bound < 0) {\n+            throw new ArrayIndexOutOfBoundsException(\n+              \"Attempt to make an ArrayIterator that \"+type+\n+              \"s before the start of the array. \"\n+            );\n+        }\n     }\n \n     // Iterator interface\n--- a/src/test/org/apache/commons/collections/TestArrayIterator2.java\n+++ b/src/test/org/apache/commons/collections/TestArrayIterator2.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestArrayIterator2.java,v 1.3 2002/03/19 00:05:16 morgand Exp $\n- * $Revision: 1.3 $\n- * $Date: 2002/03/19 00:05:16 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestArrayIterator2.java,v 1.4 2002/06/20 02:51:18 bayard Exp $\n+ * $Revision: 1.4 $\n+ * $Date: 2002/06/20 02:51:18 $\n  *\n  * ====================================================================\n  *\n  * \n  * @author Morgan Delagrange\n  * @author James Strachan\n- * @version $Id: TestArrayIterator2.java,v 1.3 2002/03/19 00:05:16 morgand Exp $\n+ * @version $Id: TestArrayIterator2.java,v 1.4 2002/06/20 02:51:18 bayard Exp $\n  */\n public class TestArrayIterator2 extends TestIterator {\n     \n         assertEquals(\"the count should be right using setArray(Object)\",\n                      count2,testArray.length);\n     }\n+\n+    public void testIndexedArray() {\n+        Iterator iter = new ArrayIterator(testArray,2);\n+        int count = 0;\n+        while (iter.hasNext()) {\n+            ++count;\n+            iter.next();\n+        }\n+\n+        assertEquals(\"the count should be right using ArrayIterator(Object,2) \",\n+                     count,testArray.length-2);\n+\n+        iter = new ArrayIterator(testArray,1,testArray.length-1);\n+        count = 0;\n+        while (iter.hasNext()) {\n+            ++count;\n+            iter.next();\n+        }\n+\n+        assertEquals(\"the count should be right using ArrayIterator(Object,1,\"+\n+                     (testArray.length-1)+\") \", count, testArray.length-2);\n+\n+        try {\n+            iter = new ArrayIterator(testArray,-1);\n+            fail(\"new ArrayIterator(Object,-1) should throw an \"+\n+                 \"ArrayIndexOutOfBoundsException\");\n+        } catch(ArrayIndexOutOfBoundsException aioobe) {\n+            // expected\n+        }\n+\n+        try {\n+            iter = new ArrayIterator(testArray,testArray.length+1);\n+            fail(\"new ArrayIterator(Object,length+1) should throw an \"+\n+                 \"ArrayIndexOutOfBoundsException\");\n+        } catch(ArrayIndexOutOfBoundsException aioobe) {\n+            // expected\n+        }\n+\n+        try {\n+            iter = new ArrayIterator(testArray,0,-1);\n+            fail(\"new ArrayIterator(Object,0,-1) should throw an \"+\n+                 \"ArrayIndexOutOfBoundsException\");\n+        } catch(ArrayIndexOutOfBoundsException aioobe) {\n+            // expected\n+        }\n+\n+        try {\n+            iter = new ArrayIterator(testArray,0,testArray.length+1);\n+            fail(\"new ArrayIterator(Object,0,length+1) should throw an \"+\n+                 \"ArrayIndexOutOfBoundsException\");\n+        } catch(ArrayIndexOutOfBoundsException aioobe) {\n+            // expected\n+        }\n+\n+        try {\n+            iter = new ArrayIterator(testArray,1,1);\n+            fail(\"new ArrayIterator(Object,1,1) should throw an \"+\n+                 \"IllegalArgumentException\");\n+        } catch(IllegalArgumentException iae) {\n+            // expected\n+        }\n+\n+        try {\n+            iter = new ArrayIterator(testArray,testArray.length-1,testArray.length-2);\n+            fail(\"new ArrayIterator(Object,length-2,length-1) should throw an \"+\n+                 \"IllegalArgumentException\");\n+        } catch(IllegalArgumentException iae) {\n+            // expected\n+        }\n+    }\n }\n ", "timestamp": 1024541478, "metainfo": ""}