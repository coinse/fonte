{"sha": "7b420d714506687c69236ef5b499856a1b1f8b80", "log": "Fix MultiHashMap to return null when nothing removed bug 32366, reported by Tad Marko   ", "commit": "\n--- a/src/java/org/apache/commons/collections/MultiHashMap.java\n+++ b/src/java/org/apache/commons/collections/MultiHashMap.java\n /*\n- *  Copyright 2001-2004 The Apache Software Foundation\n+ *  Copyright 2001-2005 The Apache Software Foundation\n  *\n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n  * <code>list</code> will be a list containing \"A\", \"B\", \"C\".\n  *\n  * @since Commons Collections 2.0\n- * @version $Revision: 1.20 $ $Date: 2004/06/09 22:11:54 $\n+ * @version $Revision: 1.21 $ $Date: 2005/01/04 00:13:25 $\n  * \n  * @author Christopher Berry\n  * @author James Strachan\n         if (valuesForKey == null) {\n             return null;\n         }\n-        valuesForKey.remove(item);\n-\n+        boolean removed = valuesForKey.remove(item);\n+        if (removed == false) {\n+            return null;\n+        }\n         // remove the list if it is now empty\n         // (saves space, and allows equals to work)\n         if (valuesForKey.isEmpty()){\n--- a/src/test/org/apache/commons/collections/TestMultiHashMap.java\n+++ b/src/test/org/apache/commons/collections/TestMultiHashMap.java\n /*\n- *  Copyright 2001-2004 The Apache Software Foundation\n+ *  Copyright 2001-2005 The Apache Software Foundation\n  *\n  *  Licensed under the Apache License, Version 2.0 (the \"License\");\n  *  you may not use this file except in compliance with the License.\n /**\n  * Unit Tests for <code>MultiHashMap</code>.\n  * \n- * @version $Revision: 1.20 $ $Date: 2004/06/09 22:11:54 $\n+ * @version $Revision: 1.21 $ $Date: 2005/01/04 00:13:25 $\n  *\n  * @author Unknown\n  */\n         assertEquals(1, newColl.size());\n     }\n \n+    public void testRemove_KeyItem() {\n+        MultiHashMap map = new MultiHashMap();\n+        map.put(\"A\", \"AA\");\n+        map.put(\"A\", \"AB\");\n+        map.put(\"A\", \"AC\");\n+        assertEquals(null, map.remove(\"C\", \"CA\"));\n+        assertEquals(null, map.remove(\"A\", \"AD\"));\n+        assertEquals(\"AC\", map.remove(\"A\", \"AC\"));\n+        assertEquals(\"AB\", map.remove(\"A\", \"AB\"));\n+        assertEquals(\"AA\", map.remove(\"A\", \"AA\"));\n+        assertEquals(new MultiHashMap(), map);\n+    }\n+\n }", "timestamp": 1104797605, "metainfo": ""}