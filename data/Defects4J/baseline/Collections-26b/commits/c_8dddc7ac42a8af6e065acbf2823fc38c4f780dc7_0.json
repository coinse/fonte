{"sha": "8dddc7ac42a8af6e065acbf2823fc38c4f780dc7", "log": "unit test to reproduce a SequencedHashMap 1.3 bug   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestMap.java\n+++ b/src/test/org/apache/commons/collections/TestMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.4 2002/02/20 22:38:46 morgand Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/02/20 22:38:46 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.5 2002/02/21 19:57:33 morgand Exp $\n+ * $Revision: 1.5 $\n+ * $Date: 2002/02/21 19:57:33 $\n  *\n  * ====================================================================\n  *\n package org.apache.commons.collections;\n \n import junit.framework.*;\n+import java.util.Collection;\n import java.util.Map;\n-import java.util.Collection;\n+import java.util.Set;\n \n /**\n  * Tests base {@link java.util.Map} methods and contracts.\n  * test case (method) your {@link Map} fails.\n  *\n  * @author Rodney Waldhoff\n- * @version $Id: TestMap.java,v 1.4 2002/02/20 22:38:46 morgand Exp $\n+ * @version $Id: TestMap.java,v 1.5 2002/02/21 19:57:33 morgand Exp $\n  */\n public abstract class TestMap extends TestObject {\n     public TestMap(String testName) {\n         assertTrue(\"size of Map should be 3, but was \" + map.size(), map.size() == 3);\n     }\n \n+    public void testEntrySetRemove() {\n+\n+        if ((this instanceof TestMap.EntrySetSupportsRemove) == false) {\n+            return;\n+        }\n+\n+        Map map = makeMap();\n+        map.put(\"1\",\"1\");\n+        map.put(\"2\",\"2\");\n+        map.put(\"3\",\"3\");\n+\n+        Object o = map.entrySet().iterator().next();\n+        // remove one of the key/value pairs\n+        Set set = map.entrySet();\n+        set.remove(o);\n+        assertTrue(set.size() == 2);\n+        // try to remove it again, to make sure \n+        // the Set is not confused by missing entries\n+        set.remove(o);\n+\n+        assertTrue(\"size of Map should be 2, but was \" + map.size(), map.size() == 2);\n+\n+    }\n+\n     /*\n         // optional operation\n public void testMapClear() {\n \n     }\n \n+    public interface EntrySetSupportsRemove {\n+\n+    }\n+\n }\n--- a/src/test/org/apache/commons/collections/TestSequencedHashMap.java\n+++ b/src/test/org/apache/commons/collections/TestSequencedHashMap.java\n  * @author <a href=\"mailto:hps@intermeta.de\">Henning P. Schmiedehausen</a>\n  * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n  */\n-public class TestSequencedHashMap extends TestMap implements TestMap.SupportsPut\n+public class TestSequencedHashMap extends TestMap \n+implements TestMap.SupportsPut, TestMap.EntrySetSupportsRemove\n {\n     /**\n      * The instance to experiment on.", "timestamp": 1014321453, "metainfo": ""}