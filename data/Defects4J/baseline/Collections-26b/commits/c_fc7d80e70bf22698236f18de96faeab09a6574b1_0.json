{"sha": "fc7d80e70bf22698236f18de96faeab09a6574b1", "log": "Modifying sizeIsEmpty such that null -> true and not an IllegalArgumentException as per Benjamin Bentmann's patch to COLLECTIONS-298  ", "commit": "\n--- a/src/java/org/apache/commons/collections/CollectionUtils.java\n+++ b/src/java/org/apache/commons/collections/CollectionUtils.java\n      * Note: This method is named to avoid clashing with\n      * {@link #isEmpty(Collection)}.\n      * \n-     * @param object  the object to get the size of, not null\n-     * @return true if empty\n-     * @throws IllegalArgumentException thrown if object is not recognised or null\n+     * @param object  the object to get the size of, may be null\n+     * @return true if empty or null\n+     * @throws IllegalArgumentException thrown if object is not recognised\n      * @since Commons Collections 3.2\n      */\n     public static boolean sizeIsEmpty(Object object) {\n-        if (object instanceof Collection) {\n+        if (object == null) {\n+            return true;\n+        } else if (object instanceof Collection) {\n             return ((Collection) object).isEmpty();\n         } else if (object instanceof Map) {\n             return ((Map) object).isEmpty();\n             return ((Iterator) object).hasNext() == false;\n         } else if (object instanceof Enumeration) {\n             return ((Enumeration) object).hasMoreElements() == false;\n-        } else if (object == null) {\n-            throw new IllegalArgumentException(\"Unsupported object type: null\");\n         } else {\n             try {\n                 return Array.getLength(object) == 0;\n--- a/src/test/org/apache/commons/collections/TestCollectionUtils.java\n+++ b/src/test/org/apache/commons/collections/TestCollectionUtils.java\n     }\n \n     //-----------------------------------------------------------------------\n+    public void testSizeIsEmpty_Null() {\n+        assertEquals(true, CollectionUtils.sizeIsEmpty(null));\n+    }\n     public void testSizeIsEmpty_List() {\n         List list = new ArrayList();\n         assertEquals(true, CollectionUtils.sizeIsEmpty(list));\n         assertEquals(true, CollectionUtils.sizeIsEmpty(it));\n     }\n     public void testSizeIsEmpty_Other() {\n-        try {\n-            CollectionUtils.sizeIsEmpty(null);\n-            fail(\"Expecting IllegalArgumentException\");\n-        } catch (IllegalArgumentException ex) {}\n         try {\n             CollectionUtils.sizeIsEmpty(\"not a list\");\n             fail(\"Expecting IllegalArgumentException\");", "timestamp": 1211096206, "metainfo": ""}