{"sha": "c2a8216febe9e03bae9c216b536e672158e6a737", "log": "Handle infinite loops in toString of Flat3Map   ", "commit": "\n--- a/src/java/org/apache/commons/collections/map/Flat3Map.java\n+++ b/src/java/org/apache/commons/collections/map/Flat3Map.java\n  * Do not use <code>Flat3Map</code> if the size is likely to grow beyond 3.\n  * \n  * @since Commons Collections 3.0\n- * @version $Revision: 1.14 $ $Date: 2004/03/31 23:18:56 $\n+ * @version $Revision: 1.15 $ $Date: 2004/04/09 14:42:36 $\n  *\n  * @author Stephen Colebourne\n  */\n      * Constructor copying elements from another map.\n      *\n      * @param map  the map to copy\n+     * @throws NullPointerException if the map is null\n      */\n     public Flat3Map(Map map) {\n         super();\n     /**\n      * Puts all the values from the specified map into this map.\n      * \n-     * @param map\n+     * @param map  the map to add\n+     * @throws NullPointerException if the map is null\n      */\n     public void putAll(Map map) {\n         int size = map.size();\n         buf.append('{');\n         switch (size) {  // drop through\n             case 3:\n-                buf.append(key3);\n+                buf.append((key3 == this ? \"(this Map)\" : key3));\n                 buf.append('=');\n-                buf.append(value3);\n+                buf.append((value3 == this ? \"(this Map)\" : value3));\n                 buf.append(',');\n             case 2:\n-                buf.append(key2);\n+                buf.append((key2 == this ? \"(this Map)\" : key2));\n                 buf.append('=');\n-                buf.append(value2);\n+                buf.append((value2 == this ? \"(this Map)\" : value2));\n                 buf.append(',');\n             case 1:\n-                buf.append(key1);\n+                buf.append((key1 == this ? \"(this Map)\" : key1));\n                 buf.append('=');\n-                buf.append(value1);\n+                buf.append((value1 == this ? \"(this Map)\" : value1));\n         }\n         buf.append('}');\n         return buf.toString();", "timestamp": 1081521756, "metainfo": ""}