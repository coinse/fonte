{"sha": "bc85bab7a53a1569b4740c5b142b4dae062062de", "log": "[COLLECTIONS-512] Fix equals method for TransformingComparator. Thanks to Cyrille Artho.  ", "commit": "\n--- a/src/main/java/org/apache/commons/collections4/comparators/TransformingComparator.java\n+++ b/src/main/java/org/apache/commons/collections4/comparators/TransformingComparator.java\n         }\n         if (object.getClass().equals(this.getClass())) {\n             final TransformingComparator<?, ?> comp = (TransformingComparator<?, ?>) object;\n-            return null == decorated ? null == comp.decorated : decorated.equals(comp.decorated) &&\n-                    null == transformer ? null == comp.transformer : transformer.equals(comp.transformer);\n+            return (null == decorated ? null == comp.decorated : decorated.equals(comp.decorated)) &&\n+                   (null == transformer ? null == comp.transformer : transformer.equals(comp.transformer));\n         }\n         return false;\n     }\n--- a/src/test/java/org/apache/commons/collections4/comparators/TransformingComparatorTest.java\n+++ b/src/test/java/org/apache/commons/collections4/comparators/TransformingComparatorTest.java\n import java.util.List;\n \n import org.apache.commons.collections4.ComparatorUtils;\n+import org.apache.commons.collections4.Transformer;\n import org.apache.commons.collections4.TransformerUtils;\n \n /**\n         return list;\n     }\n \n+    public void testEquals() {\n+        Transformer<String, String> t1 = TransformerUtils.nopTransformer();\n+        TransformingComparator<String, String> comp1 = new TransformingComparator<String, String>(t1);\n+        TransformingComparator<String, String> comp2 = new TransformingComparator<String, String>(t1, comp1);\n+\n+        // Checks the contract: equals-hashcode on comp1 and comp2\n+        assertTrue(\"Contract failed: equals-hashcode\",\n+                comp1.equals(comp2) ? comp1.hashCode() == comp2.hashCode() : true);\n+\n+        // Checks the contract: equals-hashcode on comp1 and comp2\n+        assertTrue(\"Contract failed: equals-hashcode\",\n+                comp2.equals(comp1) ? comp2.hashCode() == comp1.hashCode() : true);\n+    }\n+\n     @Override\n     public String getCompatibilityVersion() {\n         return \"4\";", "timestamp": 1397166929, "metainfo": ""}