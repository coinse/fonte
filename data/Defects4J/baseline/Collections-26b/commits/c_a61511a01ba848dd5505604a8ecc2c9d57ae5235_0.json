{"sha": "a61511a01ba848dd5505604a8ecc2c9d57ae5235", "log": "Increase testing of serialization   ", "commit": "\n--- a/src/test/org/apache/commons/collections/collection/AbstractTestCollection.java\n+++ b/src/test/org/apache/commons/collections/collection/AbstractTestCollection.java\n  */\n package org.apache.commons.collections.collection;\n \n+import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n+import java.io.ObjectInputStream;\n+import java.io.ObjectOutputStream;\n+import java.io.Serializable;\n import java.lang.reflect.Array;\n import java.util.ArrayList;\n import java.util.Arrays;\n  * you may still use this base set of cases.  Simply override the\n  * test case (method) your {@link Collection} fails.\n  *\n- * @version $Revision: 1.4 $ $Date: 2004/02/18 01:20:40 $\n+ * @version $Revision: 1.5 $ $Date: 2004/04/09 15:16:24 $\n  * \n  * @author Rodney Waldhoff\n  * @author Paul Jack\n         }\n     }\n \n+    public void testSerializeDeserializeThenCompare() throws Exception {\n+        Object obj = makeCollection();\n+        if (obj instanceof Serializable) {\n+            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n+            ObjectOutputStream out = new ObjectOutputStream(buffer);\n+            out.writeObject(obj);\n+            out.close();\n+\n+            ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray()));\n+            Object dest = in.readObject();\n+            in.close();\n+            assertEquals(\"obj != deserialize(serialize(obj)) - EMPTY Collection\", obj, dest);\n+        }\n+        obj = makeFullCollection();\n+        if (obj instanceof Serializable) {\n+            ByteArrayOutputStream buffer = new ByteArrayOutputStream();\n+            ObjectOutputStream out = new ObjectOutputStream(buffer);\n+            out.writeObject(obj);\n+            out.close();\n+\n+            ObjectInputStream in = new ObjectInputStream(new ByteArrayInputStream(buffer.toByteArray()));\n+            Object dest = in.readObject();\n+            in.close();\n+            assertEquals(\"obj != deserialize(serialize(obj)) - FULL Collection\", obj, dest);\n+        }\n+    }\n }", "timestamp": 1081523784, "metainfo": ""}