{"sha": "70dc4fb1c3ea7178c1c1731b95f2a6d8f9612e23", "log": "Make ListOrderedMap Serializable [18815]   ", "commit": "\n--- a/src/java/org/apache/commons/collections/map/ListOrderedMap.java\n+++ b/src/java/org/apache/commons/collections/map/ListOrderedMap.java\n  */\n package org.apache.commons.collections.map;\n \n+import java.io.IOException;\n+import java.io.ObjectInputStream;\n+import java.io.ObjectOutputStream;\n+import java.io.Serializable;\n import java.util.AbstractCollection;\n import java.util.AbstractSet;\n import java.util.ArrayList;\n  * original position in the iteration.\n  *\n  * @since Commons Collections 3.0\n- * @version $Revision: 1.13 $ $Date: 2004/04/01 22:18:12 $\n+ * @version $Revision: 1.14 $ $Date: 2004/04/07 23:17:25 $\n  * \n  * @author Henri Yandell\n  * @author Stephen Colebourne\n  */\n public class ListOrderedMap\n-        extends AbstractMapDecorator implements OrderedMap {\n+        extends AbstractMapDecorator\n+        implements OrderedMap, Serializable {\n+\n+    /** Serialization version */\n+    private static final long serialVersionUID = 2728177751851003750L;\n \n     /** Internal list to hold the sequence of objects */\n     protected final List insertOrder = new ArrayList();\n     protected ListOrderedMap(Map map) {\n         super(map);\n         insertOrder.addAll(getMap().keySet());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    /**\n+     * Write the map out using a custom routine.\n+     */\n+    private void writeObject(ObjectOutputStream out) throws IOException {\n+        out.defaultWriteObject();\n+        out.writeObject(map);\n+    }\n+\n+    /**\n+     * Read the map in using a custom routine.\n+     */\n+    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {\n+        in.defaultReadObject();\n+        map = (Map) in.readObject();\n     }\n \n     // Implement OrderedMap\n--- a/src/test/org/apache/commons/collections/map/TestListOrderedMap.java\n+++ b/src/test/org/apache/commons/collections/map/TestListOrderedMap.java\n  * implementation.\n  *\n  * @since Commons Collections 3.0\n- * @version $Revision: 1.8 $ $Date: 2004/02/18 01:20:38 $\n+ * @version $Revision: 1.9 $ $Date: 2004/04/07 23:17:25 $\n  * \n  * @author Henri Yandell\n  * @author Stephen Colebourne\n \n     }\n \n+    public String getCompatibilityVersion() {\n+        return \"3.1\";\n+    }\n+\n+//    public void testCreate() throws Exception {\n+//        resetEmpty();\n+//        writeExternalFormToDisk(\n+//            (java.io.Serializable) map,\n+//            \"D:/dev/collections/data/test/ListOrderedMap.emptyCollection.version3.1.obj\");\n+//        resetFull();\n+//        writeExternalFormToDisk(\n+//            (java.io.Serializable) map,\n+//            \"D:/dev/collections/data/test/ListOrderedMap.fullCollection.version3.1.obj\");\n+//    }\n }", "timestamp": 1081379845, "metainfo": ""}