{"sha": "43b14025a5920c6cf64c66c39e6c2662e35ab9d4", "log": "Update the MapUtils to output 'null' if null map bug 20740   ", "commit": "\n--- a/src/java/org/apache/commons/collections/MapUtils.java\n+++ b/src/java/org/apache/commons/collections/MapUtils.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/MapUtils.java,v 1.31 2003/08/31 17:26:43 scolebourne Exp $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/MapUtils.java,v 1.32 2003/08/31 17:52:13 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n  *  </ul>\n  *\n  * @since Commons Collections 1.0\n- * @version $Revision: 1.31 $ $Date: 2003/08/31 17:26:43 $\n+ * @version $Revision: 1.32 $ $Date: 2003/08/31 17:52:13 $\n  * \n  * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n  * @author <a href=\"mailto:nissim@nksystems.com\">Nissim Karpenstein</a>\n      * When the value is a Map, recursive behaviour occurs.\n      *\n      * @param out  the stream to print to, must not be null\n-     * @param label  the label to be applied to the output generated.  This \n-     *              may well be the key associated with this map within a \n-     *              surrounding map in which this is nested.  If the label is \n-     *              <code>null</code> then no label is output.\n-     * @param map  the map to print, may be <code>null</code>\n+     * @param label  The label to be used, may be <code>null</code>.\n+     *  If <code>null</code>, the label is not output.\n+     *  It typically represents the name of the property in a bean or similar.\n+     * @param map  The map to print, may be <code>null</code>.\n+     *  If <code>null</code>, the text 'null' is output.\n      * @throws NullPointerException if the stream is <code>null</code>\n      */\n     public static synchronized void verbosePrint(\n      * When the value is a Map, recursive behaviour occurs.\n      *\n      * @param out  the stream to print to, must not be null\n-     * @param label  the label to be applied to the output generated.  This \n-     *              may well be the key associated with this map within a \n-     *              surrounding map in which this is nested.  If the label is \n-     *              <code>null</code> then no label is output.\n-     * @param map  the map to print, may be <code>null</code>\n+     * @param label  The label to be used, may be <code>null</code>.\n+     *  If <code>null</code>, the label is not output.\n+     *  It typically represents the name of the property in a bean or similar.\n+     * @param map  The map to print, may be <code>null</code>.\n+     *  If <code>null</code>, the text 'null' is output.\n      * @throws NullPointerException if the stream is <code>null</code>\n      */\n     public static synchronized void debugPrint(\n      * value.\n      *\n      * @param out  the stream to print to\n-     * @param label  the label to be applied to the output generated.  This \n-     *              may well be the key associated with this map within a \n-     *              surrounding map in which this is nested.  If the label is \n-     *              <code>null</code>, then it is not output.\n-     * @param map  the map to print, may be <code>null</code>\n+     * @param label  The label to be used, may be <code>null</code>.\n+     *  If <code>null</code>, the label is not output.\n+     *  It typically represents the name of the property in a bean or similar.\n+     * @param map  The map to print, may be <code>null</code>.\n+     *  If <code>null</code>, the text 'null' is output.\n      * @param debug flag indicating whether type names should be output.\n      * @throws NullPointerException if the stream is <code>null</code>\n      */\n \n         printIndent(out);\n \n+        if (map == null) {\n+            if (label != null) {\n+                out.print(label);\n+                out.print(\" = \");\n+            }\n+            out.println(\"null\");\n+            return;\n+        }\n         if (label != null) {\n             out.print(label);\n-            out.print(\" = \");\n-            out.println(map == null ? \"null\" : \"\");\n-        }\n-        if (map == null) {\n-            return;\n+            out.println(\" = \");\n         }\n \n         printIndent(out);\n--- a/src/test/org/apache/commons/collections/TestMapUtils.java\n+++ b/src/test/org/apache/commons/collections/TestMapUtils.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestMapUtils.java,v 1.9 2003/08/31 17:28:43 scolebourne Exp $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestMapUtils.java,v 1.10 2003/08/31 17:52:13 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n /**\n  * Tests for MapUtils.\n  * \n- * @version $Revision: 1.9 $ $Date: 2003/08/31 17:28:43 $\n+ * @version $Revision: 1.10 $ $Date: 2003/08/31 17:52:13 $\n  * \n  * @author Stephen Colebourne\n  * @author Arun Mammen Thomas\n     public void testVerbosePrintNullLabelAndMap() {\n         final ByteArrayOutputStream out = new ByteArrayOutputStream();\n         final PrintStream outPrint = new PrintStream(out);\n+        \n+        outPrint.println(\"null\");\n+        final String EXPECTED_OUT = out.toString();\n+        out.reset();\n \n         MapUtils.verbosePrint(outPrint, null, null);\n-        assertEquals(\"\", out.toString());\n+        assertEquals(EXPECTED_OUT, out.toString());\n     }\n \n     public void testDebugPrintNullLabelAndMap() {\n         final ByteArrayOutputStream out = new ByteArrayOutputStream();\n         final PrintStream outPrint = new PrintStream(out);\n \n+        outPrint.println(\"null\");\n+        final String EXPECTED_OUT = out.toString();\n+        out.reset();\n+\n         MapUtils.debugPrint(outPrint, null, null);\n-        assertEquals(\"\", out.toString());\n+        assertEquals(EXPECTED_OUT, out.toString());\n     }\n \n     public void testVerbosePrintNullStream() {", "timestamp": 1062352333, "metainfo": ""}