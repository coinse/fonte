{"sha": "7cdc68b01b66a36d99081a227d7ab8c7ea80b5d5", "log": "Improve list iterator tests   ", "commit": "\n--- a/src/test/org/apache/commons/collections/iterators/AbstractTestListIterator.java\n+++ b/src/test/org/apache/commons/collections/iterators/AbstractTestListIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/AbstractTestListIterator.java,v 1.4 2003/11/18 22:37:13 scolebourne Exp $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/AbstractTestListIterator.java,v 1.5 2003/12/24 01:12:55 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n  * overriding the supportsXxx() methods if necessary.\n  * \n  * @since Commons Collections 3.0\n- * @version $Revision: 1.4 $ $Date: 2003/11/18 22:37:13 $\n+ * @version $Revision: 1.5 $ $Date: 2003/12/24 01:12:55 $\n  * \n  * @author Rodney Waldhoff\n  * @author Stephen Colebourne\n     public void testAdd() {\n         ListIterator it = makeFullListIterator();\n         \n+        Object addValue = addSetValue();\n         if (supportsAdd() == false) {\n             // check for UnsupportedOperationException if not supported\n             try {\n-                it.add(addSetValue());\n+                it.add(addValue);\n             } catch (UnsupportedOperationException ex) {}\n             return;\n         }\n         \n-        // add at start should be OK\n-        it.add(addSetValue());\n+        // add at start should be OK, added should be previous\n+        it = makeFullListIterator();\n+        it.add(addValue);\n+        assertSame(addValue, it.previous());\n+\n+        // add at start should be OK, added should not be next\n+        it = makeFullListIterator();\n+        it.add(addValue);\n+        assertTrue(addValue != it.next());\n \n         // add in middle and at end should be OK\n+        it = makeFullListIterator();\n         while (it.hasNext()) {\n             it.next();\n-            it.add(addSetValue());\n+            it.add(addValue);\n+            // check add OK\n+            assertSame(addValue, it.previous());\n+            it.next();\n         }        \n     }\n     ", "timestamp": 1072228375, "metainfo": ""}