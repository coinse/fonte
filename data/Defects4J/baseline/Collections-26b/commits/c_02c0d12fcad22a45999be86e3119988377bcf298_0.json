{"sha": "02c0d12fcad22a45999be86e3119988377bcf298", "log": "Enabled the new test framework in the following test classes:  - TestBeanMap  - TestCursorableLinkedList  - TestDoubleOrderedMap  - TestFastHashMap  - TestFastHashMap1  - TestFastTreeMap  - TestFastTreeMap1  - TestLRUMap  - TestSequencedHashMap  - TestSoftRefHashMap  Submitted by Paul Jack ( pjack at sfaf dot org ).  Note: TestAll does not contain reference to TestSoftRefHashMap, so this test is not automatically run.  If you run it manually, you will see many failures that are due to bug 9571.  Note: With this commit, there are four test failures if you are running with JDK 1.2.  This is due to a bug in the JDK's implementation of keySet on a HashMap which incorrectly returns false after removing a mapping which maps a key to a null value.  Incidently, this problem is very similar to the problem that existed on SequencedHashMap, filed as bug 9719, and fixed on June 9th. See: http://developer.java.sun.com/developer/bugParade/bugs/4286765.html   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestBeanMap.java\n+++ b/src/test/org/apache/commons/collections/TestBeanMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestBeanMap.java,v 1.5 2002/03/13 04:59:03 mas Exp $\n- * $Revision: 1.5 $\n- * $Date: 2002/03/13 04:59:03 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestBeanMap.java,v 1.6 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.6 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n     }\n \n     public static Test suite() {\n-        return new TestSuite(TestBeanMap.class);\n+        return BulkTest.makeSuite(TestBeanMap.class);\n     }\n \n /*\n                  \"CloneNotSupportedException when clone should succeed.\");\n         }\n     }\n+\n+    public String[] ignoredSimpleTests() {\n+        // Ignore the serialization tests on collection views.\n+        return new String[] {\n+         \"TestBeanMap.bulkTestMapEntrySet.testCanonicalEmptyCollectionExists\",\n+         \"TestBeanMap.bulkTestMapEntrySet.testCanonicalFullCollectionExists\",\n+         \"TestBeanMap.bulkTestMapKeySet.testCanonicalEmptyCollectionExists\",\n+         \"TestBeanMap.bulkTestMapKeySet.testCanonicalFullCollectionExists\",\n+         \"TestBeanMap.bulkTestMapValues.testCanonicalEmptyCollectionExists\",\n+         \"TestBeanMap.bulkTestMapValues.testCanonicalFullCollectionExists\",\n+         \"TestBeanMap.bulkTestMapEntrySet.testSimpleSerialization\",\n+         \"TestBeanMap.bulkTestMapKeySet.testSimpleSerialization\"\n+        };\n+    }\n }\n--- a/src/test/org/apache/commons/collections/TestCursorableLinkedList.java\n+++ b/src/test/org/apache/commons/collections/TestCursorableLinkedList.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestCursorableLinkedList.java,v 1.4 2002/02/25 23:51:24 morgand Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/02/25 23:51:24 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestCursorableLinkedList.java,v 1.5 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.5 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n \n /**\n  * @author Rodney Waldhoff\n- * @version $Id: TestCursorableLinkedList.java,v 1.4 2002/02/25 23:51:24 morgand Exp $\n+ * @version $Id: TestCursorableLinkedList.java,v 1.5 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestCursorableLinkedList extends TestList {\n     public TestCursorableLinkedList(String testName) {\n     }\n \n     public static Test suite() {\n-        return new TestSuite(TestCursorableLinkedList.class);\n+        return BulkTest.makeSuite(TestCursorableLinkedList.class);\n     }\n \n     public static void main(String args[]) {\n--- a/src/test/org/apache/commons/collections/TestDoubleOrderedMap.java\n+++ b/src/test/org/apache/commons/collections/TestDoubleOrderedMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestDoubleOrderedMap.java,v 1.4 2002/05/28 06:51:03 mas Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/05/28 06:51:03 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestDoubleOrderedMap.java,v 1.5 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.5 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n      * @return the test suite\n      */\n     public static Test suite() {\n-        return new TestSuite(TestDoubleOrderedMap.class);\n+        return BulkTest.makeSuite(TestDoubleOrderedMap.class);\n     }\n \n     /**\n--- a/src/test/org/apache/commons/collections/TestFastHashMap.java\n+++ b/src/test/org/apache/commons/collections/TestFastHashMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastHashMap.java,v 1.4 2002/02/26 00:31:32 morgand Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/02/26 00:31:32 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastHashMap.java,v 1.5 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.5 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n \n /**\n  * @author <a href=\"mailto:jvanzyl@apache.org\">Jason van Zyl</a>\n- * @version $Id: TestFastHashMap.java,v 1.4 2002/02/26 00:31:32 morgand Exp $\n+ * @version $Id: TestFastHashMap.java,v 1.5 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestFastHashMap extends TestHashMap\n {\n \n     public static Test suite()\n     {\n-        return new TestSuite(TestFastHashMap.class);\n+        return BulkTest.makeSuite(TestFastHashMap.class);\n     }\n \n     public static void main(String args[])\n--- a/src/test/org/apache/commons/collections/TestFastHashMap1.java\n+++ b/src/test/org/apache/commons/collections/TestFastHashMap1.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastHashMap1.java,v 1.2 2002/02/22 02:18:50 mas Exp $\n- * $Revision: 1.2 $\n- * $Date: 2002/02/22 02:18:50 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastHashMap1.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.3 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n  * Test FastHashMap in <strong>fast</strong> mode.\n  *\n  * @author <a href=\"mailto:jvanzyl@apache.org\">Jason van Zyl</a>\n- * @version $Id: TestFastHashMap1.java,v 1.2 2002/02/22 02:18:50 mas Exp $\n+ * @version $Id: TestFastHashMap1.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestFastHashMap1 extends TestFastHashMap\n {\n \n     public static Test suite()\n     {\n-        return new TestSuite(TestFastHashMap1.class);\n+        return BulkTest.makeSuite(TestFastHashMap1.class);\n     }\n \n     public static void main(String args[])\n--- a/src/test/org/apache/commons/collections/TestFastTreeMap.java\n+++ b/src/test/org/apache/commons/collections/TestFastTreeMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastTreeMap.java,v 1.5 2002/02/26 00:31:32 morgand Exp $\n- * $Revision: 1.5 $\n- * $Date: 2002/02/26 00:31:32 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastTreeMap.java,v 1.6 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.6 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n \n /**\n  * @author <a href=\"mailto:jvanzyl@apache.org\">Jason van Zyl</a>\n- * @version $Id: TestFastTreeMap.java,v 1.5 2002/02/26 00:31:32 morgand Exp $\n+ * @version $Id: TestFastTreeMap.java,v 1.6 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestFastTreeMap extends TestTreeMap\n {\n \n     public static Test suite()\n     {\n-        return new TestSuite(TestFastTreeMap.class);\n+        return BulkTest.makeSuite(TestFastTreeMap.class);\n     }\n \n     public static void main(String args[])\n--- a/src/test/org/apache/commons/collections/TestFastTreeMap1.java\n+++ b/src/test/org/apache/commons/collections/TestFastTreeMap1.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastTreeMap1.java,v 1.2 2002/02/22 02:18:50 mas Exp $\n- * $Revision: 1.2 $\n- * $Date: 2002/02/22 02:18:50 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestFastTreeMap1.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.3 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n  * Test FastTreeMap in <strong>fast</strong> mode.\n  *\n  * @author <a href=\"mailto:jvanzyl@apache.org\">Jason van Zyl</a>\n- * @version $Id: TestFastTreeMap1.java,v 1.2 2002/02/22 02:18:50 mas Exp $\n+ * @version $Id: TestFastTreeMap1.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestFastTreeMap1 extends TestFastTreeMap\n {\n \n     public static Test suite()\n     {\n-        return new TestSuite(TestFastTreeMap1.class);\n+        return BulkTest.makeSuite(TestFastTreeMap1.class);\n     }\n \n     public static void main(String args[])\n--- a/src/test/org/apache/commons/collections/TestLRUMap.java\n+++ b/src/test/org/apache/commons/collections/TestLRUMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestLRUMap.java,v 1.21 2002/05/28 06:51:03 mas Exp $\n- * $Revision: 1.21 $\n- * $Date: 2002/05/28 06:51:03 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/TestLRUMap.java,v 1.22 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.22 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n  * \n  * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n  * @author <a href=\"mailto:morgand@apache.org\">Morgan Delagrange</a>\n- * @version $Id: TestLRUMap.java,v 1.21 2002/05/28 06:51:03 mas Exp $\n+ * @version $Id: TestLRUMap.java,v 1.22 2002/06/18 05:35:58 mas Exp $\n  */\n public class TestLRUMap extends TestSequencedHashMap\n {\n     }\n \n     public static Test suite() {\n-        return new TestSuite(TestLRUMap.class);\n+        return BulkTest.makeSuite(TestLRUMap.class);\n     }\n \n     public static void main(String args[]) {\n--- a/src/test/org/apache/commons/collections/TestSequencedHashMap.java\n+++ b/src/test/org/apache/commons/collections/TestSequencedHashMap.java\n     }\n \n     public static Test suite() {\n-        return new TestSuite(TestSequencedHashMap.class);\n+        return BulkTest.makeSuite(TestSequencedHashMap.class);\n     }\n \n     // current versions of SequencedHashMap and subclasses are not\n--- a/src/test/org/apache/commons/collections/TestSoftRefHashMap.java\n+++ b/src/test/org/apache/commons/collections/TestSoftRefHashMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestSoftRefHashMap.java,v 1.2 2002/02/26 00:31:32 morgand Exp $\n- * $Revision: 1.2 $\n- * $Date: 2002/02/26 00:31:32 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestSoftRefHashMap.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n+ * $Revision: 1.3 $\n+ * $Date: 2002/06/18 05:35:58 $\n  *\n  * ====================================================================\n  *\n \n /**\n  * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n- * @version $Id: TestSoftRefHashMap.java,v 1.2 2002/02/26 00:31:32 morgand Exp $\n+ * @version $Id: TestSoftRefHashMap.java,v 1.3 2002/06/18 05:35:58 mas Exp $\n  */\n-public class TestSoftRefHashMap extends TestHashMap\n+public class TestSoftRefHashMap extends TestMap\n {\n     public TestSoftRefHashMap(String testName) {\n         super(testName);\n         return map;\n     }\n \n-    public void setUp() {\n-        map = (HashMap) makeEmptyMap();\n-    }\n-\n }", "timestamp": 1024378558, "metainfo": ""}