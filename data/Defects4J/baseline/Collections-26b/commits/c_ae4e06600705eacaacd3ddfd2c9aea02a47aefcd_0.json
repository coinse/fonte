{"sha": "ae4e06600705eacaacd3ddfd2c9aea02a47aefcd", "log": "Enable remove() in FilterIterator from Ralph Wagner   ", "commit": "\n--- a/src/test/org/apache/commons/collections/iterators/TestFilterIterator.java\n+++ b/src/test/org/apache/commons/collections/iterators/TestFilterIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/TestFilterIterator.java,v 1.4 2002/12/13 12:03:06 scolebourne Exp $\n- * $Revision: 1.4 $\n- * $Date: 2002/12/13 12:03:06 $\n- *\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/TestFilterIterator.java,v 1.5 2003/01/30 23:11:58 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n  *\n- * Copyright (c) 2001-2002 The Apache Software Foundation.  All rights\n+ * Copyright (c) 2001-2003 The Apache Software Foundation.  All rights\n  * reserved.\n  *\n  * Redistribution and use in source and binary forms, with or without\n  *    distribution.\n  *\n  * 3. The end-user documentation included with the redistribution, if\n- *    any, must include the following acknowlegement:\n+ *    any, must include the following acknowledgment:\n  *       \"This product includes software developed by the\n  *        Apache Software Foundation (http://www.apache.org/).\"\n- *    Alternately, this acknowlegement may appear in the software itself,\n- *    if and wherever such third-party acknowlegements normally appear.\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n  *\n  * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n  *    Foundation\" must not be used to endorse or promote products derived\n  *\n  * 5. Products derived from this software may not be called \"Apache\"\n  *    nor may \"Apache\" appear in their names without prior written\n- *    permission of the Apache Group.\n+ *    permission of the Apache Software Foundation.\n  *\n  * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n  * <http://www.apache.org/>.\n  *\n  */\n-\n-\n-// TestFilterIterator.java \n package org.apache.commons.collections.iterators;\n \n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Iterator;\n+import java.util.List;\n+import java.util.NoSuchElementException;\n+\n+import junit.framework.Test;\n import junit.framework.TestSuite;\n-import junit.framework.Test;\n-import java.util.Iterator;\n-import java.util.NoSuchElementException;\n+\n import org.apache.commons.collections.Predicate;\n \n /**\n+ * Test the filter iterator.\n  *\n  * @author  Jan Sorensen\n+ * @author Ralph Wagner\n+ * @version $Revision: 1.5 $ $Date: 2003/01/30 23:11:58 $\n  */\n public class TestFilterIterator extends TestIterator {\n \n     }\n \n     private String[] array;\n+    private List list;\n     private FilterIterator iterator;\n     /**\n      * Set up instance variables required by this test case.\n      * @return \n      */\n     public Iterator makeFullIterator() {\n-        return makePassThroughFilter(new ArrayIterator(array));\n+        array = new String[] { \"a\", \"b\", \"c\" };\n+        list = new ArrayList(Arrays.asList(array));\n+        return makePassThroughFilter(list.iterator());\n     }\n \n     public Object makeObject() {\n         return makeFullIterator();\n     }\n-\n-    public boolean supportsRemove() {\n-        return false;\n-    }\n-\n \n     public void testRepeatedHasNext() {\n         for (int i = 0; i <= array.length; i++) {\n             assertTrue(i == elements.length - 1 ? !iterator.hasNext() : iterator.hasNext());\n         }\n         verifyNoMoreElements();\n+\n+        // test removal\n+        initIterator();\n+        iterator.setPredicate(pred);\n+        if (iterator.hasNext()) {\n+            Object last = iterator.next();\n+            iterator.remove();\n+            assertTrue(\"Base of FilterIterator still contains removed element.\", !list.contains(last));\n+        }\n     }\n \n     private void initIterator() {\n-        iterator = makePassThroughFilter(new ArrayIterator(array));\n+        iterator = (FilterIterator) makeFullIterator();\n     }\n \n     /**\n--- a/src/test/org/apache/commons/collections/iterators/TestUniqueFilterIterator.java\n+++ b/src/test/org/apache/commons/collections/iterators/TestUniqueFilterIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/TestUniqueFilterIterator.java,v 1.2 2002/10/12 22:36:23 scolebourne Exp $\n- * $Revision: 1.2 $\n- * $Date: 2002/10/12 22:36:23 $\n- *\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/iterators/TestUniqueFilterIterator.java,v 1.3 2003/01/30 23:11:58 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n  *\n- * Copyright (c) 1999-2001 The Apache Software Foundation.  All rights\n+ * Copyright (c) 2001-2003 The Apache Software Foundation.  All rights\n  * reserved.\n  *\n  * Redistribution and use in source and binary forms, with or without\n  *    distribution.\n  *\n  * 3. The end-user documentation included with the redistribution, if\n- *    any, must include the following acknowlegement:\n+ *    any, must include the following acknowledgment:\n  *       \"This product includes software developed by the\n  *        Apache Software Foundation (http://www.apache.org/).\"\n- *    Alternately, this acknowlegement may appear in the software itself,\n- *    if and wherever such third-party acknowlegements normally appear.\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n  *\n  * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n  *    Foundation\" must not be used to endorse or promote products derived\n  *\n  * 5. Products derived from this software may not be called \"Apache\"\n  *    nor may \"Apache\" appear in their names without prior written\n- *    permission of the Apache Group.\n+ *    permission of the Apache Software Foundation.\n  *\n  * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n  * <http://www.apache.org/>.\n  *\n  */\n-\n package org.apache.commons.collections.iterators;\n \n import java.util.ArrayList;\n  * @author James Strachan\n  * @author Mauricio S. Moura\n  * @author Morgan Delagrange\n- * @version $Id: TestUniqueFilterIterator.java,v 1.2 2002/10/12 22:36:23 scolebourne Exp $\n+ * @author Stephen Colebourne\n+ * @version $Revision: 1.3 $ $Date: 2003/01/30 23:11:58 $\n  */\n public class TestUniqueFilterIterator extends TestIterator {\n \n         }\n     }\n \n-    public void testRemove() {\n-        Iterator iter = (Iterator) makeFullIterator();\n-\n-        try {\n-            iter.remove();\n-            fail(\"FilterIterator does not support the remove() method\");\n-        } catch (UnsupportedOperationException e) {\n-\n-        }\n-\n-    }\n-\n }\n ", "timestamp": 1043968318, "metainfo": ""}