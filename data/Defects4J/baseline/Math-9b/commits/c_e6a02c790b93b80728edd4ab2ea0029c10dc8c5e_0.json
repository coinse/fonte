{"sha": "e6a02c790b93b80728edd4ab2ea0029c10dc8c5e", "log": "replaced serialization to temporary file by serialization to byte array and simplified the error handling to remove a findbugs warning  ", "commit": "\n--- a/src/test/org/apache/commons/math/TestUtils.java\n+++ b/src/test/org/apache/commons/math/TestUtils.java\n \n package org.apache.commons.math;\n \n-import java.io.File;\n-import java.io.FileInputStream;\n-import java.io.FileOutputStream;\n+import java.io.ByteArrayInputStream;\n+import java.io.ByteArrayOutputStream;\n import java.io.IOException;\n import java.io.ObjectInputStream;\n import java.io.ObjectOutputStream;\n     }\n     \n     /**\n-     * Serializes an object to a temp file and then recovers the object from the file.\n+     * Serializes an object to a bytes array and then recovers the object from the bytes array.\n      * Returns the deserialized object.\n      * \n      * @param o  object to serialize and recover\n-     * @return  the recovered, deseriailized object\n-     */\n-    public static Object serializeAndRecover(Object o){\n-        \n-        Object result = null;\n-        File tmp = null;\n-        FileOutputStream fo = null;\n-        FileInputStream fi = null;\n-        \n+     * @return  the recovered, deserialized object\n+     */\n+    public static Object serializeAndRecover(Object o) {\n         try {\n             // serialize the Object\n-            tmp = File.createTempFile(\"test\",\".ser\");\n-            fo = new FileOutputStream(tmp);\n-            ObjectOutputStream so = new ObjectOutputStream(fo);\n+            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n+            ObjectOutputStream so = new ObjectOutputStream(bos);\n             so.writeObject(o);\n-            so.flush();\n-            fo.close();\n \n             // deserialize the Object\n-            fi = new FileInputStream(tmp);\n-            ObjectInputStream si = new ObjectInputStream(fi);  \n-            result = si.readObject();\n-        } catch (Exception ex) {\n-            \n-        } finally {\n-            if (fo != null) {\n-                try {\n-                    fo.close();\n-                } catch (IOException ex) {\n-                }\n-            }\n-\n-            if (fi != null) {\n-                try {\n-                    fi.close();\n-                } catch (IOException ex) {\n-                }\n-            }\n-        }\n-           \n-        if (tmp != null) {\n-            tmp.delete();\n-        }\n-        \n-        return result;\n+            ByteArrayInputStream bis = new ByteArrayInputStream(bos.toByteArray());\n+            ObjectInputStream si = new ObjectInputStream(bis);\n+            return si.readObject();\n+        } catch (IOException ioe) {\n+            return null;\n+        } catch (ClassNotFoundException cnfe) {\n+            return null;\n+        }\n     }\n     \n     /**", "timestamp": 1200174736, "metainfo": ""}