{"sha": "96ef54d716955b6e8f8e232813a0470d982ad1af", "log": "added comments in the code to explain use of real number equality tests JIRA: MATH-183  ", "commit": "\n--- a/src/java/org/apache/commons/math/analysis/BrentSolver.java\n+++ b/src/java/org/apache/commons/math/analysis/BrentSolver.java\n                 double r3 = y1 / y0;\n                 double p;\n                 double p1;\n+                // the equality test (x0 == x2) is intentional,\n+                // it is part of the original Brent's method,\n+                // it should NOT be replaced by proximity test\n                 if (x0 == x2) {\n                     // Linear interpolation.\n                     p = dx * r3;\n--- a/src/java/org/apache/commons/math/analysis/MullerSolver.java\n+++ b/src/java/org/apache/commons/math/analysis/MullerSolver.java\n \n             // Bisect if convergence is too slow. Bisection would waste\n             // our calculation of x, hopefully it won't happen often.\n+            // the real number equality test x == x1 is intentional and\n+            // completes the proximity tests above it\n             boolean bisect = (x < x1 && (x1 - x0) > 0.95 * (x2 - x0)) ||\n                              (x > x1 && (x2 - x1) > 0.95 * (x2 - x0)) ||\n                              (x == x1);\n             }\n             if (denominator != 0) {\n                 x = x2 - 2.0 * C * (x2 - x1) / denominator;\n-                // perturb x if it coincides with x1 or x2\n+                // perturb x if it exactly coincides with x1 or x2\n+                // the equality tests here are intentional\n                 while (x == x1 || x == x2) {\n                     x += absoluteAccuracy;\n                 }\n--- a/src/java/org/apache/commons/math/util/MathUtils.java\n+++ b/src/java/org/apache/commons/math/util/MathUtils.java\n             } else if (fraction < 0.5) {\n                 unscaled = Math.floor(unscaled);\n             } else {\n+                // The following equality test is intentional and needed for rounding purposes\n                 if (Math.floor(unscaled) / 2.0 == Math.floor(Math\n                     .floor(unscaled) / 2.0)) { // even\n                     unscaled = Math.floor(unscaled);", "timestamp": 1201970358, "metainfo": ""}