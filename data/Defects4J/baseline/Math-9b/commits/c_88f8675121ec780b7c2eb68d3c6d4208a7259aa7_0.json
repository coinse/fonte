{"sha": "88f8675121ec780b7c2eb68d3c6d4208a7259aa7", "log": "Improved efficiency.   ", "commit": "\n--- a/src/java/org/apache/commons/math/analysis/SplineInterpolator.java\n+++ b/src/java/org/apache/commons/math/analysis/SplineInterpolator.java\n  * The cubic spline interpolation algorithm implemented is as described in R.L. Burden, J.D. Faires, \n  * <u>Numerical Analysis</u>, 4th Ed., 1989, PWS-Kent, ISBN 0-53491-585-X, pp 126-131.\n  *\n- * @version $Revision: 1.16 $ $Date: 2004/04/27 04:37:58 $\n+ * @version $Revision: 1.17 $ $Date: 2004/05/22 19:59:22 $\n  *\n  */\n public class SplineInterpolator implements UnivariateRealInterpolator, Serializable {\n             }\n         }\n         \n+        // Differences between knot points\n         double h[] = new double[n];\n         for (int i = 0; i < n; i++) {\n             h[i] = x[i + 1] - x[i];\n         }\n         \n-        double alpha[] = new double[n];\n-        for (int i = 1; i < n; i++) {\n-            alpha[i] = 3d * (y[i + 1] * h[i - 1] - y[i] * (x[i + 1] - x[i - 1])+ y[i - 1] * h[i]) /\n-                            (h[i - 1] * h[i]);\n-        }\n-        \n-        double l[] = new double[n + 1];\n         double mu[] = new double[n];\n         double z[] = new double[n + 1];\n-        l[0] = 1d;\n         mu[0] = 0d;\n         z[0] = 0d;\n+        double g = 0;\n         for (int i = 1; i < n; i++) {\n-            l[i] = 2d * (x[i+1]  - x[i - 1]) - h[i - 1] * mu[i -1];\n-            mu[i] = h[i] / l[i];\n-            z[i] = (alpha[i] - h[i - 1] * z[i - 1]) / l[i];\n+            g = 2d * (x[i+1]  - x[i - 1]) - h[i - 1] * mu[i -1];\n+            mu[i] = h[i] / g;\n+            z[i] = (3d * (y[i + 1] * h[i - 1] - y[i] * (x[i + 1] - x[i - 1])+ y[i - 1] * h[i]) /\n+                    (h[i - 1] * h[i]) - h[i - 1] * z[i - 1]) / g;\n         }\n        \n         // cubic spline coefficients --  b is linear, c quadratic, d is cubic (original y's are constants)\n         double c[] = new double[n + 1];\n         double d[] = new double[n];\n         \n-        l[n] = 1d;\n         z[n] = 0d;\n         c[n] = 0d;\n         ", "timestamp": 1085255962, "metainfo": ""}