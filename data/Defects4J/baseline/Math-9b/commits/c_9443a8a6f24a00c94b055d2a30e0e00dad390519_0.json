{"sha": "9443a8a6f24a00c94b055d2a30e0e00dad390519", "log": "optimized matrix update loop  ", "commit": "\n--- a/src/java/org/apache/commons/math/ode/nonstiff/AdamsNordsieckTransformer.java\n+++ b/src/java/org/apache/commons/math/ode/nonstiff/AdamsNordsieckTransformer.java\n import org.apache.commons.math.linear.Array2DRowFieldMatrix;\n import org.apache.commons.math.linear.Array2DRowRealMatrix;\n import org.apache.commons.math.linear.DefaultFieldMatrixChangingVisitor;\n-import org.apache.commons.math.linear.DefaultRealMatrixChangingVisitor;\n import org.apache.commons.math.linear.FieldDecompositionSolver;\n import org.apache.commons.math.linear.FieldLUDecompositionImpl;\n import org.apache.commons.math.linear.FieldMatrix;\n import org.apache.commons.math.linear.MatrixUtils;\n-import org.apache.commons.math.linear.MatrixVisitorException;\n-import org.apache.commons.math.linear.RealMatrix;\n \n /** Transformer to Nordsieck vectors for Adams integrators.\n  * <p>This class i used by {@link AdamsBashforthIntegrator Adams-Bashforth} and\n      */\n     public void updateHighOrderDerivativesPhase2(final double[] start,\n                                                  final double[] end,\n-                                                 final RealMatrix highOrder) {\n-        highOrder.walkInOptimizedOrder(new DefaultRealMatrixChangingVisitor() {\n-            /** {@inheritDoc} */\n-            @Override\n-            public double visit(int row, int column, double value)\n-                throws MatrixVisitorException {\n-                return value + c1[row] * (start[column] - end[column]);\n-            }\n-        });\n+                                                 final Array2DRowRealMatrix highOrder) {\n+        final double[][] data = highOrder.getDataRef();\n+        for (int i = 0; i < data.length; ++i) {\n+            final double[] dataI = data[i];\n+            final double c1I = c1[i];\n+            for (int j = 0; j < dataI.length; ++j) {\n+                dataI[j] += c1I * (start[j] - end[j]);\n+            }\n+        }\n     }\n \n }", "timestamp": 1246481840, "metainfo": ""}