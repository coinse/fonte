{"sha": "6a6be729d16515d1286e3975dad80df1eb79ed2f", "log": "renamed AbstractStepInterpolatorTest into StepInterpolatorAbstractTest to match existing maven exclusion patterns  ", "commit": "\n--- a/src/test/org/apache/commons/math/ode/nonstiff/ClassicalRungeKuttaStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/ClassicalRungeKuttaStepInterpolatorTest.java\n import org.apache.commons.math.ode.IntegratorException;\n \n public class ClassicalRungeKuttaStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public ClassicalRungeKuttaStepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/DormandPrince54StepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/DormandPrince54StepInterpolatorTest.java\n import org.apache.commons.math.ode.sampling.StepInterpolator;\n \n public class DormandPrince54StepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public DormandPrince54StepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/DormandPrince853StepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/DormandPrince853StepInterpolatorTest.java\n import org.apache.commons.math.ode.sampling.StepInterpolator;\n \n public class DormandPrince853StepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public DormandPrince853StepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/EulerStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/EulerStepInterpolatorTest.java\n import org.apache.commons.math.ode.IntegratorException;\n \n public class EulerStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public EulerStepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/GillStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/GillStepInterpolatorTest.java\n import org.apache.commons.math.ode.nonstiff.GillIntegrator;\n \n public class GillStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public GillStepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/GraggBulirschStoerStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/GraggBulirschStoerStepInterpolatorTest.java\n import org.apache.commons.math.ode.sampling.StepInterpolator;\n \n public class GraggBulirschStoerStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public GraggBulirschStoerStepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/HighamHall54StepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/HighamHall54StepInterpolatorTest.java\n import org.apache.commons.math.ode.sampling.StepInterpolator;\n \n public class HighamHall54StepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public HighamHall54StepInterpolatorTest(String name) {\n     super(name);\n--- a/src/test/org/apache/commons/math/ode/nonstiff/MidpointStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/MidpointStepInterpolatorTest.java\n import org.apache.commons.math.ode.IntegratorException;\n \n public class MidpointStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public MidpointStepInterpolatorTest(String name) {\n     super(name);\n--- /dev/null\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/StepInterpolatorAbstractTest.java\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.math.ode.nonstiff;\n+\n+import org.apache.commons.math.ode.DerivativeException;\n+import org.apache.commons.math.ode.FirstOrderIntegrator;\n+import org.apache.commons.math.ode.IntegratorException;\n+import org.apache.commons.math.ode.sampling.StepHandler;\n+import org.apache.commons.math.ode.sampling.StepInterpolator;\n+\n+import junit.framework.TestCase;\n+\n+public class StepInterpolatorAbstractTest extends TestCase {\n+\n+    protected StepInterpolatorAbstractTest(String name) {\n+        super(name);\n+    }\n+\n+    protected void checkDerivativesConsistency(final FirstOrderIntegrator integrator,\n+                                               final TestProblemAbstract problem,\n+                                               final double threshold)\n+        throws DerivativeException, IntegratorException {\n+        integrator.setStepHandler(new StepHandler() {\n+\n+            private static final long serialVersionUID = 2462564234755682953L;\n+\n+            public boolean requiresDenseOutput() {\n+                return true;\n+            }\n+\n+            public void handleStep(StepInterpolator interpolator, boolean isLast)\n+                throws DerivativeException {\n+\n+                final double h = 0.001 * (interpolator.getCurrentTime() - interpolator.getPreviousTime());\n+                final double t = interpolator.getCurrentTime() - 300 * h;\n+\n+                interpolator.setInterpolatedTime(t - 4 * h);\n+                final double[] yM4h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t - 3 * h);\n+                final double[] yM3h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t - 2 * h);\n+                final double[] yM2h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t - h);\n+                final double[] yM1h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t + h);\n+                final double[] yP1h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t + 2 * h);\n+                final double[] yP2h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t + 3 * h);\n+                final double[] yP3h = interpolator.getInterpolatedState().clone();\n+                interpolator.setInterpolatedTime(t + 4 * h);\n+                final double[] yP4h = interpolator.getInterpolatedState().clone();\n+\n+                interpolator.setInterpolatedTime(t);\n+                final double[] yDot = interpolator.getInterpolatedDerivatives();\n+\n+                for (int i = 0; i < yDot.length; ++i) {\n+                    final double approYDot = ( -3 * (yP4h[i] - yM4h[i]) +\n+                                               32 * (yP3h[i] - yM3h[i]) +\n+                                             -168 * (yP2h[i] - yM2h[i]) +\n+                                              672 * (yP1h[i] - yM1h[i])) / (840 * h);\n+                    assertEquals(approYDot, yDot[i], threshold);\n+                }\n+\n+            }\n+\n+            public void reset() {\n+            }\n+\n+        });\n+\n+        integrator.integrate(problem,\n+                             problem.getInitialTime(), problem.getInitialState(),\n+                             problem.getFinalTime(), new double[problem.getDimension()]);\n+\n+    }\n+}\n+\n--- a/src/test/org/apache/commons/math/ode/nonstiff/ThreeEighthesStepInterpolatorTest.java\n+++ b/src/test/org/apache/commons/math/ode/nonstiff/ThreeEighthesStepInterpolatorTest.java\n import org.apache.commons.math.ode.IntegratorException;\n \n public class ThreeEighthesStepInterpolatorTest\n-  extends AbstractStepInterpolatorTest {\n+  extends StepInterpolatorAbstractTest {\n \n   public ThreeEighthesStepInterpolatorTest(String name) {\n     super(name);", "timestamp": 1215113518, "metainfo": ""}