{"sha": "55a5e54455c21833b407fbd52b5e66888f211ec7", "log": "Fixed threading issues with MathException and MathRuntimeException Jira: MATH-253  ", "commit": "\n--- a/src/java/org/apache/commons/math/MathException.java\n+++ b/src/java/org/apache/commons/math/MathException.java\n public class MathException extends Exception {\n     \n     /** Serializable version identifier. */\n-    private static final long serialVersionUID = -2803873247432645339L;\n+    private static final long serialVersionUID = -9004610152740737812L;\n \n-    /** Cache for resources bundle. */\n-    private static ResourceBundle cachedResources = null;\n- \n     /**\n      * Pattern used to build the message.\n      */\n      */\n     private static String translate(String s, Locale locale) {\n         try {\n-            if ((cachedResources == null) || (! cachedResources.getLocale().equals(locale))) {\n-                // caching the resource bundle\n-                cachedResources =\n+            ResourceBundle bundle =\n                     ResourceBundle.getBundle(\"org.apache.commons.math.MessagesResources\", locale);\n-            }\n-\n-            if (cachedResources.getLocale().getLanguage().equals(locale.getLanguage())) {\n+            if (bundle.getLocale().getLanguage().equals(locale.getLanguage())) {\n                 // the value of the resource is the translated string\n-                return cachedResources.getString(s);\n+                return bundle.getString(s);\n             }\n             \n         } catch (MissingResourceException mre) {\n--- a/src/java/org/apache/commons/math/MathRuntimeException.java\n+++ b/src/java/org/apache/commons/math/MathRuntimeException.java\n public class MathRuntimeException extends RuntimeException {\n     \n     /** Serializable version identifier. */\n-    private static final long serialVersionUID = 4184290229453587356L;\n-\n-    /** Cache for resources bundle. */\n-    private static ResourceBundle cachedResources = null;\n- \n+    private static final long serialVersionUID = -5128983364075381060L;\n+\n     /**\n      * Pattern used to build the message.\n      */\n      */\n     private static String translate(final String s, final Locale locale) {\n         try {\n-            if ((cachedResources == null) || (! cachedResources.getLocale().equals(locale))) {\n-                // caching the resource bundle\n-                cachedResources =\n+            ResourceBundle bundle =\n                     ResourceBundle.getBundle(\"org.apache.commons.math.MessagesResources\", locale);\n-            }\n-\n-            if (cachedResources.getLocale().getLanguage().equals(locale.getLanguage())) {\n+            if (bundle.getLocale().getLanguage().equals(locale.getLanguage())) {\n                 // the value of the resource is the translated string\n-                return cachedResources.getString(s);\n+                return bundle.getString(s);\n             }\n             \n         } catch (MissingResourceException mre) {", "timestamp": 1238945586, "metainfo": ""}