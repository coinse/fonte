{"sha": "e7d299124f59c1cb6aa61274e24c47544ead40ef", "log": "Initial commit of tests replacing TestStatisticTest.   ", "commit": "\n--- /dev/null\n+++ b/src/test/org/apache/commons/math/stat/inference/ChiSquareTestTest.java\n+/*\n+ * Copyright 2004 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.math.stat.inference;\n+\n+import junit.framework.Test;\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+\n+/**\n+ * Test cases for the ChiSquareTestImpl class.\n+ *\n+ * @version $Revision: 1.1 $ $Date: 2004/05/03 03:04:54 $\n+ */\n+\n+public final class ChiSquareTestTest extends TestCase {\n+\n+    private ChiSquareTestImpl testStatistic = new ChiSquareTestImpl();\n+\n+    public ChiSquareTestTest(String name) {\n+        super(name);\n+    }\n+\n+    public void setUp() {\n+    }\n+\n+    public static Test suite() {\n+        TestSuite suite = new TestSuite(ChiSquareTestTest.class);\n+        suite.setName(\"TestStatistic Tests\");\n+        return suite;\n+    }\n+\n+    public void testChiSquare() throws Exception {\n+ \n+        // Target values computed using R version 1.8.1 \n+        // Some assembly required ;-)  \n+        //      Use sum((obs - exp)^2/exp) for the chi-square statistic and\n+        //      1 - pchisq(sum((obs - exp)^2/exp), obs.length - 1) for the p-value\n+        \n+        long[] observed = {10, 9, 11};\n+        double[] expected = {10, 10, 10};\n+        assertEquals(\"chi-square statistic\", 0.2,  testStatistic.chiSquare(expected, observed), 10E-12);\n+        assertEquals(\"chi-square p-value\", 0.9048374, testStatistic.chiSquareTest(expected, observed), 1E-7);\n+        \n+        long[] observed1 = { 500, 623, 72, 70, 31 };\n+        double[] expected1 = { 485, 541, 82, 61, 37 };\n+        assertEquals( \"chi-square test statistic\", 16.41311, testStatistic.chiSquare(expected1, observed1), 1E-5);\n+        assertEquals(\"chi-square p-value\", 0.002512096, testStatistic.chiSquareTest(expected1, observed1), 1E-9);\n+        assertTrue(\"chi-square test reject\", testStatistic.chiSquareTest(expected1, observed1, 0.003));\n+        assertTrue(\"chi-square test accept\", !testStatistic.chiSquareTest(expected1, observed1, 0.002));\n+\n+        try {\n+            testStatistic.chiSquareTest(expected1, observed1, 95);\n+            fail(\"alpha out of range, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }   \n+        \n+        long[] tooShortObs = { 0 };\n+        double[] tooShortEx = { 1 };\n+        try {\n+            testStatistic.chiSquare(tooShortEx, tooShortObs);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+\n+        long[] unMatchedObs = { 0, 1, 2, 3 };\n+        double[] unMatchedEx = { 1, 1, 2 };\n+        try {\n+            testStatistic.chiSquare(unMatchedEx, unMatchedObs);\n+            fail(\"arrays have different lengths, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+        expected[0] = 0;\n+        try {\n+            testStatistic.chiSquareTest(expected, observed, .01);\n+            fail(\"bad expected count, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }  \n+    }\n+\n+    public void testChiSquareIndependence() throws Exception {\n+        \n+        // Target values computed using R version 1.8.1 \n+        \n+        long[][] counts = { {40, 22, 43}, {91, 21, 28}, {60, 10, 22}};\n+        assertEquals( \"chi-square test statistic\", 22.709, testStatistic.chiSquare(counts), 1E-3);\n+        assertEquals(\"chi-square p-value\", 0.0001448, testStatistic.chiSquareTest(counts), 1E-7);\n+        assertTrue(\"chi-square test reject\", testStatistic.chiSquareTest(counts, 0.0002));\n+        assertTrue(\"chi-square test accept\", !testStatistic.chiSquareTest(counts, 0.0001));    \n+        \n+        long[][] counts2 = {{10, 15}, {30, 40}, {60, 90} };\n+        assertEquals( \"chi-square test statistic\", 0.169, testStatistic.chiSquare(counts2), 1E-3);\n+        assertEquals(\"chi-square p-value\", 0.919, testStatistic.chiSquareTest(counts2), 1E-3);\n+        assertTrue(\"chi-square test accept\", !testStatistic.chiSquareTest(counts2, 0.1)); \n+        \n+        // ragged input array\n+        long[][] counts3 = { {40, 22, 43}, {91, 21, 28}, {60, 10}};\n+        try {\n+            testStatistic.chiSquare(counts3);\n+            fail(\"Expecting IllegalArgumentException\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+        \n+        // insufficient data\n+        long[][] counts4 = {{40, 22, 43}};\n+        try {\n+            testStatistic.chiSquare(counts4);\n+            fail(\"Expecting IllegalArgumentException\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }      \n+    }    \n+}\n--- /dev/null\n+++ b/src/test/org/apache/commons/math/stat/inference/TTestTest.java\n+/*\n+ * Copyright 2004 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.math.stat.inference;\n+\n+import junit.framework.Test;\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+\n+import org.apache.commons.math.stat.univariate.SummaryStatistics;\n+/**\n+ * Test cases for the TTestImpl class.\n+ *\n+ * @version $Revision: 1.1 $ $Date: 2004/05/03 03:04:54 $\n+ */\n+\n+public final class TTestTest extends TestCase {\n+\n+    private TTestImpl testStatistic = new TTestImpl();\n+\n+    public TTestTest(String name) {\n+        super(name);\n+    }\n+\n+    public void setUp() {\n+    }\n+\n+    public static Test suite() {\n+        TestSuite suite = new TestSuite(TTestTest.class);\n+        suite.setName(\"TestStatistic Tests\");\n+        return suite;\n+    }\n+\n+    public void testT() throws Exception {\n+        double[] observed =\n+            {93.0, 103.0, 95.0, 101.0, 91.0, 105.0, 96.0, 94.0, 101.0,  88.0, 98.0, 94.0, 101.0, 92.0, 95.0 };\n+        double mu = 100.0;\n+        SummaryStatistics sampleStats = null;\n+        sampleStats = SummaryStatistics.newInstance();\n+        for (int i = 0; i < observed.length; i++) {\n+            sampleStats.addValue(observed[i]);\n+        }\n+\n+        assertEquals(\"t statistic\", -2.82, testStatistic.t(mu, observed), 10E-3);\n+        assertEquals(\"t statistic\", -2.82, testStatistic.t(mu, sampleStats), 10E-3);\n+\n+        double[] nullObserved = null;\n+        try {\n+            testStatistic.t(mu, nullObserved);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+\n+        SummaryStatistics nullStats = null;   \n+        try {\n+            testStatistic.t(mu, nullStats);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+\n+        double[] emptyObs = {};\n+        try {\n+            testStatistic.t(mu, emptyObs);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+\n+        SummaryStatistics emptyStats =SummaryStatistics.newInstance();   \n+        try {\n+            testStatistic.t(mu, emptyStats);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+\n+        double[] tooShortObs = { 1.0 };\n+        try {\n+            testStatistic.t(mu, tooShortObs);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // exptected\n+        }\n+        try {\n+            testStatistic.tTest(mu, tooShortObs);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+           // expected\n+        }  \n+\n+        SummaryStatistics tooShortStats = SummaryStatistics.newInstance();     \n+        tooShortStats.addValue(0d);\n+        tooShortStats.addValue(2d);\n+        try {\n+            testStatistic.t(mu, tooShortStats);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // exptected\n+        }\n+        try {\n+            testStatistic.tTest(mu, tooShortStats);\n+            fail(\"arguments too short, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // exptected\n+        }  \n+\n+        double[] oneSidedP =\n+            {2d, 0d, 6d, 6d, 3d, 3d, 2d, 3d, -6d, 6d, 6d, 6d, 3d, 0d, 1d, 1d, 0d, 2d, 3d, 3d };\n+        SummaryStatistics oneSidedPStats = SummaryStatistics.newInstance();    \n+        for (int i = 0; i < oneSidedP.length; i++) {\n+            oneSidedPStats.addValue(oneSidedP[i]);\n+        }\n+        assertEquals(\"one sample t stat\", 3.86, testStatistic.t(0d, oneSidedP), 0.01);\n+        assertEquals(\"one sample t stat\", 3.86, testStatistic.t(0d, oneSidedPStats), 0.01);\n+        assertEquals(\"one sample p value\", 0.00052, testStatistic.tTest(0d, oneSidedP) / 2d, 10E-5);\n+        assertEquals(\"one sample p value\", 0.00052, testStatistic.tTest(0d, oneSidedPStats) / 2d, 10E-5);\n+        assertTrue(\"one sample t-test reject\", testStatistic.tTest(0d, oneSidedP, 0.01));\n+        assertTrue(\"one sample t-test reject\", testStatistic.tTest(0d, oneSidedPStats, 0.01));\n+        assertTrue(\"one sample t-test accept\", !testStatistic.tTest(0d, oneSidedP, 0.0001));\n+        assertTrue(\"one sample t-test accept\", !testStatistic.tTest(0d, oneSidedPStats, 0.0001));\n+         \n+        try {\n+            testStatistic.tTest(0d, oneSidedP, 95);\n+            fail(\"alpha out of range, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // exptected\n+        }  \n+        \n+        try {\n+            testStatistic.tTest(0d, oneSidedPStats, 95);\n+            fail(\"alpha out of range, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }  \n+\n+        double[] sample1 = { 7d, -4d, 18d, 17d, -3d, -5d, 1d, 10d, 11d, -2d };\n+        double[] sample2 = { -1d, 12d, -1d, -3d, 3d, -5d, 5d, 2d, -11d, -1d, -3d };\n+        SummaryStatistics sampleStats1 = SummaryStatistics.newInstance();  \n+        for (int i = 0; i < sample1.length; i++) {\n+            sampleStats1.addValue(sample1[i]);\n+        }\n+        SummaryStatistics sampleStats2 = SummaryStatistics.newInstance();    \n+        for (int i = 0; i < sample2.length; i++) {\n+            sampleStats2.addValue(sample2[i]);\n+        }\n+         \n+        // Target comparison values computed using R version 1.8.1 (Linux version)\n+        assertEquals(\"two sample t stat\", 1.6037, testStatistic.t(sample1, sample2), 10E-4);\n+        assertEquals(\"two sample t stat\", 1.6037, testStatistic.t(sampleStats1, sampleStats2), 10E-4);\n+        assertEquals(\"two sample p value\", 0.0644, testStatistic.tTest(sample1, sample2) / 2d, 10E-4);\n+        assertEquals(\"two sample p value\", 0.0644, testStatistic.tTest(sampleStats1, sampleStats2) / 2d, 10E-4);\n+        \n+        assertTrue(\"two sample t-test reject\", testStatistic.tTest(sample1, sample2, 0.2));\n+        assertTrue(\"two sample t-test reject\", testStatistic.tTest(sampleStats1, sampleStats2, 0.2));\n+        assertTrue(\"two sample t-test accept\", !testStatistic.tTest(sample1, sample2, 0.1));\n+        assertTrue(\"two sample t-test accept\", !testStatistic.tTest(sampleStats1, sampleStats2, 0.1));\n+     \n+        try {\n+            testStatistic.tTest(sample1, sample2, 95);\n+            fail(\"alpha out of range, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // exptected\n+        } \n+        \n+        try {\n+            testStatistic.tTest(sampleStats1, sampleStats2, 95);\n+            fail(\"alpha out of range, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected \n+        }  \n+        \n+        try {\n+            testStatistic.tTest(sample1, tooShortObs, .01);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }  \n+        \n+        try {\n+            testStatistic.tTest(sampleStats1, tooShortStats, .01);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }  \n+        \n+        try {\n+            testStatistic.tTest(sample1, tooShortObs);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+           // expected\n+        }  \n+        \n+        try {\n+            testStatistic.tTest(sampleStats1, tooShortStats);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }  \n+        \n+        try {\n+            testStatistic.t(sample1, tooShortObs);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+            // expected\n+        }\n+        \n+        try {\n+            testStatistic.t(sampleStats1, tooShortStats);\n+            fail(\"insufficient data, IllegalArgumentException expected\");\n+        } catch (IllegalArgumentException ex) {\n+           // expected\n+        }\n+    }\n+}", "timestamp": 1083553494, "metainfo": ""}