{"sha": "14c336d5881b97740fc8656aca514c8ca49204ea", "log": "Fixed implementation of EmpiricalDistributionImpl#getUpperBounds to match interface contract.  Added getGeneratorUpperBounds method to EmpiricalDistributionImpl providing previous behavior.  Jira: Math-298  ", "commit": "\n--- a/src/main/java/org/apache/commons/math/random/EmpiricalDistribution.java\n+++ b/src/main/java/org/apache/commons/math/random/EmpiricalDistribution.java\n     /**\n      * Returns the array of upper bounds for the bins.  Bins are: <br/>\n      * [min,upperBounds[0]],(upperBounds[0],upperBounds[1]],...,\n-     *  (upperBounds[binCount-1],max].\n+     *  (upperBounds[binCount-2], upperBounds[binCount-1] = max].\n      *\n      * @return array of bin upper bounds\n      */\n--- a/src/test/java/org/apache/commons/math/random/EmpiricalDistributionTest.java\n+++ b/src/test/java/org/apache/commons/math/random/EmpiricalDistributionTest.java\n           (empiricalDistribution2.getSampleStats().getStandardDeviation(),\n                 1.0173699343977738,10E-7);\n \n-        double[] bounds = empiricalDistribution2.getUpperBounds();\n+        double[] bounds = ((EmpiricalDistributionImpl) empiricalDistribution2).getGeneratorUpperBounds();\n         assertEquals(bounds.length, 100);\n         assertEquals(bounds[99], 1.0, 10e-12);\n \n         } catch (Exception e) {\n             fail(\"wrong exception caught\");\n         }\n+    }\n+    \n+    /**\n+     * MATH-298\n+     */\n+    public void testGetBinUpperBounds() {\n+        double[] testData = {0, 1, 1, 2, 3, 4, 4, 5, 6, 7, 8, 9, 10};\n+        EmpiricalDistributionImpl dist = new EmpiricalDistributionImpl(5);\n+        dist.load(testData);\n+        double[] expectedBinUpperBounds = {2, 4, 6, 8, 10};\n+        double[] expectedGeneratorUpperBounds = {4d/13d, 7d/13d, 9d/13d, 11d/13d, 1};\n+        double tol = 10E-12;\n+        TestUtils.assertEquals(expectedBinUpperBounds, dist.getUpperBounds(), tol);\n+        TestUtils.assertEquals(expectedGeneratorUpperBounds, dist.getGeneratorUpperBounds(), tol);  \n     }\n \n     private void verifySame(EmpiricalDistribution d1, EmpiricalDistribution d2) {", "timestamp": 1253496653, "metainfo": ""}