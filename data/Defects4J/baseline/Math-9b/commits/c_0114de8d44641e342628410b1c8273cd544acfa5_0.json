{"sha": "0114de8d44641e342628410b1c8273cd544acfa5", "log": "Added serialization tests.   ", "commit": "\n--- a/src/test/org/apache/commons/math/random/EmpiricalDistributionTest.java\n+++ b/src/test/org/apache/commons/math/random/EmpiricalDistributionTest.java\n import java.util.Iterator;\n \n import org.apache.commons.math.RetryTestCase;\n+import org.apache.commons.math.TestUtils;\n import org.apache.commons.math.stat.univariate.SummaryStatistics;\n \n /**\n  * Test cases for the EmpiricalDistribution class\n  *\n- * @version $Revision: 1.17 $ $Date: 2004/05/23 00:30:01 $\n+ * @version $Revision: 1.18 $ $Date: 2004/06/17 23:51:33 $\n  */\n \n public final class EmpiricalDistributionTest extends RetryTestCase {\n         tstDoubleGen(5);           \n     }\n     \n+    public void testSerialization() {\n+        // Empty\n+        EmpiricalDistribution dist = new EmpiricalDistributionImpl();\n+        EmpiricalDistribution dist2 = (EmpiricalDistribution) TestUtils.serializeAndRecover(dist);\n+        verifySame(dist, dist2);\n+        \n+        // Loaded\n+        empiricalDistribution2.load(dataArray);   \n+        dist2 = (EmpiricalDistribution) TestUtils.serializeAndRecover(empiricalDistribution2);\n+        verifySame(empiricalDistribution2, dist2);\n+    }\n+    \n+    private void verifySame(EmpiricalDistribution d1, EmpiricalDistribution d2) {\n+        assertEquals(d1.isLoaded(), d2.isLoaded());\n+        assertEquals(d1.getBinCount(), d2.getBinCount());\n+        assertEquals(d1.getSampleStats(), d2.getSampleStats());\n+        if (d1.isLoaded()) {\n+            for (int i = 0;  i < d1.getUpperBounds().length; i++) {\n+                assertEquals(d1.getUpperBounds()[i], d2.getUpperBounds()[i], 0);\n+            }\n+            assertEquals(d1.getBinStats(), d2.getBinStats());\n+        }\n+    }\n+    \n     private void tstGen(double tolerance)throws Exception {\n         empiricalDistribution.load(url);   \n         SummaryStatistics stats = SummaryStatistics.newInstance();", "timestamp": 1087516293, "metainfo": ""}