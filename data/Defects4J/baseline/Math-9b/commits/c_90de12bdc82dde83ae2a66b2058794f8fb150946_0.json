{"sha": "90de12bdc82dde83ae2a66b2058794f8fb150946", "log": "PR 36084: Temp. files were not being deleted because open file streams were not being closed properly.  ", "commit": "\n--- a/src/test/org/apache/commons/math/TestUtils.java\n+++ b/src/test/org/apache/commons/math/TestUtils.java\n import java.io.File;\n import java.io.FileInputStream;\n import java.io.FileOutputStream;\n+import java.io.IOException;\n import java.io.ObjectInputStream;\n import java.io.ObjectOutputStream;\n \n         Object result = null;\n         \n         File tmp = null;\n+        FileOutputStream fo = null;\n+        FileInputStream fi = null;\n         \n         try {\n-            \n             // serialize the Object\n             tmp = File.createTempFile(\"test\",\".ser\");\n-            FileOutputStream fo = new FileOutputStream(tmp);\n+            fo = new FileOutputStream(tmp);\n             ObjectOutputStream so = new ObjectOutputStream(fo);\n             so.writeObject(o);\n             so.flush();\n+            fo.close();\n \n             // deserialize the Book\n-            FileInputStream fi = new FileInputStream(tmp);\n+            fi = new FileInputStream(tmp);\n             ObjectInputStream si = new ObjectInputStream(fi);  \n             result = si.readObject();\n-            \n-        }catch (Exception e) {\n-            e.printStackTrace();\n-        }finally{\n-            if(tmp != null) tmp.delete();\n+        } catch (Exception ex) {\n+        \t\n+        } finally {\n+        \tif (fo != null) {\n+        \t\ttry {\n+        \t\t\tfo.close();\n+        \t\t} catch (IOException ex) {\n+        \t\t}\n+        \t}\n+\n+        \tif (fi != null) {\n+        \t\ttry {\n+            \t\tfi.close();\n+        \t\t} catch (IOException ex) {\n+        \t\t}\n+        \t}\n+        }\n+        \n+        \n+        if (tmp != null) {\n+        \ttmp.delete();\n         }\n         \n         return result;", "timestamp": 1123905997, "metainfo": ""}