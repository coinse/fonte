{"sha": "68ede2e3d32ac864f73aca729abe0d9e1b532364", "log": "Patches from Phil S. applied:  * A TestStatistic interface with corresponding implementation and testcase  PR: Bugzilla 19971 Obtained from: Patches attached to issue Submitted by: Phil S. Reviewed by: Tim O/   ", "commit": "\n--- /dev/null\n+++ b/src/java/org/apache/commons/math/TestStatistic.java\n+/* ====================================================================\n+ * The Apache Software License, Version 1.1\n+ *\n+ * Copyright (c) 2003 The Apache Software Foundation.  All rights\n+ * reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution, if\n+ *    any, must include the following acknowlegement:\n+ *       \"This product includes software developed by the\n+ *        Apache Software Foundation (http://www.apache.org/).\"\n+ *    Alternately, this acknowlegement may appear in the software itself,\n+ *    if and wherever such third-party acknowlegements normally appear.\n+ *\n+ * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n+ *    Foundation\" must not be used to endorse or promote products derived\n+ *    from this software without prior written permission. For written\n+ *    permission, please contact apache@apache.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Apache\"\n+ *    nor may \"Apache\" appear in their names without prior written\n+ *    permission of the Apache Software Foundation.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR\n+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Apache Software Foundation.  For more\n+ * information on the Apache Software Foundation, please see\n+ * <http://www.apache.org/>.\n+ */\n+package org.apache.commons.math;\n+\n+/**\n+ * Interfaces for the following test statistics <ul>\n+ * <li><a href = http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm>\n+ *     Chi-Square</a></li>\n+ * </ul>\n+ * @author Phil Steitz\n+ * @version $Revision: 1.1 $ $Date: 2003/05/15 21:58:23 $\n+ * \n+*/\n+public interface TestStatistic {\n+    \n+    /**\n+     * <strong>Description</strong>:\n+     * Computes Chi-Square statistic given observed and expected freqeuncy counts <br>\n+     * This statistic can be used to perform Chi-Square tests for goodness\n+     * of fit.<br>\n+     * <strong>Definition</strong>: \n+     * http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm <br>\n+     * <strong>Preconditions</strong>: <ul>\n+     * <li>Expected counts should all be positive. If any expected\n+     * counts are 0, the test will return INFINITY.  Negative expected or observed counts \n+     * make the statistic meaningless.</li>\n+     * <li>The observed and expected arrays <i>must</i> have the same length and\n+     * their common length must be at least 2 </li>\n+     * </ul>\n+     * @param observed array of observed frequency counts\n+     * @param expected array of exptected frequency counts\n+     * @throws IllegalArgumentException if input arrays have different lengths\n+     * or length is less than 2\n+     */\n+    public double chiSquare(double[] expected, double[] observed);\n+}\n+\n--- /dev/null\n+++ b/src/java/org/apache/commons/math/TestStatisticImpl.java\n+/* ====================================================================\n+ * The Apache Software License, Version 1.1\n+ *\n+ * Copyright (c) 2003 The Apache Software Foundation.  All rights\n+ * reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution, if\n+ *    any, must include the following acknowlegement:\n+ *       \"This product includes software developed by the\n+ *        Apache Software Foundation (http://www.apache.org/).\"\n+ *    Alternately, this acknowlegement may appear in the software itself,\n+ *    if and wherever such third-party acknowlegements normally appear.\n+ *\n+ * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n+ *    Foundation\" must not be used to endorse or promote products derived\n+ *    from this software without prior written permission. For written\n+ *    permission, please contact apache@apache.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Apache\"\n+ *    nor may \"Apache\" appear in their names without prior written\n+ *    permission of the Apache Software Foundation.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR\n+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Apache Software Foundation.  For more\n+ * information on the Apache Software Foundation, please see\n+ * <http://www.apache.org/>.\n+ */\n+\n+package org.apache.commons.math;\n+\n+/**\n+ * Implements the following test statistics <ul>\n+ * <li><a href = http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm>\n+ *     Chi-Square</a></li></ul>\n+ * @author Phil Steitz\n+ * @version $Revision: 1.1 $ $Date: 2003/05/15 21:58:23 $\n+ * \n+*/\n+public class TestStatisticImpl implements TestStatistic {\n+    \n+    public TestStatisticImpl() {\n+    }\n+    \n+    /**\n+     * Computes Chi-Square statistic given observed and expected counts <br>\n+     * <strong>Algorithm</strong>: \n+     * http://www.itl.nist.gov/div898/handbook/eda/section3/eda35f.htm <br>\n+     * <strong>Numerical considerations</strong>: none <br>\n+     * @param observed array of observed frequency counts\n+     * @param expected array of expected frequency counts\n+     * @throws IllegalArgumentException if input arrays have different lengths\n+     * or length is less than 2\n+     */\n+    public double chiSquare(double[] expected, double[] observed) {\n+        double sumSq = 0.0d;\n+        double dev = 0.0d;\n+        if ((expected.length < 2) || (expected.length != observed.length)) {\n+            throw new IllegalArgumentException\n+                (\"observed, expected array lengths incorrect\");\n+        }\n+        for (int i = 0; i< observed.length; i++) {\n+            dev = (observed[i] - expected[i]);\n+            sumSq += dev*dev/expected[i];\n+        }\n+        \n+         for (int i = 0; i< observed.length; i++) {\n+        }\n+        return sumSq;\n+    }           \n+\n+}\n--- /dev/null\n+++ b/src/test/org/apache/commons/math/TestStatisticTest.java\n+/* ====================================================================\n+ * The Apache Software License, Version 1.1\n+ *\n+ * Copyright (c) 2003 The Apache Software Foundation.  All rights\n+ * reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer.\n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution, if\n+ *    any, must include the following acknowlegement:\n+ *       \"This product includes software developed by the\n+ *        Apache Software Foundation (http://www.apache.org/).\"\n+ *    Alternately, this acknowlegement may appear in the software itself,\n+ *    if and wherever such third-party acknowlegements normally appear.\n+ *\n+ * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n+ *    Foundation\" must not be used to endorse or promote products derived\n+ *    from this software without prior written permission. For written\n+ *    permission, please contact apache@apache.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Apache\"\n+ *    nor may \"Apache\" appear in their names without prior written\n+ *    permission of the Apache Software Foundation.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR\n+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Apache Software Foundation.  For more\n+ * information on the Apache Software Foundation, please see\n+ * <http://www.apache.org/>.\n+ */\n+package org.apache.commons.math;\n+\n+import junit.framework.Test;\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+import junit.framework.AssertionFailedError;\n+/**\n+ * Test cases for the TestStatistic class.\n+ *\n+ * @author Phil Steitz\n+ * @version $Revision: 1.1 $ $Date: 2003/05/15 21:58:23 $\n+ */\n+\n+public final class TestStatisticTest extends TestCase {\n+\n+    private TestStatisticImpl testStatistic = new TestStatisticImpl();\n+    \n+    public TestStatisticTest(String name) {\n+        super(name);\n+    }\n+    \n+    \n+    public void setUp() { \n+    }\n+\n+    public static Test suite() {\n+        TestSuite suite = new TestSuite(TestStatisticTest.class);\n+        suite.setName(\"TestStatistic Tests\");\n+        return suite;\n+    }\n+\n+    public void testChiSquare() {\n+       double[] observed = {11,24,69,96};\n+       double[] expected = {8.2,25.2,65.8,100.8};\n+       assertEquals(\"chi-square statistic\",\n+           1.39743495,testStatistic.chiSquare(expected,observed),10E-5);\n+       \n+       double[] tooShortObs = {0};\n+       double[] tooShortEx = {1};\n+       try {\n+           double x = testStatistic.chiSquare(tooShortObs,tooShortEx);\n+           fail(\"arguments too short, IllegalArgumentException expected\");\n+       } catch (IllegalArgumentException ex) {\n+           ;\n+       }\n+       \n+       double[] unMatchedObs = {0,1,2,3};\n+       double[] unMatchedEx = {1,1,2};\n+       try {\n+           double x = testStatistic.chiSquare(unMatchedEx,unMatchedObs);\n+           fail(\"arrays have different lengths, IllegalArgumentException expected\");\n+       } catch (IllegalArgumentException ex) {\n+           ;\n+       }\n+       \n+       expected[0] = 0;\n+       assertEquals(\"chi-square statistic\", Double.POSITIVE_INFINITY,\n+            testStatistic.chiSquare(expected,observed),Double.MIN_VALUE);\n+    }\n+       \n+}\n+", "timestamp": 1053035903, "metainfo": ""}