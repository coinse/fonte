{"sha": "4ae8acffccf39eaff9c0cc6c801e59afcc87548d", "log": "Modified unit test of o.a.c.m3.linear.SymmLQ to show that lines 1208-1209 are essential (see MATH-761).  ", "commit": "\n--- a/src/test/java/org/apache/commons/math3/linear/SymmLQTest.java\n+++ b/src/test/java/org/apache/commons/math3/linear/SymmLQTest.java\n          * count[3] = number of calls to terminationPerformed\n          */\n         final int[] count = new int[] {0, 0, 0, 0};\n+        final RealVector xFromListener = new ArrayRealVector(n);\n         final IterationListener listener = new IterationListener() {\n \n             public void initializationPerformed(final IterationEvent e) {\n \n             public void terminationPerformed(final IterationEvent e) {\n                 ++count[3];\n+                final IterativeLinearSolverEvent ilse = (IterativeLinearSolverEvent) e;\n+                xFromListener.setSubVector(0, ilse.getSolution());\n             }\n         };\n         solver = new SymmLQ(maxIterations, 1E-10, true);\n             Arrays.fill(count, 0);\n             b.set(0.);\n             b.setEntry(j, 1.);\n-            solver.solve(a, b);\n+            final RealVector xFromSolver = solver.solve(a, b);\n             String msg = String.format(\"column %d (initialization)\", j);\n             Assert.assertEquals(msg, 1, count[0]);\n             msg = String.format(\"column %d (finalization)\", j);\n             Assert.assertEquals(msg, 1, count[3]);\n+            /*\n+             *  Check that solution is not \"over-refined\". When the last iteration has\n+             *  occurred, no further refinement should be performed.\n+             */\n+            for (int i = 0; i < n; i++){\n+                msg = String.format(\"row %d, column %d\", i, j);\n+                final double expected = xFromSolver.getEntry(i);\n+                final double actual = xFromListener.getEntry(i);\n+                Assert.assertEquals(msg, expected, actual, 0.0);\n+            }\n         }\n     }\n ", "timestamp": 1332308954, "metainfo": ""}