{"sha": "80807a6389476f2683e38d5dcc38642cd8beb4bc", "log": "Added tests for printStackTrace(), serialization.   ", "commit": "\n--- a/src/test/org/apache/commons/math/MathExceptionTest.java\n+++ b/src/test/org/apache/commons/math/MathExceptionTest.java\n \n import junit.framework.TestCase;\n \n+import java.io.ByteArrayOutputStream;\n+import java.io.PrintStream;\n+import java.io.PrintWriter;\n+\n /**\n- * @version $Revision: 1.7 $ $Date: 2004/02/21 21:35:16 $\n+ * @version $Revision: 1.8 $ $Date: 2004/07/10 22:23:14 $\n  */\n public class MathExceptionTest extends TestCase {\n     /**\n         MathException ex = new MathException(cause);\n         assertEquals(cause, ex.getCause());\n     }\n+    \n+    /**\n+     * Tests the printStackTrace() operation.\n+     */\n+    public void testPrintStackTrace() {\n+        String outMsg = \"outer message\";\n+        String inMsg = \"inner message\";\n+        MathException cause = new MathConfigurationException(inMsg);\n+        MathException ex = new MathException(outMsg, cause);\n+        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+        PrintStream ps = new PrintStream(baos);\n+        ex.printStackTrace(ps);\n+        String stack = baos.toString();\n+        String outerMsg = \"org.apache.commons.math.MathException: outer message\";\n+        String innerMsg = \"Caused by: \" + \n+        \"org.apache.commons.math.MathConfigurationException: inner message\";\n+        assertTrue(stack.startsWith(outerMsg));\n+        assertTrue(stack.indexOf(innerMsg) > 0);\n+        \n+        PrintWriter pw = new PrintWriter(ps, true);\n+        ex.printStackTrace(pw);\n+        stack = baos.toString();\n+        assertTrue(stack.startsWith(outerMsg));\n+        assertTrue(stack.indexOf(innerMsg) > 0);\n+    }\n+    \n+    /**\n+     * Test serialization\n+     */\n+    public void testSerialization() {\n+        String outMsg = \"outer message\";\n+        String inMsg = \"inner message\";\n+        MathException cause = new MathConfigurationException(inMsg);\n+        MathException ex = new MathException(outMsg, cause);\n+        MathException image = (MathException) TestUtils.serializeAndRecover(ex);\n+        \n+        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n+        PrintStream ps = new PrintStream(baos);\n+        PrintWriter pw = new PrintWriter(ps, true);\n+        ex.printStackTrace(ps);\n+        String stack = baos.toString();\n+        \n+        ByteArrayOutputStream baos2 = new ByteArrayOutputStream();\n+        PrintStream ps2 = new PrintStream(baos2);\n+        PrintWriter pw2 = new PrintWriter(ps2, true);\n+        image.printStackTrace(ps2);\n+        String stack2 = baos2.toString();\n+        assertEquals(stack, stack2);\n+    }\n }", "timestamp": 1089498194, "metainfo": ""}