{"sha": "7707b0bb80be05bbf6533a36bb0c646cbfd1026d", "log": "Fixed add method to match javadoc contract when one or both addends has NaN parts.  JIRA: MATH-618 Reported by Arne Plose  ", "commit": "\n--- a/src/main/java/org/apache/commons/math/complex/Complex.java\n+++ b/src/main/java/org/apache/commons/math/complex/Complex.java\n     public Complex add(Complex rhs)\n         throws NullArgumentException {\n         MathUtils.checkNotNull(rhs);\n+        if (isNaN || rhs.isNaN) {\n+            return NaN;\n+        }\n         return createComplex(real + rhs.getReal(),\n             imaginary + rhs.getImaginary());\n     }\n--- a/src/test/java/org/apache/commons/math/complex/ComplexTest.java\n+++ b/src/test/java/org/apache/commons/math/complex/ComplexTest.java\n         Assert.assertTrue(z.isNaN());\n         z = new Complex(1, nan);\n         Complex w = x.add(z);\n-        Assert.assertEquals(w.getReal(), 4.0, 0);\n+        Assert.assertTrue(Double.isNaN(w.getReal()));\n         Assert.assertTrue(Double.isNaN(w.getImaginary()));\n     }\n ", "timestamp": 1310623685, "metainfo": ""}