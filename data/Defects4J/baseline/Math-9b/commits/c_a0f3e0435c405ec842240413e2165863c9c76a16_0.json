{"sha": "a0f3e0435c405ec842240413e2165863c9c76a16", "log": "fixed dimension error in operate method for RealMatrixImpl and BigMatrixImpl JIRA: MATH-209  ", "commit": "\n--- a/src/java/org/apache/commons/math/linear/BigMatrixImpl.java\n+++ b/src/java/org/apache/commons/math/linear/BigMatrixImpl.java\n         }\n         final int nRows = this.getRowDimension();\n         final int nCols = this.getColumnDimension();\n-        final BigDecimal[] out = new BigDecimal[v.length];\n+        final BigDecimal[] out = new BigDecimal[nRows];\n         for (int row = 0; row < nRows; row++) {\n             BigDecimal sum = ZERO;\n             for (int i = 0; i < nCols; i++) {\n--- a/src/java/org/apache/commons/math/linear/RealMatrixImpl.java\n+++ b/src/java/org/apache/commons/math/linear/RealMatrixImpl.java\n         if (v.length != nCols) {\n             throw new IllegalArgumentException(\"vector has wrong length\");\n         }\n-        final double[] out = new double[v.length];\n+        final double[] out = new double[nRows];\n         for (int row = 0; row < nRows; row++) {\n             final double[] dataRow = data[row];\n             double sum = 0;\n--- a/src/test/org/apache/commons/math/linear/BigMatrixImplTest.java\n+++ b/src/test/org/apache/commons/math/linear/BigMatrixImplTest.java\n         } catch (IllegalArgumentException ex) {\n             ;\n         }      \n+    }\n+\n+    /** test issue MATH-209 */\n+    public void testMath209() {\n+        BigMatrix a = new BigMatrixImpl(new BigDecimal[][] {\n+                { new BigDecimal(1), new BigDecimal(2) },\n+                { new BigDecimal(3), new BigDecimal(4) },\n+                { new BigDecimal(5), new BigDecimal(6) }\n+        }, false);\n+        BigDecimal[] b = a.operate(new BigDecimal[] { new BigDecimal(1), new BigDecimal(1) });\n+        assertEquals(a.getRowDimension(), b.length);\n+        assertEquals( 3.0, b[0].doubleValue(), 1.0e-12);\n+        assertEquals( 7.0, b[1].doubleValue(), 1.0e-12);\n+        assertEquals(11.0, b[2].doubleValue(), 1.0e-12);\n     }\n     \n     /** test transpose */\n--- a/src/test/org/apache/commons/math/linear/RealMatrixImplTest.java\n+++ b/src/test/org/apache/commons/math/linear/RealMatrixImplTest.java\n             ;\n         }      \n     }\n+\n+    /** test issue MATH-209 */\n+    public void testMath209() {\n+        RealMatrix a = new RealMatrixImpl(new double[][] {\n+                { 1, 2 }, { 3, 4 }, { 5, 6 }\n+        }, false);\n+        double[] b = a.operate(new double[] { 1, 1 });\n+        assertEquals(a.getRowDimension(), b.length);\n+        assertEquals( 3.0, b[0], 1.0e-12);\n+        assertEquals( 7.0, b[1], 1.0e-12);\n+        assertEquals(11.0, b[2], 1.0e-12);\n+    }\n     \n     /** test transpose */\n     public void testTranspose() {", "timestamp": 1213729776, "metainfo": ""}