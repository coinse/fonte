{"sha": "ec69d09deb79468edde57456c0f79c19128e19e1", "log": "Allow - and _ in CSS ID selectors.  Closes #10.", "commit": "\n--- a/src/main/java/org/jsoup/parser/TokenQueue.java\n+++ b/src/main/java/org/jsoup/parser/TokenQueue.java\n     }\n \n     /**\n-     Consume a HTML class name off the queue (letter, digit, -, _)\n-     @return classname\n-     */\n-    public String consumeClassName() {\n+     Consume a CSS identifier (ID or class) off the queue (letter, digit, -, _)\n+     http://www.w3.org/TR/CSS2/syndata.html#value-def-identifier\n+     @return identifier\n+     */\n+    public String consumeCssIdentifier() {\n         StringBuilder accum = new StringBuilder();\n         Character c = queue.peek();\n         while (!queue.isEmpty() && (Character.isLetterOrDigit(c) || c.equals('-') || c.equals('_'))) {\n--- a/src/main/java/org/jsoup/select/Selector.java\n+++ b/src/main/java/org/jsoup/select/Selector.java\n     }\n \n     private Elements byId() {\n-        String id = tq.consumeWord();\n+        String id = tq.consumeCssIdentifier();\n         Validate.notEmpty(id);\n \n         Element found = root.getElementById(id);\n     }\n \n     private Elements byClass() {\n-        String className = tq.consumeClassName();\n+        String className = tq.consumeCssIdentifier();\n         Validate.notEmpty(className);\n \n         return root.getElementsByClass(className);\n--- a/src/test/java/org/jsoup/select/SelectorTest.java\n+++ b/src/test/java/org/jsoup/select/SelectorTest.java\n \n import org.jsoup.Jsoup;\n import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n import org.junit.Test;\n import static org.junit.Assert.*;\n \n         assertEquals(1, els.size());\n         assertEquals(\"Three\", els.first().text());\n     }\n+    \n+    // for http://github.com/jhy/jsoup/issues#issue/10\n+    @Test public void testCharactersInIdAndClass() {\n+        // using CSS spec for identifiers (id and class): a-z0-9, -, _. NOT . (which is OK in html spec, but not css)\n+        String h = \"<div><p id='a1-foo_bar'>One</p><p class='b2-qux_bif'>Two</p></div>\";\n+        Document doc = Jsoup.parse(h);\n+        \n+        Element el1 = doc.getElementById(\"a1-foo_bar\");\n+        assertEquals(\"One\", el1.text());\n+        Element el2 = doc.getElementsByClass(\"b2-qux_bif\").first();\n+        assertEquals(\"Two\", el2.text());\n+        \n+        Element el3 = doc.select(\"#a1-foo_bar\").first();\n+        assertEquals(\"One\", el3.text());\n+        Element el4 = doc.select(\".b2-qux_bif\").first();\n+        assertEquals(\"Two\", el4.text());\n+    }\n }", "timestamp": 1309605111, "metainfo": ""}