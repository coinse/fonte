{"sha": "e65b503c2054ec715d75815c07187e41182efe18", "log": "Implemented text()", "commit": "\n--- a/src/main/java/org/jsoup/nodes/Attributes.java\n+++ b/src/main/java/org/jsoup/nodes/Attributes.java\n     public void put(String key, String value) {\n         Validate.notEmpty(key);\n         Validate.notNull(value);\n-        attributes.put(key.toLowerCase().trim(), value.trim());\n+        attributes.put(key.toLowerCase().trim(), value);\n     }\n \n     public void put(Attribute attribute) {\n--- a/src/main/java/org/jsoup/nodes/Element.java\n+++ b/src/main/java/org/jsoup/nodes/Element.java\n \n     public Tag getTag() {\n         return tag;\n+    }\n+\n+    public boolean isBlock() {\n+        return tag.isBlock();\n     }\n \n     public String id() {\n         return null;\n     }\n \n+    public String text() {\n+        StringBuilder sb = new StringBuilder();\n+\n+        for (Node childNode : childNodes) {\n+            if (childNode instanceof TextNode) {\n+                TextNode textNode = (TextNode) childNode;\n+                sb.append(textNode.getWholeText());\n+            } else if (childNode instanceof Element) {\n+                Element element = (Element) childNode;\n+                String elementText = element.text();\n+                if (element.isBlock() && sb.length() > 0 && elementText.length() > 0)\n+                    sb.append(\" \");\n+                sb.append(elementText);\n+            }\n+        }\n+        return sb.toString();\n+    }\n+\n \n }\n--- a/src/main/java/org/jsoup/parser/Tag.java\n+++ b/src/main/java/org/jsoup/parser/Tag.java\n             return false;\n \n         return true;\n+    }\n+\n+    public boolean isBlock() {\n+        return isBlock;\n+    }\n+\n+    public boolean isInline() {\n+        return !isBlock;\n     }\n \n     @Override\n--- a/src/test/java/org/jsoup/nodes/ElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/ElementTest.java\n  * @author Jonathan Hedley\n  */\n public class ElementTest {\n-    private String reference = \"<div id=div1><p>Hello</p><p>Another</p><div id=div2><img src=foo.png></div></div>\";\n+    private String reference = \"<div id=div1><p>Hello</p><p>Another <b>element</b></p><div id=div2><img src=foo.png></div></div>\";\n \n     @Test public void getElementsByTagName() {\n         Document doc = JSoup.parse(reference);\n         List<Element> ps = doc.getElementsByTag(\"p\");\n         assertEquals(2, ps.size());\n         assertEquals(\"Hello\", ((TextNode) ps.get(0).childNode(0)).getWholeText());\n-        assertEquals(\"Another\", ((TextNode) ps.get(1).childNode(0)).getWholeText());\n+        assertEquals(\"Another \", ((TextNode) ps.get(1).childNode(0)).getWholeText());\n         List<Element> ps2 = doc.getElementsByTag(\"P\");\n         assertEquals(ps, ps2);\n \n         assertEquals(\"span\", span.tagName());\n     }\n \n+    @Test public void testGetText() {\n+        Document doc = JSoup.parse(reference);\n+        assertEquals(\"Hello Another element\", doc.text());\n+        assertEquals(\"Another element\", doc.getElementsByTag(\"p\").get(1).text());\n+    }\n+\n }", "timestamp": 1309605100, "metainfo": ""}