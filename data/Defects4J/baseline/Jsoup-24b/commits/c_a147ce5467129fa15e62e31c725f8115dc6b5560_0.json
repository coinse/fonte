{"sha": "a147ce5467129fa15e62e31c725f8115dc6b5560", "log": "Implicit close for <caption> tags.", "commit": "\n--- a/src/main/java/org/jsoup/parser/Tag.java\n+++ b/src/main/java/org/jsoup/parser/Tag.java\n \n         // tables\n         createBlock(\"TABLE\"); // specific list of only includes (tr, td, thead etc) not implemented\n-        createBlock(\"CAPTION\").setParent(\"TABLE\");\n+        createBlock(\"CAPTION\").setParent(\"TABLE\").setExcludes(\"THEAD\", \"TFOOT\", \"TBODY\", \"COLGROUP\", \"COL\", \"TR\", \"TH\", \"TD\").setOptionalClosing();\n         createBlock(\"THEAD\").setParent(\"TABLE\").setLimitChildren().setOptionalClosing(); // just TR\n         createBlock(\"TFOOT\").setParent(\"TABLE\").setLimitChildren().setOptionalClosing(); // just TR\n         createBlock(\"TBODY\").setParent(\"TABLE\").setLimitChildren().setOptionalClosing(); // optional / implicit open too. just TR\n--- a/src/test/java/org/jsoup/parser/ParserTest.java\n+++ b/src/test/java/org/jsoup/parser/ParserTest.java\n         Document doc = Jsoup.parse(\"<html><head></head><body><table><tbody><tr><td>aaa</td><td>bbb</td></tr></tbody></table></body></html>\");\n         assertEquals(\"<table><tbody><tr><td>aaa</td><td>bbb</td></tr></tbody></table>\", TextUtil.stripNewlines(doc.body().html()));\n     }\n+    \n+    @Test public void handlesImplicitCaptionClose() {\n+        Document doc = Jsoup.parse(\"<table><caption>A caption<td>One<td>Two\");\n+        assertEquals(\"<table><caption>A caption</caption><tr><td>One</td><td>Two</td></tr></table>\", TextUtil.stripNewlines(doc.body().html()));\n+    }\n \n     @Test public void handlesBaseTags() {\n         String h = \"<a href=1>#</a><base href='/2/'><a href='3'>#</a><base href='http://bar'><a href=4>#</a>\";", "timestamp": 1309605115, "metainfo": ""}