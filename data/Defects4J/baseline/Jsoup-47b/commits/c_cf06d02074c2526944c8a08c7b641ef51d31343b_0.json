{"sha": "cf06d02074c2526944c8a08c7b641ef51d31343b", "log": "Added removeAttributes method to Whitelist", "commit": "\n--- a/src/main/java/org/jsoup/safety/Whitelist.java\n+++ b/src/main/java/org/jsoup/safety/Whitelist.java\n     }\n \n     /**\n+     Remove a list of allowed attributes from a tag. (If an attribute is not allowed on an element, it will be removed.)\n+     <p/>\n+     E.g.: <code>removeAttributes(\"a\", \"href\", \"class\")</code> disallows <code>href</code> and <code>class</code>\n+     attributes on <code>a</code> tags.\n+     <p/>\n+     To make an attribute invalid for <b>all tags</b>, use the pseudo tag <code>:all</code>, e.g.\n+     <code>removeAttributes(\":all\", \"class\")</code>.\n+\n+     @param tag  The tag the attributes are for.\n+     @param keys List of invalid attributes for the tag\n+     @return this (for chaining)\n+     */\n+    public Whitelist removeAttributes(String tag, String... keys) {\n+        Validate.notEmpty(tag);\n+        Validate.notNull(keys);\n+        Validate.isTrue(keys.length > 0, \"No attributes supplied.\");\n+\n+        TagName tagName = TagName.valueOf(tag);\n+        Set<AttributeKey> attributeSet = new HashSet<AttributeKey>();\n+        for (String key : keys) {\n+            Validate.notEmpty(key);\n+            attributeSet.add(AttributeKey.valueOf(key));\n+        }\n+        if(tagNames.contains(tagName) && attributes.containsKey(tagName)) { // Only look in sub-maps if tag was allowed\n+            Set<AttributeKey> currentSet = attributes.get(tagName);\n+            currentSet.removeAll(attributeSet);\n+\n+            if(currentSet.size() == 0) // Remove tag from attribute map if no attributes are allowed for tag\n+                attributes.remove(tagName);\n+        }\n+        if(tag.equals(\":all\")) // Attribute needs to be removed from all individually set tags\n+            for(TagName name: attributes.keySet()) {\n+                Set<AttributeKey> currentSet = attributes.get(name);\n+                currentSet.removeAll(attributeSet);\n+\n+                if(currentSet.size() == 0) // Remove tag from attribute map if no attributes are allowed for tag\n+                    attributes.remove(name);\n+            }\n+        return this;\n+    }\n+\n+    /**\n      Add an enforced attribute to a tag. An enforced attribute will always be added to the element. If the element\n      already has the attribute set, it will be overridden.\n      <p/>", "timestamp": 1407905939, "metainfo": ""}