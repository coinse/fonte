{"sha": "7af334d7d52ea245d71b9f17749360a4db0debf0", "log": "Allow a caller to close the parser before reading all records and free resources. The parser and lexer now implement java.io.Closeable.  ", "commit": "\n--- a/src/main/java/org/apache/commons/csv/CSVParser.java\n+++ b/src/main/java/org/apache/commons/csv/CSVParser.java\n \n import static org.apache.commons.csv.Token.Type.TOKEN;\n \n+import java.io.Closeable;\n import java.io.IOException;\n import java.io.Reader;\n import java.io.StringReader;\n  *\n  * @version $Id$\n  */\n-public class CSVParser implements Iterable<CSVRecord> {\n+public class CSVParser implements Iterable<CSVRecord>, Closeable {\n \n     private final Lexer lexer;\n     private final Map<String, Integer> headerMap;\n         }}\n \n     /**\n+     * Closes resources.\n+     */\n+\tpublic void close() throws IOException {\n+\t\tif (lexer != null) {\n+\t\t\tlexer.close();\n+\t\t}\t\t\n+\t}\n+\n+    /**\n      * Parses the CSV input according to the given format and returns the content as an array of {@link CSVRecord}\n      * entries.\n      * <p/>\n             }\n         };\n     }\n+\n }\n--- a/src/main/java/org/apache/commons/csv/Lexer.java\n+++ b/src/main/java/org/apache/commons/csv/Lexer.java\n import static org.apache.commons.csv.Constants.TAB;\n import static org.apache.commons.csv.Constants.UNDEFINED;\n \n+import java.io.Closeable;\n import java.io.IOException;\n \n /**\n  *\n  * @version $Id$\n  */\n-abstract class Lexer {\n+abstract class Lexer implements Closeable {\n \n     /**\n      * Constant char to use for disabling comments, escapes and encapsulation. The value -2 is used because it\n         return c == delimiter ||\n                c == escape ||\n                c == quoteChar ||\n-               c == commmentStart\n-               ;\n-    }\n+               c == commmentStart;\n+    }\n+\n+    /**\n+     * Closes resources.\n+     */\n+\tpublic void close() throws IOException {\n+\t\tif (in != null) {\n+\t\t\tin.close();\n+\t\t}\n+\t}\n }", "timestamp": 1375195842, "metainfo": ""}