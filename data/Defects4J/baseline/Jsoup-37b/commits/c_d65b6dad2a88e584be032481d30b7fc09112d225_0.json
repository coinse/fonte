{"sha": "d65b6dad2a88e584be032481d30b7fc09112d225", "log": "Added support for gzipped output.  Fixes #28", "commit": "\n--- a/src/main/java/org/jsoup/helper/HttpConnection.java\n+++ b/src/main/java/org/jsoup/helper/HttpConnection.java\n import java.util.LinkedHashMap;\n import java.util.List;\n import java.util.Map;\n+import java.util.zip.GZIPInputStream;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n             timeoutSeconds = 3;\n             data = new ArrayList<Connection.KeyVal>();\n             method = Connection.Method.GET;\n+            headers.put(\"Accept-Encoding\", \"gzip\");\n         }\n \n         public int timeout() {\n                 throw new IOException(String.format(\"Unhandled content type \\\"%s\\\" on URL %s. Must be text/*\",\n                     contentType, url.toString()));\n \n-            InputStream inStream = new BufferedInputStream(conn.getInputStream());\n+            InputStream inStream =\n+                (res.hasHeader(\"Content-Encoding\") && res.header(\"Content-Encoding\").equals(\"gzip\")) ?\n+                    new BufferedInputStream(new GZIPInputStream(conn.getInputStream())) :\n+                    new BufferedInputStream(conn.getInputStream());\n             res.byteData = DataUtil.readToByteBuffer(inStream);\n             res.charset = getCharsetFromContentType(contentType); // may be null, readInputStream deals with it\n             inStream.close();", "timestamp": 1309605119, "metainfo": ""}