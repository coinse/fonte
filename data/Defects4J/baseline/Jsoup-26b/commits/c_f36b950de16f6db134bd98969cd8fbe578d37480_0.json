{"sha": "f36b950de16f6db134bd98969cd8fbe578d37480", "log": "Fixed an issue with a missing quote when serialising DocumentType nodes.  Fixes #109", "commit": "\n--- a/src/main/java/org/jsoup/nodes/DocumentType.java\n+++ b/src/main/java/org/jsoup/nodes/DocumentType.java\n package org.jsoup.nodes;\n \n import org.jsoup.helper.StringUtil;\n+import org.jsoup.helper.Validate;\n \n /**\n  * A {@code <!DOCTPYE>} node.\n     public DocumentType(String name, String publicId, String systemId, String baseUri) {\n         super(baseUri);\n \n+        Validate.notEmpty(name);\n         attr(\"name\", name);\n         attr(\"publicId\", publicId);\n         attr(\"systemId\", systemId);\n \n     @Override\n     void outerHtmlHead(StringBuilder accum, int depth, Document.OutputSettings out) {\n-        accum.append(\"<!DOCTYPE html\");\n+        accum.append(\"<!DOCTYPE \").append(attr(\"name\"));\n         if (!StringUtil.isBlank(attr(\"publicId\")))\n             accum.append(\" PUBLIC \\\"\").append(attr(\"publicId\")).append(\"\\\"\");\n         if (!StringUtil.isBlank(attr(\"systemId\")))\n-            accum.append(' ').append(attr(\"systemId\")).append(\"\\\"\");\n+            accum.append(\" \\\"\").append(attr(\"systemId\")).append(\"\\\"\");\n         accum.append('>');\n     }\n \n--- /dev/null\n+++ b/src/test/java/org/jsoup/nodes/DocumentTypeTest.java\n+package org.jsoup.nodes;\n+\n+import org.junit.Test;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * Tests for the DocumentType node\n+ *\n+ * @author Jonathan Hedley, http://jonathanhedley.com/\n+ */\n+public class DocumentTypeTest {\n+    @Test(expected = IllegalArgumentException.class)\n+    public void constructorValidationThrowsExceptionOnBlankName() {\n+        DocumentType fail = new DocumentType(\"\",\"\", \"\", \"\");\n+    }\n+\n+    @Test(expected = IllegalArgumentException.class)\n+    public void constructorValidationThrowsExceptionOnNulls() {\n+        DocumentType fail = new DocumentType(\"html\", null, null, \"\");\n+    }\n+\n+    @Test\n+    public void constructorValidationOkWithBlankPublicAndSystemIds() {\n+        DocumentType fail = new DocumentType(\"html\",\"\", \"\",\"\");\n+    }\n+\n+    @Test public void outerHtmlGeneration() {\n+        DocumentType html5 = new DocumentType(\"html\", \"\", \"\", \"\");\n+        assertEquals(\"<!DOCTYPE html>\", html5.outerHtml());\n+\n+        DocumentType publicDocType = new DocumentType(\"html\", \"-//IETF//DTD HTML//\", \"\", \"\");\n+        assertEquals(\"<!DOCTYPE html PUBLIC \\\"-//IETF//DTD HTML//\\\">\", publicDocType.outerHtml());\n+\n+        DocumentType systemDocType = new DocumentType(\"html\", \"\", \"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd\", \"\");\n+        assertEquals(\"<!DOCTYPE html \\\"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd\\\">\", systemDocType.outerHtml());\n+\n+        DocumentType combo = new DocumentType(\"notHtml\", \"--public\", \"--system\", \"\");\n+        assertEquals(\"<!DOCTYPE notHtml PUBLIC \\\"--public\\\" \\\"--system\\\">\", combo.outerHtml());\n+    }\n+}", "timestamp": 1309605131, "metainfo": ""}