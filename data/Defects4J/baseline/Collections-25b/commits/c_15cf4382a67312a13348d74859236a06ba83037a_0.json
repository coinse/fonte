{"sha": "15cf4382a67312a13348d74859236a06ba83037a", "log": "Change to extend AbstractTestSortedMap   ", "commit": "\n--- a/src/test/org/apache/commons/collections/map/TestLazySortedMap.java\n+++ b/src/test/org/apache/commons/collections/map/TestLazySortedMap.java\n import junit.framework.TestSuite;\n \n import org.apache.commons.collections.Factory;\n+import org.apache.commons.collections.FactoryUtils;\n import org.apache.commons.collections.Transformer;\n import org.apache.commons.collections.TransformerUtils;\n \n  * {@link LazySortedMap} implementation.\n  *\n  * @since Commons Collections 3.0\n- * @version $Revision: 1.5 $ $Date: 2004/04/07 23:05:37 $\n+ * @version $Revision: 1.6 $ $Date: 2004/04/09 09:39:47 $\n  * \n  * @author Phil Steitz\n  */\n-public class TestLazySortedMap extends TestLazyMap {\n+public class TestLazySortedMap extends AbstractTestSortedMap {\n+    \n+    protected static final Factory oneFactory = FactoryUtils.constantFactory(\"One\");\n+    protected static final Factory nullFactory = FactoryUtils.nullFactory();\n     \n     public TestLazySortedMap(String testName) {\n         super(testName);\n         String[] testCaseName = { TestLazySortedMap.class.getName()};\n         junit.textui.TestRunner.main(testCaseName);\n     }\n-    \n- //-------------------------------------------------------------------\n-    \n+\n+    //-----------------------------------------------------------------------    \n     protected SortedMap decorateMap(SortedMap map, Factory factory) {\n         return LazySortedMap.decorate(map, factory);\n     }\n         return decorateMap(new TreeMap(), nullFactory);\n     }\n     \n-    public boolean isAllowNullKey() {\n-        return false;\n-    }\n-    \n-//--------------------------------------------------------------------   \n-    \n     protected SortedMap makeTestSortedMap(Factory factory) {\n         return decorateMap(new TreeMap(), factory);\n     }\n     \n+    public boolean isSubMapViewsSerializable() {\n+        // TreeMap sub map views have a bug in deserialization.\n+        return false;\n+    }\n+\n+    public boolean isAllowNullKey() {\n+        return false;\n+    }\n+\n+    // from TestLazyMap\n+    //-----------------------------------------------------------------------\n+    public void testMapGet() {\n+        Map map = makeTestSortedMap(oneFactory);\n+        assertEquals(0, map.size());\n+        String s1 = (String) map.get(\"Five\");\n+        assertEquals(\"One\", s1);\n+        assertEquals(1, map.size());\n+        String s2 = (String) map.get(new String(new char[] {'F','i','v','e'}));\n+        assertEquals(\"One\", s2);\n+        assertEquals(1, map.size());\n+        assertSame(s1, s2);\n+        \n+        map = makeTestSortedMap(nullFactory);\n+        Object o = map.get(\"Five\");\n+        assertEquals(null,o);\n+        assertEquals(1, map.size());\n+        \n+    }\n+    \n+    //-----------------------------------------------------------------------\n     public void testSortOrder() {\n         SortedMap map = makeTestSortedMap(oneFactory);\n         map.put(\"A\",  \"a\");", "timestamp": 1081503587, "metainfo": ""}