{"sha": "46d73eac817f0e68122443ffa09c82da9d5d2ddb", "log": "Add lots of tests for bug 33071   ", "commit": "\n--- a/src/test/org/apache/commons/collections/buffer/TestCircularFifoBuffer.java\n+++ b/src/test/org/apache/commons/collections/buffer/TestCircularFifoBuffer.java\n import java.util.List;\n \n import junit.framework.Test;\n+import junit.textui.TestRunner;\n \n import org.apache.commons.collections.Buffer;\n import org.apache.commons.collections.BufferUnderflowException;\n /**\n  * Test cases for CircularFifoBuffer.\n  * \n- * @version $Revision: 1.5 $ $Date: 2004/10/16 22:23:41 $\n+ * @version $Revision: 1.6 $ $Date: 2005/01/22 00:47:49 $\n  * \n  * @author Stephen Colebourne\n  */\n \n     public static Test suite() {\n         return BulkTest.makeSuite(TestCircularFifoBuffer.class);\n+    }\n+\n+    public static void main(String args[]) {\n+        TestRunner.run(TestCircularFifoBuffer.class);\n     }\n \n     //-----------------------------------------------------------------------\n         fail();\n     }\n     \n+    public void testRemoveError1() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");\n+        \n+        assertEquals(\"[1, 2, 3, 4, 5]\", fifo.toString());\n+        \n+        fifo.remove(\"3\");\n+        assertEquals(\"[1, 2, 4, 5]\", fifo.toString());\n+        \n+        fifo.remove(\"4\");\n+        assertEquals(\"[1, 2, 5]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError2() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");\n+        fifo.add(\"6\");\n+        \n+        assertEquals(5, fifo.size());\n+        assertEquals(\"[2, 3, 4, 5, 6]\", fifo.toString());\n+        \n+        fifo.remove(\"3\");\n+        assertEquals(\"[2, 4, 5, 6]\", fifo.toString());\n+        \n+        fifo.remove(\"4\");\n+        assertEquals(\"[2, 5, 6]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError3() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");\n+        \n+        assertEquals(\"[1, 2, 3, 4, 5]\", fifo.toString());\n+        \n+        fifo.remove(\"3\");\n+        assertEquals(\"[1, 2, 4, 5]\", fifo.toString());\n+        \n+        fifo.add(\"6\");\n+        fifo.add(\"7\");\n+        assertEquals(\"[2, 4, 5, 6, 7]\", fifo.toString());\n+        \n+        fifo.remove(\"4\");\n+        assertEquals(\"[2, 5, 6, 7]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError4() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        \n+        assertEquals(\"[3, 4, 5, 6, 7]\", fifo.toString());\n+        \n+        fifo.remove(\"4\");  // remove element in middle of array, after start\n+        assertEquals(\"[3, 5, 6, 7]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError5() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        \n+        assertEquals(\"[3, 4, 5, 6, 7]\", fifo.toString());\n+        \n+        fifo.remove(\"5\");  // remove element at last pos in array\n+        assertEquals(\"[3, 4, 6, 7]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError6() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        \n+        assertEquals(\"[3, 4, 5, 6, 7]\", fifo.toString());\n+        \n+        fifo.remove(\"6\");  // remove element at position zero in array\n+        assertEquals(\"[3, 4, 5, 7]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError7() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        \n+        assertEquals(\"[3, 4, 5, 6, 7]\", fifo.toString());\n+        \n+        fifo.remove(\"7\");  // remove element at position one in array\n+        assertEquals(\"[3, 4, 5, 6]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError8() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        fifo.add(\"8\");  // end=3\n+        \n+        assertEquals(\"[4, 5, 6, 7, 8]\", fifo.toString());\n+        \n+        fifo.remove(\"7\");  // remove element at position one in array, need to shift 8\n+        assertEquals(\"[4, 5, 6, 8]\", fifo.toString());\n+    }\n+\n+    public void testRemoveError9() throws Exception {\n+        // based on bug 33071\n+        CircularFifoBuffer fifo = new CircularFifoBuffer(5);\n+        fifo.add(\"1\");\n+        fifo.add(\"2\");\n+        fifo.add(\"3\");\n+        fifo.add(\"4\");\n+        fifo.add(\"5\");  // end=0\n+        fifo.add(\"6\");  // end=1\n+        fifo.add(\"7\");  // end=2\n+        fifo.add(\"8\");  // end=3\n+        \n+        assertEquals(\"[4, 5, 6, 7, 8]\", fifo.toString());\n+        \n+        fifo.remove(\"8\");  // remove element at position two in array\n+        assertEquals(\"[4, 5, 6, 7]\", fifo.toString());\n+    }\n+\n+    //-----------------------------------------------------------------------\n     public void testRepeatedSerialization() throws Exception {\n         // bug 31433\n         CircularFifoBuffer b = new CircularFifoBuffer(2);", "timestamp": 1106354869, "metainfo": ""}