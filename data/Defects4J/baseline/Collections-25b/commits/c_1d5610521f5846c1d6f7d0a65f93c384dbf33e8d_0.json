{"sha": "1d5610521f5846c1d6f7d0a65f93c384dbf33e8d", "log": "Applying my test/fix patch from COLLECTIONS-261  ", "commit": "\n--- a/src/java/org/apache/commons/collections/map/Flat3Map.java\n+++ b/src/java/org/apache/commons/collections/map/Flat3Map.java\n                         return old;\n                     }\n                     if (key2 == null) {\n-                        Object old = value3;\n+                        Object old = value2;\n                         hash2 = hash3;\n                         key2 = key3;\n                         value2 = value3;\n                         return old;\n                     }\n                     if (key1 == null) {\n-                        Object old = value3;\n+                        Object old = value1;\n                         hash1 = hash3;\n                         key1 = key3;\n                         value1 = value3;\n                         return old;\n                     }\n                     if (key1 == null) {\n-                        Object old = value2;\n+                        Object old = value1;\n                         hash1 = hash2;\n                         key1 = key2;\n                         value1 = value2;\n                             return old;\n                         }\n                         if (hash2 == hashCode && key.equals(key2)) {\n-                            Object old = value3;\n+                            Object old = value2;\n                             hash2 = hash3;\n                             key2 = key3;\n                             value2 = value3;\n                             return old;\n                         }\n                         if (hash1 == hashCode && key.equals(key1)) {\n-                            Object old = value3;\n+                            Object old = value1;\n                             hash1 = hash3;\n                             key1 = key3;\n                             value1 = value3;\n                             return old;\n                         }\n                         if (hash1 == hashCode && key.equals(key1)) {\n-                            Object old = value2;\n+                            Object old = value1;\n                             hash1 = hash2;\n                             key1 = key2;\n                             value1 = value2;\n--- a/src/test/org/apache/commons/collections/map/TestFlat3Map.java\n+++ b/src/test/org/apache/commons/collections/map/TestFlat3Map.java\n //            (java.io.Serializable) map,\n //            \"D:/dev/collections/data/test/Flat3Map.fullCollection.version3.1.obj\");\n //    }\n+\n+    public void testCollections261() {\n+        Flat3Map m = new Flat3Map();\n+        m.put( new Integer(1), new Integer(1) );\n+        m.put( new Integer(0), new Integer(0) );\n+        assertEquals( new Integer(1), m.remove( new Integer(1) ) ); \n+        assertEquals( new Integer(0), m.remove( new Integer(0) ) ); \n+\n+        m.put( new Integer(2), new Integer(2) );\n+        m.put( new Integer(1), new Integer(1) );\n+        m.put( new Integer(0), new Integer(0) );\n+        assertEquals( new Integer(2), m.remove( new Integer(2) ) ); \n+        assertEquals( new Integer(1), m.remove( new Integer(1) ) ); \n+        assertEquals( new Integer(0), m.remove( new Integer(0) ) ); \n+    }\n+\n }", "timestamp": 1187619107, "metainfo": ""}