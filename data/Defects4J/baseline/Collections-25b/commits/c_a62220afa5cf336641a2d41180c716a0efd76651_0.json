{"sha": "a62220afa5cf336641a2d41180c716a0efd76651", "log": "added test for concurrent modifications   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestMap.java\n+++ b/src/test/org/apache/commons/collections/TestMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.14 2002/02/26 18:08:58 morgand Exp $\n- * $Revision: 1.14 $\n- * $Date: 2002/02/26 18:08:58 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.15 2002/05/08 17:54:28 morgand Exp $\n+ * $Revision: 1.15 $\n+ * $Date: 2002/05/08 17:54:28 $\n  *\n  * ====================================================================\n  *\n import java.io.IOException;\n import java.io.Serializable;\n import java.util.Collection;\n+import java.util.ConcurrentModificationException;\n import java.util.Map;\n import java.util.Collection;\n import java.util.Set;\n  *\n  * @author Michael Smith\n  * @author Rodney Waldhoff\n- * @version $Id: TestMap.java,v 1.14 2002/02/26 18:08:58 morgand Exp $\n+ * @version $Id: TestMap.java,v 1.15 2002/05/08 17:54:28 morgand Exp $\n  */\n public abstract class TestMap extends TestObject {\n \n         }\n     }\n \n+    public void testFailFastIterator() {\n+        Map fm = makeFullMap();\n+\n+        Iterator iterator = fm.keySet().iterator();\n+        try {\n+            fm.remove(getSampleKeys()[0]);\n+        } catch (UnsupportedOperationException e) {\n+            return;\n+        }\n+\n+        try {\n+            iterator.next();\n+            fail(\"Iterators typically throw ConcurrentModificationExceptions when underlying collection is modified.\");\n+        } catch (ConcurrentModificationException e) {\n+\n+        }\n+    }\n+\n     /**\n      *  Tests:\n      *  <ul>", "timestamp": 1020880468, "metainfo": ""}