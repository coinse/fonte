{"sha": "7e3f2dfbee952b11d78bc4c07690a0b1fd1ac41c", "log": "Improve tests from 37338  ", "commit": "\n--- a/src/test/org/apache/commons/collections/set/TestListOrderedSet.java\n+++ b/src/test/org/apache/commons/collections/set/TestListOrderedSet.java\n     \n     public void testListAddIndexed() {\n         ListOrderedSet set = (ListOrderedSet) makeEmptySet();\n-        List view = set.asList();\n         set.add(ZERO);\n         set.add(TWO);\n         \n         assertSame(THREE, set.get(1));\n         assertSame(TWO, set.get(2));\n         assertSame(ONE, set.get(3));\n+    }\n+\n+    public void testListAddReplacing() {\n+        ListOrderedSet set = (ListOrderedSet) makeEmptySet();\n+        A a = new A();\n+        B b = new B();\n+        set.add(a);\n+        assertEquals(1, set.size());\n+        set.add(b);  // will match but not replace A as equal\n+        assertEquals(1, set.size());\n+        assertSame(a, set.getSet().iterator().next());\n+        assertSame(a, set.iterator().next());\n+        assertSame(a, set.get(0));\n+        assertSame(a, set.asList().get(0));\n+    }\n+\n+    static class A {\n+        public boolean equals(Object obj) {\n+            return (obj instanceof A || obj instanceof B);\n+        }\n+        public int hashCode() {\n+            return 1;\n+        }\n+    }\n+\n+    static class B {\n+        public boolean equals(Object obj) {\n+            return (obj instanceof A || obj instanceof B);\n+        }\n+        public int hashCode() {\n+            return 1;\n+        }\n     }\n \n     public void testDecorator() {", "timestamp": 1131799201, "metainfo": ""}