{"sha": "68d2beaf425ed0ef80df467d121e779f60fc4b63", "log": "Applying my patch, with the obj creation commented out, from COLLECTIONS-285. This makes TreeBidiMap serializable.   ", "commit": "\n--- a/src/java/org/apache/commons/collections/bidimap/TreeBidiMap.java\n+++ b/src/java/org/apache/commons/collections/bidimap/TreeBidiMap.java\n  *  limitations under the License.\n  */\n package org.apache.commons.collections.bidimap;\n+\n+import java.io.Serializable;\n \n import java.util.AbstractSet;\n import java.util.Collection;\n  * @author Marc Johnson\n  * @author Stephen Colebourne\n  */\n-public class TreeBidiMap implements OrderedBidiMap {\n+public class TreeBidiMap implements OrderedBidiMap, Serializable {\n \n     private static final int KEY = 0;\n     private static final int VALUE = 1;\n     private Node[] rootNode = new Node[2];\n     private int nodeCount = 0;\n     private int modifications = 0;\n-    private Set keySet;\n-    private Set valuesSet;\n-    private Set entrySet;\n-    private TreeBidiMap.Inverse inverse = null;\n+\n+    private transient Set keySet;\n+    private transient Set valuesSet;\n+    private transient Set entrySet;\n+    private transient TreeBidiMap.Inverse inverse = null;\n \n     //-----------------------------------------------------------------------\n     /**\n     }\n \n     /**\n-     * Checks whether this map contains the a mapping for the specified value.\n+     * Checks whether this map contains a mapping for the specified value.\n      * <p>\n      * The value must implement <code>Comparable</code>.\n      *\n     /**\n      * A node used to store the data.\n      */\n-    static class Node implements Map.Entry, KeyValue {\n+    static class Node implements Map.Entry, KeyValue, Serializable {\n \n         private Comparable[] data;\n         private Node[] leftNode;\n--- a/src/test/org/apache/commons/collections/bidimap/TestTreeBidiMap.java\n+++ b/src/test/org/apache/commons/collections/bidimap/TestTreeBidiMap.java\n         return false;\n     }\n     \n+    public String getCompatibilityVersion() {\n+        return \"3.3\";\n+    }\n+\n+//    public void testCreate() throws Exception {\n+//        resetEmpty();\n+//        writeExternalFormToDisk((java.io.Serializable) map, \"/tmp/TreeBidiMap.emptyCollection.version3.3.obj\");\n+//        resetFull();\n+//        writeExternalFormToDisk((java.io.Serializable) map, \"/tmp/TreeBidiMap.fullCollection.version3.3.obj\");\n+//    }\n+\n }", "timestamp": 1210662634, "metainfo": ""}