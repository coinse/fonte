{"sha": "aea2f2fa32751f36a80be062aabdacf335627fee", "log": "Added a test to prove that a Map's keySet method is backed by the map. Also added a series of TODOs to cover all the other backing/non-backing possibilities.   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestMap.java\n+++ b/src/test/org/apache/commons/collections/TestMap.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.27 2003/10/02 03:42:03 bayard Exp $\n- * $Revision: 1.27 $\n- * $Date: 2003/10/02 03:42:03 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestMap.java,v 1.28 2003/10/02 04:04:22 bayard Exp $\n+ * $Revision: 1.28 $\n+ * $Date: 2003/10/02 04:04:22 $\n  *\n  * ====================================================================\n  *\n  * @author Michael Smith\n  * @author Rodney Waldhoff\n  * @author Paul Jack\n- * @version $Revision: 1.27 $ $Date: 2003/10/02 03:42:03 $\n+ * @version $Revision: 1.28 $ $Date: 2003/10/02 04:04:22 $\n  */\n public abstract class TestMap extends TestObject {\n \n     }\n \n     /**\n+     * Tests that the {@link Map#keySet} set is backed by\n+     * the underlying map by removing from the keySet set\n+     * and testing if the key was removed from the map.\n+     */\n+    public void testValuesRemovedFromKeySetAreRemovedFromMap() {\n+        resetFull();\n+        Object[] sampleKeys = getSampleKeys();\n+        Set keys = map.keySet();\n+        for(int i=0;i<sampleKeys.length;i++) {\n+            try {\n+                keys.remove(sampleKeys[i]);\n+            } catch(UnsupportedOperationException e) {\n+                // if key.remove is unsupported, just skip this test\n+                return;\n+            }\n+            assertTrue(\"Key should have been removed from the underlying map.\",!map.containsKey(sampleKeys[i]));\n+        }\n+    }\n+\n+    // TODO: Need:\n+    //    testValuesRemovedFromEntrySetAreRemovedFromMap\n+    //    same for EntrySet/KeySet/values's\n+    //      Iterator.remove, removeAll, retainAll, clear\n+    // TODO: Also need:\n+    //    Test that EntrySet/KeySet/values all do not allow add/addAll\n+\n+\n+    /**\n      *  Utility methods to create an array of Map.Entry objects\n      *  out of the given key and value arrays.<P>\n      *", "timestamp": 1065067462, "metainfo": ""}