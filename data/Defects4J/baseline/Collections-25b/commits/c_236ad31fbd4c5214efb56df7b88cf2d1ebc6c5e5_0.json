{"sha": "236ad31fbd4c5214efb56df7b88cf2d1ebc6c5e5", "log": "using the setArray(Object) method no longer produces an out of bounds exception   ", "commit": "\n--- a/src/java/org/apache/commons/collections/ArrayIterator.java\n+++ b/src/java/org/apache/commons/collections/ArrayIterator.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/Attic/ArrayIterator.java,v 1.9 2002/03/15 17:33:52 morgand Exp $\n- * $Revision: 1.9 $\n- * $Date: 2002/03/15 17:33:52 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/java/org/apache/commons/collections/Attic/ArrayIterator.java,v 1.10 2002/03/19 00:05:10 morgand Exp $\n+ * $Revision: 1.10 $\n+ * $Date: 2002/03/19 00:05:10 $\n  *\n  * ====================================================================\n  *\n   *\n   * @author <a href=\"mailto:jstrachan@apache.org\">James Strachan</a>\n   * @author Mauricio S. Moura\n-  * @version $Revision: 1.9 $\n+  * @version $Revision: 1.10 $\n   */\n public class ArrayIterator implements Iterator {\n     \n     \n     public void setArray( Object array ) {\n         this.array = array;\n-        this.index = -1;\n+        this.index = 0;\n     }\n }\n--- a/src/test/org/apache/commons/collections/TestArrayIterator2.java\n+++ b/src/test/org/apache/commons/collections/TestArrayIterator2.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestArrayIterator2.java,v 1.2 2002/02/25 22:48:52 morgand Exp $\n- * $Revision: 1.2 $\n- * $Date: 2002/02/25 22:48:52 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestArrayIterator2.java,v 1.3 2002/03/19 00:05:16 morgand Exp $\n+ * $Revision: 1.3 $\n+ * $Date: 2002/03/19 00:05:16 $\n  *\n  * ====================================================================\n  *\n  * \n  * @author Morgan Delagrange\n  * @author James Strachan\n- * @version $Id: TestArrayIterator2.java,v 1.2 2002/02/25 22:48:52 morgand Exp $\n+ * @version $Id: TestArrayIterator2.java,v 1.3 2002/03/19 00:05:16 morgand Exp $\n  */\n public class TestArrayIterator2 extends TestIterator {\n     \n \t\t e.getClass().equals((new NoSuchElementException()).getClass()));\n \t}\n     }\n+\n+    // proves that an ArrayIterator set with the constructor has the same number of elements\n+    // as an ArrayIterator set with setArray(Object) \n+    public void testSetArray() {\n+        Iterator iter1 = new ArrayIterator(testArray);\n+        int count1 = 0;\n+        while (iter1.hasNext()) {\n+            ++count1;\n+            iter1.next();\n+        }\n+\n+        assertEquals(\"the count should be right using the constructor\",\n+                     count1,testArray.length);\n+\n+        ArrayIterator iter2 = new ArrayIterator();\n+        iter2.setArray(testArray);\n+        int count2 = 0;\n+        while (iter2.hasNext()) {\n+            ++count2;\n+            iter2.next();\n+        }\n+\n+        assertEquals(\"the count should be right using setArray(Object)\",\n+                     count2,testArray.length);\n+    }\n }\n ", "timestamp": 1016496316, "metainfo": ""}