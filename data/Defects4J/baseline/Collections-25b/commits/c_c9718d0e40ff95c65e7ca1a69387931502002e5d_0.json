{"sha": "c9718d0e40ff95c65e7ca1a69387931502002e5d", "log": "Add extra handling for improved Map internals   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestCollection.java\n+++ b/src/test/org/apache/commons/collections/TestCollection.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestCollection.java,v 1.10 2003/04/26 10:25:35 scolebourne Exp $\n- * $Revision: 1.10 $\n- * $Date: 2003/04/26 10:25:35 $\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestCollection.java,v 1.11 2003/05/09 18:34:19 scolebourne Exp $\n+ * $Revision: 1.11 $\n+ * $Date: 2003/05/09 18:34:19 $\n  *\n  * ====================================================================\n  *\n import java.util.HashSet;\n import java.util.Iterator;\n import java.util.List;\n+import java.util.Map;\n import java.util.NoSuchElementException;\n \n \n  * @author Paul Jack\n  * @author <a href=\"mailto:mas@apache.org\">Michael A. Smith</a>\n  * @author Neil O'Toole\n- * @version $Id: TestCollection.java,v 1.10 2003/04/26 10:25:35 scolebourne Exp $\n+ * @version $Id: TestCollection.java,v 1.11 2003/05/09 18:34:19 scolebourne Exp $\n  */\n public abstract class TestCollection extends TestObject {\n \n         if (classes.size() > 1) return;\n         \n         Class cl = (Class)classes.iterator().next();\n+        if (Map.Entry.class.isAssignableFrom(cl)) {  // check needed for protective cases like Predicated/Unmod map entrySet\n+            cl = Map.Entry.class;\n+        }\n         a = (Object[])Array.newInstance(cl, 0);\n         array = collection.toArray(a);\n         assertEquals(\"toArray(Object[]) should return correct array type\",", "timestamp": 1052505259, "metainfo": ""}