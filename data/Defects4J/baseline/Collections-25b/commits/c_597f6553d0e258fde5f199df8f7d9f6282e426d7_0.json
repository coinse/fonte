{"sha": "597f6553d0e258fde5f199df8f7d9f6282e426d7", "log": "Add isSetSupported test to allow for immutable Lists from Rich Dougherty, bug fix 15128   ", "commit": "\n--- a/src/test/org/apache/commons/collections/TestList.java\n+++ b/src/test/org/apache/commons/collections/TestList.java\n /*\n- * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestList.java,v 1.14 2002/11/07 21:32:36 bayard Exp $\n- * $Revision: 1.14 $\n- * $Date: 2002/11/07 21:32:36 $\n- *\n+ * $Header: /home/jerenkrantz/tmp/commons/commons-convert/cvs/home/cvs/jakarta-commons//collections/src/test/org/apache/commons/collections/Attic/TestList.java,v 1.15 2003/01/25 12:55:43 scolebourne Exp $\n  * ====================================================================\n  *\n  * The Apache Software License, Version 1.1\n  *\n- * Copyright (c) 1999-2001 The Apache Software Foundation.  All rights\n+ * Copyright (c) 1999-2003 The Apache Software Foundation.  All rights\n  * reserved.\n  *\n  * Redistribution and use in source and binary forms, with or without\n  *    distribution.\n  *\n  * 3. The end-user documentation included with the redistribution, if\n- *    any, must include the following acknowlegement:\n+ *    any, must include the following acknowledgment:\n  *       \"This product includes software developed by the\n  *        Apache Software Foundation (http://www.apache.org/).\"\n- *    Alternately, this acknowlegement may appear in the software itself,\n- *    if and wherever such third-party acknowlegements normally appear.\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n  *\n  * 4. The names \"The Jakarta Project\", \"Commons\", and \"Apache Software\n  *    Foundation\" must not be used to endorse or promote products derived\n  *\n  * 5. Products derived from this software may not be called \"Apache\"\n  *    nor may \"Apache\" appear in their names without prior written\n- *    permission of the Apache Group.\n+ *    permission of the Apache Software Foundation.\n  *\n  * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n  * <http://www.apache.org/>.\n  *\n  */\n-\n package org.apache.commons.collections;\n \n import java.io.IOException;\n import java.util.ListIterator;\n import java.util.NoSuchElementException;\n \n-\n /**\n  * Tests base {@link java.util.List} methods and contracts.\n  * <p>\n  * you may still use this base set of cases.  Simply override the\n  * test case (method) your {@link List} fails.\n  *\n+ * @version $Revision: 1.15 $ $Date: 2003/01/25 12:55:43 $\n+ * \n  * @author Rodney Waldhoff\n  * @author Paul Jack\n- * @version $Id: TestList.java,v 1.14 2002/11/07 21:32:36 bayard Exp $\n+ * @author Stephen Colebourne\n  */\n public abstract class TestList extends TestCollection {\n \n      */\n     final protected Collection makeFullCollection() {\n         return makeFullList();\n+    }\n+\n+\n+    /**\n+     *  Returns true if the collections produced by \n+     *  {@link #makeCollection()} and {@link #makeFullCollection()}\n+     *  support the <code>set</code> operation.<p>\n+     *  Default implementation returns true.  Override if your collection\n+     *  class does not support set.\n+     */\n+    protected boolean isSetSupported() {\n+        return true;\n     }\n \n \n      *  empty list.\n      */\n     public void testListSetByIndexBoundsChecking() {\n+        if (!isSetSupported()) return;\n+\n         List list = makeEmptyList();\n         Object element = getOtherElements()[0];\n \n      *  full list.\n      */\n     public void testListSetByIndexBoundsChecking2() {\n+        if (!isSetSupported()) return;\n+\n         List list = makeFullList();\n         Object element = getOtherElements()[0];\n \n      *  Test {@link List#set(int,Object)}.\n      */\n     public void testListSetByIndex() {\n+        if (!isSetSupported()) return;\n+\n         resetFull();\n         Object[] elements = getFullElements();\n         Object[] other = getOtherElements();\n         }\n     }\n \n+\n+    /**\n+     *  If {@link #isSetSupported()} returns false, tests that set operation\n+     *  raises <Code>UnsupportedOperationException.\n+     */\n+    public void testUnsupportedSet() {\n+        if (isSetSupported()) return;\n+        \n+        resetFull();\n+        try {\n+            ((List) collection).set(0, new Object());\n+            fail(\"Emtpy collection should not support set.\");\n+        } catch (UnsupportedOperationException e) {\n+            // expected\n+        }\n+        // make sure things didn't change even if the expected exception was\n+        // thrown.\n+        verify();\n+    }\n+    \n \n     /**\n      *  Tests bounds checking for {@link List#remove(int)} on an\n      *  iterator.\n      */\n     public void testListIteratorSet() {\n-        if (!isAddSupported()) return;\n+        if (!isSetSupported()) return;\n \n         Object[] elements = getFullElements();\n ", "timestamp": 1043499343, "metainfo": ""}