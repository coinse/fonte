{"sha": "04af9bc8eec8397c0a5c3502145db66eb0c87ecb", "log": "Exclude more test cases for IBM JDK 6 as these are failing for release SR15.  ", "commit": "\n--- a/src/test/java/org/apache/commons/collections4/BulkTest.java\n+++ b/src/test/java/org/apache/commons/collections4/BulkTest.java\n  */\n public class BulkTest extends TestCase implements Cloneable {\n \n+    /**\n+     * IBM JDK 1.6.0 has several bugs in their java.util.TreeMap implementation.\n+     */\n+    protected static final boolean IBMJDK16;\n+    static {\n+        final String vmName = System.getProperty(\"java.vm.name\");\n+        final String version = System.getProperty(\"java.version\");\n+\n+        IBMJDK16 = vmName != null  && vmName.equals(\"IBM J9 VM\") &&\n+                   version != null && version.equals(\"1.6.0\");\n+    }\n \n     // Note:  BulkTest is Cloneable to make it easier to construct\n     // BulkTest instances for simple test methods that are defined in\n--- a/src/test/java/org/apache/commons/collections4/bidimap/DualTreeBidiMap2Test.java\n+++ b/src/test/java/org/apache/commons/collections4/bidimap/DualTreeBidiMap2Test.java\n     public String[] ignoredTests() {\n         String recursiveTest = \"DualTreeBidiMap2Test.bulkTestInverseMap.bulkTestInverseMap\";\n \n-        // there are several bugs in the following JVM:\n-        // IBM J9 VM build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr12-20121024_126067\n-        // thus disabling tests related to these bugs\n-\n-        final String vmName = System.getProperty(\"java.vm.name\");\n-        final String version = System.getProperty(\"java.version\");\n-\n-        if (vmName == null || version == null) {\n-            return new String[] { recursiveTest };\n-        }\n-\n-        if (vmName.equals(\"IBM J9 VM\") && version.equals(\"1.6.0\")) {\n-            final String preSub = \"DualTreeBidiMap2Test.bulkTestSubMap.bulkTestMap\";\n-            final String preTail = \"DualTreeBidiMap2Test.bulkTestTailMap.bulkTestMap\";\n+        if (IBMJDK16) {\n+            final String preSub = \"DualTreeBidiMap2Test.bulkTestSubMap.\";\n+            final String preTail = \"DualTreeBidiMap2Test.bulkTestTailMap.\";\n             return new String[] {\n                     recursiveTest,\n-                    preSub + \"EntrySet.testCollectionIteratorRemove\",\n-                    preSub + \"Values.testCollectionIteratorRemove\",\n-                    preTail + \"Values.testCollectionClear\",\n-                    preTail + \"Values.testCollectionRemoveAll\",\n-                    preTail + \"Values.testCollectionRetainAll\"\n+                    preSub + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preSub + \"bulkTestMapValues.testCollectionIteratorRemove\",\n+                    preTail + \"testMapRemove\",\n+                    preTail + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preTail + \"bulkTestMapEntrySet.testCollectionRemoveAll\",\n+                    preTail + \"bulkTestMapKeySet.testCollectionIteratorRemove\",\n+                    preTail + \"bulkTestMapKeySet.testCollectionRemoveAll\",                    \n+                    preTail + \"bulkTestMapValues.testCollectionClear\",\n+                    preTail + \"bulkTestMapValues.testCollectionRemoveAll\",\n+                    preTail + \"bulkTestMapValues.testCollectionRetainAll\"\n             };\n         } else {\n             return new String[] { recursiveTest };\n--- a/src/test/java/org/apache/commons/collections4/bidimap/DualTreeBidiMapTest.java\n+++ b/src/test/java/org/apache/commons/collections4/bidimap/DualTreeBidiMapTest.java\n      */\n     @Override\n     public String[] ignoredTests() {\n-        String recursiveTest = \"DualTreeBidiMapTest.bulkTestInverseMap.bulkTestInverseMap\";\n+        final String recursiveTest = \"DualTreeBidiMapTest.bulkTestInverseMap.bulkTestInverseMap\";\n \n-        // there are several bugs in the following JVM:\n-        // IBM J9 VM build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr12-20121024_126067\n-        // thus disabling tests related to these bugs\n-\n-        final String vmName = System.getProperty(\"java.vm.name\");\n-        final String version = System.getProperty(\"java.version\");\n-\n-        if (vmName == null || version == null) {\n-            return new String[] { recursiveTest };\n-        }\n-\n-        if (vmName.equals(\"IBM J9 VM\") && version.equals(\"1.6.0\")) {\n-            final String preSub = \"DualTreeBidiMapTest.bulkTestSubMap.bulkTestMap\";\n-            final String preTail = \"DualTreeBidiMapTest.bulkTestTailMap.bulkTestMap\";\n+        if (IBMJDK16) {\n+            final String preSub = \"DualTreeBidiMapTest.bulkTestSubMap.\";\n+            final String preTail = \"DualTreeBidiMapTest.bulkTestTailMap.\";\n             return new String[] {\n                     recursiveTest,\n-                    preSub + \"EntrySet.testCollectionIteratorRemove\",\n-                    preSub + \"Values.testCollectionIteratorRemove\",\n-                    preTail + \"Values.testCollectionClear\",\n-                    preTail + \"Values.testCollectionRemoveAll\",\n-                    preTail + \"Values.testCollectionRetainAll\"\n+                    preSub + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preSub + \"bulkTestMapValues.testCollectionIteratorRemove\",\n+                    preTail + \"testMapRemove\",\n+                    preTail + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preTail + \"bulkTestMapEntrySet.testCollectionRemoveAll\",\n+                    preTail + \"bulkTestMapKeySet.testCollectionIteratorRemove\",\n+                    preTail + \"bulkTestMapKeySet.testCollectionRemoveAll\",                    \n+                    preTail + \"bulkTestMapValues.testCollectionClear\",\n+                    preTail + \"bulkTestMapValues.testCollectionRemoveAll\",\n+                    preTail + \"bulkTestMapValues.testCollectionRetainAll\"\n             };\n         } else {\n             return new String[] { recursiveTest };\n--- a/src/test/java/org/apache/commons/collections4/map/TransformedSortedMapTest.java\n+++ b/src/test/java/org/apache/commons/collections4/map/TransformedSortedMapTest.java\n \n     @Override\n     public String[] ignoredTests() {\n-        // there are several bugs in the following JVM:\n-        // IBM J9 VM build 2.4, JRE 1.6.0 IBM J9 2.4 Linux x86-32 jvmxi3260sr12-20121024_126067\n-        // thus disabling tests related to these bugs\n-\n-        final String vmName = System.getProperty(\"java.vm.name\");\n-        final String version = System.getProperty(\"java.version\");\n-\n-        if (vmName == null || version == null) {\n-            return null;\n-        }\n-\n-        if (vmName.equals(\"IBM J9 VM\") && version.equals(\"1.6.0\")) {\n-            final String preSubMap = \"TransformedSortedMapTest.bulkTestSubMap.bulkTestMap\";\n-            final String preTailMap = \"TransformedSortedMapTest.bulkTestTailMap.bulkTestMap\";\n+        if (IBMJDK16) {\n+            final String preSubMap = \"TransformedSortedMapTest.bulkTestSubMap.\";\n+            final String preTailMap = \"TransformedSortedMapTest.bulkTestTailMap.\";\n             return new String[] {\n-                    preSubMap + \"EntrySet.testCollectionIteratorRemove\",\n-                    preSubMap + \"KeySet.testCollectionRemove\",\n-                    preSubMap + \"Values.testCollectionIteratorRemove\",\n-                    preTailMap + \"Values.testCollectionClear\",\n-                    preTailMap + \"Values.testCollectionRemoveAll\",\n-                    preTailMap + \"Values.testCollectionRetainAll\"\n+                    preSubMap + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preSubMap + \"bulkTestMapKeySet.testCollectionRemove\",\n+                    preSubMap + \"bulkTestMapValues.testCollectionIteratorRemove\",\n+                    preTailMap + \"testMapRemove\",\n+                    preTailMap + \"bulkTestMapEntrySet.testCollectionIteratorRemove\",\n+                    preTailMap + \"bulkTestMapEntrySet.testCollectionRemoveAll\",\n+                    preTailMap + \"bulkTestMapKeySet.testCollectionIteratorRemove\",\n+                    preTailMap + \"bulkTestMapKeySet.testCollectionRemoveAll\",                    \n+                    preTailMap + \"bulkTestMapValues.testCollectionClear\",\n+                    preTailMap + \"bulkTestMapValues.testCollectionRemoveAll\",\n+                    preTailMap + \"bulkTestMapValues.testCollectionRetainAll\"\n             };\n         } else {\n             return null;\n--- a/src/test/java/org/apache/commons/collections4/trie/UnmodifiableTrieTest.java\n+++ b/src/test/java/org/apache/commons/collections4/trie/UnmodifiableTrieTest.java\n \n     //-----------------------------------------------------------------------\n \n+    /**\n+     * Override to prevent infinite recursion of tests.\n+     */\n+    @Override\n+    public String[] ignoredTests() {\n+        if (IBMJDK16) {\n+            final String prefix = \"UnmodifiableTrieTest.\";\n+            return new String[] {\n+                    prefix + \"bulkTestHeadMap.bulkTestMapEntrySet.testCollectionToArray2\",\n+                    prefix + \"bulkTestTailMap.bulkTestMapEntrySet.testCollectionToArray2\",\n+                    prefix + \"bulkTestSubMap.bulkTestMapEntrySet.testCollectionToArray2\"\n+            };\n+        } else {\n+            return null;\n+        }\n+    }\n+\n     @Override\n     public String getCompatibilityVersion() {\n         return \"4\";", "timestamp": 1384462622, "metainfo": ""}