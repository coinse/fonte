{"sha": "e52c4c50e16cec8e99055f717a78bede32b29d4b", "log": "Calculate threshold before putting data in deserialization to avoid memory issue bug 34265, reported by Marcos Cesar de Oliveira  ", "commit": "\n--- a/src/java/org/apache/commons/collections/map/AbstractHashedMap.java\n+++ b/src/java/org/apache/commons/collections/map/AbstractHashedMap.java\n         int capacity = in.readInt();\n         int size = in.readInt();\n         init();\n+        threshold = calculateThreshold(capacity, loadFactor);\n         data = new HashEntry[capacity];\n         for (int i = 0; i < size; i++) {\n             Object key = in.readObject();\n             Object value = in.readObject();\n             put(key, value);\n         }\n-        threshold = calculateThreshold(data.length, loadFactor);\n     }\n     \n     //-----------------------------------------------------------------------", "timestamp": 1115489072, "metainfo": ""}