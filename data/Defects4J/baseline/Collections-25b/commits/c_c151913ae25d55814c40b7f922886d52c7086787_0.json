{"sha": "c151913ae25d55814c40b7f922886d52c7086787", "log": "[COLLECTIONS-481] Use varargs parameter in CompositeSet.addComposited, fixed conflict resolution when using more than 1 Set as argument. Thanks to Hollis Waite.  ", "commit": "\n--- a/src/main/java/org/apache/commons/collections4/set/CompositeSet.java\n+++ b/src/main/java/org/apache/commons/collections4/set/CompositeSet.java\n import java.io.Serializable;\n import java.lang.reflect.Array;\n import java.util.ArrayList;\n-import java.util.Arrays;\n import java.util.Collection;\n import java.util.HashSet;\n import java.util.Iterator;\n      * @param set  the set to add\n      * @throws IllegalArgumentException if a SetMutator is set, but fails to resolve a collision\n      * @throws UnsupportedOperationException if there is no SetMutator set\n+     * @throws NullPointerException if {@code set} is null\n      * @see SetMutator\n      */\n     public synchronized void addComposited(final Set<E> set) {\n      * @param set2  the second Set to be appended to the composite\n      */\n     public void addComposited(final Set<E> set1, final Set<E> set2) {\n-        all.add(set1);\n-        all.add(set2);\n+        addComposited(set1);\n+        addComposited(set2);\n     }\n \n     /**\n      *\n      * @param sets  the Sets to be appended to the composite\n      */\n-    public void addComposited(final Set<E>[] sets) {\n-        all.addAll(Arrays.asList(sets));\n+    public void addComposited(final Set<E>... sets) {\n+        for (Set<E> set : sets) {\n+            addComposited(set);\n+        }\n     }\n \n     /**\n--- a/src/test/java/org/apache/commons/collections4/set/CompositeSetTest.java\n+++ b/src/test/java/org/apache/commons/collections4/set/CompositeSetTest.java\n         }\n     }\n \n+    @SuppressWarnings(\"unchecked\")\n+    public void testAddCompositedCollision() {\n+        final HashSet<E> set1 = new HashSet<E>();\n+        set1.add((E) \"1\");\n+        set1.add((E) \"2\");\n+        set1.add((E) \"3\");\n+        final HashSet<E> set2 = new HashSet<E>();\n+        set2.add((E) \"4\");\n+        final CompositeSet<E> set3 = new CompositeSet<E>(set1);\n+        try {\n+            set3.addComposited(set1, buildOne());\n+            fail(\"Expecting UnsupportedOperationException.\");\n+        } catch (final UnsupportedOperationException ex) {\n+            // expected\n+        }\n+        try {\n+            set3.addComposited(set1, buildOne(), buildTwo());\n+            fail(\"Expecting UnsupportedOperationException.\");\n+        } catch (final UnsupportedOperationException ex) {\n+            // expected\n+        }\n+    }\n+\n     @Override\n     public String getCompatibilityVersion() {\n         return \"4\";", "timestamp": 1378755529, "metainfo": ""}