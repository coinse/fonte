{"sha": "6ba1a28a39f42d411689d71bc11932c820cb4265", "log": "Fix checkstyle warning wrt inner assignments, added unit test.  ", "commit": "\n--- a/src/main/java/org/apache/commons/cli/HelpFormatter.java\n+++ b/src/main/java/org/apache/commons/cli/HelpFormatter.java\n      */\n     protected int findWrapPos(String text, int width, int startPos)\n     {\n-        int pos;\n-\n         // the line ends before the max wrap pos or a new line char found\n-        if (((pos = text.indexOf('\\n', startPos)) != -1 && pos <= width)\n-                || ((pos = text.indexOf('\\t', startPos)) != -1 && pos <= width))\n+        int pos = text.indexOf('\\n', startPos);\n+        if (pos != -1 && pos <= width)\n         {\n             return pos + 1;\n         }\n-        else if (startPos + width >= text.length())\n+\n+        pos = text.indexOf('\\t', startPos);\n+        if (pos != -1 && pos <= width)\n+        {\n+            return pos + 1;\n+        }\n+\n+        if (startPos + width >= text.length())\n         {\n             return -1;\n         }\n \n-\n         // look for the last whitespace character before startPos+width\n-        pos = startPos + width;\n-\n-        char c;\n-\n-        while ((pos >= startPos) && ((c = text.charAt(pos)) != ' ')\n-                && (c != '\\n') && (c != '\\r'))\n-        {\n-            --pos;\n+        for (pos = startPos + width; pos >= startPos; --pos)\n+        {\n+            final char c = text.charAt(pos);\n+            if (c == ' ' || c == '\\n' || c == '\\r')\n+            {\n+                break;\n+            }\n         }\n \n         // if we found it - just return\n--- a/src/test/java/org/apache/commons/cli/HelpFormatterTest.java\n+++ b/src/test/java/org/apache/commons/cli/HelpFormatterTest.java\n         text = \"aaaaaa aaaaaa\";\n         assertEquals(\"wrap position 4\", 6, hf.findWrapPos(text, 6, 0));\n         assertEquals(\"wrap position 4\", -1, hf.findWrapPos(text, 6, 7));\n+        \n+        text = \"aaaaaa\\n aaaaaa\";\n+        assertEquals(\"wrap position 5\", 7, hf.findWrapPos(text, 6, 0));\n+        \n+        text = \"aaaaaa\\t aaaaaa\";\n+        assertEquals(\"wrap position 6\", 7, hf.findWrapPos(text, 6, 0));\n     }\n \n     public void testRenderWrappedTextWordCut()", "timestamp": 1359478682, "metainfo": ""}