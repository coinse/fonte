{"sha": "d72a578a8949e4b1c437ec55997d8786836f139c", "log": "Parser no longer removes the required options from the Options instance (CLI-156)  ", "commit": "\n--- a/src/java/org/apache/commons/cli/Parser.java\n+++ b/src/java/org/apache/commons/cli/Parser.java\n  */\n package org.apache.commons.cli;\n \n+import java.util.ArrayList;\n import java.util.Arrays;\n import java.util.Enumeration;\n import java.util.Iterator;\n \n     protected void setOptions(final Options options) {\n         this.options = options;\n-        this.requiredOptions = options.getRequiredOptions();\n+        this.requiredOptions = new ArrayList(options.getRequiredOptions());\n     }\n \n     protected Options getOptions() {\n--- a/src/test/org/apache/commons/cli/ParseRequiredTest.java\n+++ b/src/test/org/apache/commons/cli/ParseRequiredTest.java\n         }\n     }\n \n+    public void testReuseOptionsTwice() throws Exception\n+    {\n+        Options opts = new Options();\n+\t\topts.addOption(OptionBuilder.isRequired().create('v'));\n+\n+\t\tGnuParser parser = new GnuParser();\n+\n+        // first parsing\n+        parser.parse(opts, new String[] { \"-v\" });\n+\n+        try\n+        {\n+            // second parsing, with the same Options instance and an invalid command line\n+            parser.parse(opts, new String[0]);\n+            fail(\"MissingOptionException not thrown\");\n+        }\n+        catch (MissingOptionException e)\n+        {\n+            // expected\n+        }\n+    }\n+\n }", "timestamp": 1212068120, "metainfo": ""}