{"sha": "02dd7c20646bf67dcfb6f7da6beeb7cdffc6ac22", "log": "Switching from the IllegalStateException to trying hard to work. A better user experience and didn't end up with the code being any more evil. CLI-162  ", "commit": "\n--- a/src/java/org/apache/commons/cli/HelpFormatter.java\n+++ b/src/java/org/apache/commons/cli/HelpFormatter.java\n         if (nextLineTabStop >= width)\n         {\n             // stops infinite loop happening\n-            throw new IllegalStateException(\"Total width is less than the width of the argument and indent \" + \n-                                            \"- no room for the description\");\n+            nextLineTabStop = width - 1;\n         }\n \n         // all following lines must be padded with nextLineTabStop space \n--- a/src/test/org/apache/commons/cli/bug/BugCLI162Test.java\n+++ b/src/test/org/apache/commons/cli/bug/BugCLI162Test.java\n                           \"                      yes.\\n\" +\n                           \"Footer\\n\";\n         assertEquals( \"Long arguments did not split as expected\", expected, sw.toString() );\n-\n-        try {\n-            formatter.printHelp(new PrintWriter(sw), 22, this.getClass().getName(), \"Header\", options, 0, 5, \"Footer\");\n-            fail(\"IllegalStateException expected\");\n-        } catch(IllegalStateException ise) {\n-            // expected\n-        }\n-\n     }\n \n+    public void testLongLineChunkingIndentIgnored() throws ParseException, IOException {\n+        Options options = new Options();\n+        options.addOption(\"x\", \"extralongarg\", false, \"This description is Long.\" );\n+        HelpFormatter formatter = new HelpFormatter();\n+        StringWriter sw = new StringWriter();\n+        formatter.printHelp(new PrintWriter(sw), 22, this.getClass().getName(), \"Header\", options, 0, 5, \"Footer\");\n+        String expected = \"usage:\\n\" +\n+                          \"       org.apache.comm\\n\" +\n+                          \"       ons.cli.bug.Bug\\n\" +\n+                          \"       CLI162Test\\n\" +\n+                          \"Header\\n\" +\n+                          \"-x,--extralongarg\\n\" +\n+                          \"                     T\\n\" +\n+                          \"                     h\\n\" +\n+                          \"                     i\\n\" +\n+                          \"                     s\\n\" +\n+                          \"                     d\\n\" +\n+                          \"                     e\\n\" +\n+                          \"                     s\\n\" +\n+                          \"                     c\\n\" +\n+                          \"                     r\\n\" +\n+                          \"                     i\\n\" +\n+                          \"                     p\\n\" +\n+                          \"                     t\\n\" +\n+                          \"                     i\\n\" +\n+                          \"                     o\\n\" +\n+                          \"                     n\\n\" +\n+                          \"                     i\\n\" +\n+                          \"                     s\\n\" +\n+                          \"                     L\\n\" +\n+                          \"                     o\\n\" +\n+                          \"                     n\\n\" +\n+                          \"                     g\\n\" +\n+                          \"                     .\\n\" +\n+                          \"Footer\\n\";\n+        assertEquals( \"Long arguments did not split as expected\", expected, sw.toString() );\n+    }\n+\n }", "timestamp": 1235727251, "metainfo": ""}