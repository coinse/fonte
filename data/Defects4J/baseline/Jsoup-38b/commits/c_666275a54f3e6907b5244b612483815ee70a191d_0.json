{"sha": "666275a54f3e6907b5244b612483815ee70a191d", "log": "Only create attribute objects for end tag tokens when required.  Saves a bit of GC time.", "commit": "\n--- a/src/main/java/org/jsoup/parser/Token.java\n+++ b/src/main/java/org/jsoup/parser/Token.java\n         private StringBuilder pendingAttributeValue; // but values are accumulated, from e.g. & in hrefs\n \n         boolean selfClosing = false;\n-        Attributes attributes = new Attributes(); // todo: allow nodes to not have attributes\n+        Attributes attributes; // start tags get attributes on construction. End tags get attributes on first new attribute (but only for parser convenience, not used).\n \n         void newAttribute() {\n+            if (attributes == null)\n+                attributes = new Attributes();\n+\n             if (pendingAttributeName != null) {\n                 Attribute attribute;\n                 if (pendingAttributeValue == null)\n     static class StartTag extends Tag {\n         StartTag() {\n             super();\n+            attributes = new Attributes();\n             type = TokenType.StartTag;\n         }\n \n \n         @Override\n         public String toString() {\n-            return \"<\" + name() + \" \" + attributes.toString() + \">\";\n+            if (attributes != null && attributes.size() > 0)\n+                return \"<\" + name() + \" \" + attributes.toString() + \">\";\n+            else\n+                return \"<\" + name() + \">\";\n         }\n     }\n \n \n         @Override\n         public String toString() {\n-            return \"</\" + name() + \" \" + attributes.toString() + \">\";\n+            return \"</\" + name() + \">\";\n         }\n     }\n \n--- a/src/main/java/org/jsoup/parser/Tokeniser.java\n+++ b/src/main/java/org/jsoup/parser/Tokeniser.java\n                 selfClosingFlagAcknowledged = false;\n         } else if (token.type == Token.TokenType.EndTag) {\n             Token.EndTag endTag = (Token.EndTag) token;\n-            if (endTag.attributes.size() > 0)\n+            if (endTag.attributes != null)\n                 error(\"Attributes incorrectly present on end tag\");\n         }\n     }", "timestamp": 1338779352, "metainfo": ""}