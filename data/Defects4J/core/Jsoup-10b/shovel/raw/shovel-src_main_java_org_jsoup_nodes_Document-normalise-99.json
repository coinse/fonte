{
  "origin": "codeshovel",
  "repositoryName": "Jsoup-10b",
  "repositoryPath": "/tmp/Jsoup-10b//.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Document.java",
  "functionName": "normalise",
  "functionId": "normalise",
  "sourceFilePath": "src/main/java/org/jsoup/nodes/Document.java",
  "functionAnnotation": "",
  "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n",
  "functionStartLine": 99,
  "functionEndLine": 118,
  "numCommitsSeen": 26,
  "timeTaken": 601,
  "changeHistory": [
    "82855b07f5336d30c70dc20548ab7ab8adeac05e",
    "daf4666075b44c4405f7dc648467bdd39c236556",
    "27a52f90a25699bebe23ff1ff94d6db361fdb11d",
    "6b60af669bc6102f0328af330532986b8670f3ac",
    "d24b485e252d9e86858207da7a57678d41d3f72c"
  ],
  "changeHistoryShort": {
    "82855b07f5336d30c70dc20548ab7ab8adeac05e": "Ybodychange",
    "daf4666075b44c4405f7dc648467bdd39c236556": "Ybodychange",
    "27a52f90a25699bebe23ff1ff94d6db361fdb11d": "Ybodychange",
    "6b60af669bc6102f0328af330532986b8670f3ac": "Ybodychange",
    "d24b485e252d9e86858207da7a57678d41d3f72c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "82855b07f5336d30c70dc20548ab7ab8adeac05e": {
      "type": "Ybodychange",
      "commitMessage": "Document normalisation now more correctly enforces document structure.\n - ensure only one head and one body element, both under html el\n - allow html/head/noscript/img for some site\u0027s analytic pattern\n\nFixes #43\n",
      "commitDate": "7/2/11, 4:12 AM",
      "commitName": "82855b07f5336d30c70dc20548ab7ab8adeac05e",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "7/2/11, 4:11 AM",
      "commitNameOld": "e256bb7fc5979de256371bb324f1ca1330e38112",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 33,
      "commitsBetweenForFile": 1,
      "actualSource": "public Document normalise() {\n    Element htmlEl \u003d findFirstElementByTagName(\"html\", this);\n    if (htmlEl \u003d\u003d null)\n        htmlEl \u003d appendElement(\"html\");\n    if (head() \u003d\u003d null)\n        htmlEl.prependElement(\"head\");\n    if (body() \u003d\u003d null)\n        htmlEl.appendElement(\"body\");\n    normaliseTextNodes(head());\n    normaliseTextNodes(htmlEl);\n    normaliseTextNodes(this);\n    normaliseStructure(\"head\", htmlEl);\n    normaliseStructure(\"body\", htmlEl);\n    return this;\n}",
      "path": "src/main/java/org/jsoup/nodes/Document.java",
      "functionStartLine": 99,
      "functionName": "normalise",
      "functionAnnotation": "",
      "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n",
      "diff": "@@ -1,13 +1,15 @@\n public Document normalise() {\n     Element htmlEl \u003d findFirstElementByTagName(\"html\", this);\n     if (htmlEl \u003d\u003d null)\n         htmlEl \u003d appendElement(\"html\");\n     if (head() \u003d\u003d null)\n         htmlEl.prependElement(\"head\");\n     if (body() \u003d\u003d null)\n         htmlEl.appendElement(\"body\");\n-    normalise(head());\n-    normalise(htmlEl);\n-    normalise(this);\n+    normaliseTextNodes(head());\n+    normaliseTextNodes(htmlEl);\n+    normaliseTextNodes(this);\n+    normaliseStructure(\"head\", htmlEl);\n+    normaliseStructure(\"body\", htmlEl);\n     return this;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "daf4666075b44c4405f7dc648467bdd39c236556": {
      "type": "Ybodychange",
      "commitMessage": "Optimised document normalisation\n",
      "commitDate": "7/2/11, 4:11 AM",
      "commitName": "daf4666075b44c4405f7dc648467bdd39c236556",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "7/2/11, 4:11 AM",
      "commitNameOld": "57bce6dc8424637621f6b660855f23e72a08c4b3",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "actualSource": "public Document normalise() {\n    Element htmlEl \u003d findFirstElementByTagName(\"html\", this);\n    if (htmlEl \u003d\u003d null)\n        htmlEl \u003d appendElement(\"html\");\n    if (head() \u003d\u003d null)\n        htmlEl.prependElement(\"head\");\n    if (body() \u003d\u003d null)\n        htmlEl.appendElement(\"body\");\n    normalise(head());\n    normalise(htmlEl);\n    normalise(this);\n    return this;\n}",
      "path": "src/main/java/org/jsoup/nodes/Document.java",
      "functionStartLine": 98,
      "functionName": "normalise",
      "functionAnnotation": "",
      "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n",
      "diff": "@@ -1,12 +1,13 @@\n public Document normalise() {\n-    if (select(\"html\").isEmpty())\n-        appendElement(\"html\");\n+    Element htmlEl \u003d findFirstElementByTagName(\"html\", this);\n+    if (htmlEl \u003d\u003d null)\n+        htmlEl \u003d appendElement(\"html\");\n     if (head() \u003d\u003d null)\n-        select(\"html\").first().prependElement(\"head\");\n+        htmlEl.prependElement(\"head\");\n     if (body() \u003d\u003d null)\n-        select(\"html\").first().appendElement(\"body\");\n+        htmlEl.appendElement(\"body\");\n     normalise(head());\n-    normalise(select(\"html\").first());\n+    normalise(htmlEl);\n     normalise(this);\n     return this;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "27a52f90a25699bebe23ff1ff94d6db361fdb11d": {
      "type": "Ybodychange",
      "commitMessage": "Fix an issue where text order was incorrect when parsing pre-document HTML.\n\nFixes #23\n",
      "commitDate": "7/2/11, 4:11 AM",
      "commitName": "27a52f90a25699bebe23ff1ff94d6db361fdb11d",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "7/2/11, 4:11 AM",
      "commitNameOld": "6b60af669bc6102f0328af330532986b8670f3ac",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 25,
      "commitsBetweenForFile": 1,
      "actualSource": "public Document normalise() {\n    if (select(\"html\").isEmpty())\n        appendElement(\"html\");\n    if (head() \u003d\u003d null)\n        select(\"html\").first().prependElement(\"head\");\n    if (body() \u003d\u003d null)\n        select(\"html\").first().appendElement(\"body\");\n    normalise(head());\n    normalise(select(\"html\").first());\n    normalise(this);\n    return this;\n}",
      "path": "src/main/java/org/jsoup/nodes/Document.java",
      "functionStartLine": 95,
      "functionName": "normalise",
      "functionAnnotation": "",
      "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n",
      "diff": "@@ -1,12 +1,12 @@\n public Document normalise() {\n     if (select(\"html\").isEmpty())\n         appendElement(\"html\");\n     if (head() \u003d\u003d null)\n         select(\"html\").first().prependElement(\"head\");\n     if (body() \u003d\u003d null)\n         select(\"html\").first().appendElement(\"body\");\n-    normalise(this);\n-    normalise(select(\"html\").first());\n     normalise(head());\n+    normalise(select(\"html\").first());\n+    normalise(this);\n     return this;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "6b60af669bc6102f0328af330532986b8670f3ac": {
      "type": "Ybodychange",
      "commitMessage": "Normalise head by prepending, not appending.\n\nCloses #9.\n",
      "commitDate": "7/2/11, 4:11 AM",
      "commitName": "6b60af669bc6102f0328af330532986b8670f3ac",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "7/2/11, 4:11 AM",
      "commitNameOld": "d24b485e252d9e86858207da7a57678d41d3f72c",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 10,
      "commitsBetweenForFile": 1,
      "actualSource": "public Document normalise() {\n    if (select(\"html\").isEmpty())\n        appendElement(\"html\");\n    if (head() \u003d\u003d null)\n        select(\"html\").first().prependElement(\"head\");\n    if (body() \u003d\u003d null)\n        select(\"html\").first().appendElement(\"body\");\n    normalise(this);\n    normalise(select(\"html\").first());\n    normalise(head());\n    return this;\n}",
      "path": "src/main/java/org/jsoup/nodes/Document.java",
      "functionStartLine": 95,
      "functionName": "normalise",
      "functionAnnotation": "",
      "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n",
      "diff": "@@ -1,12 +1,12 @@\n public Document normalise() {\n     if (select(\"html\").isEmpty())\n         appendElement(\"html\");\n     if (head() \u003d\u003d null)\n-        select(\"html\").first().appendElement(\"head\");\n+        select(\"html\").first().prependElement(\"head\");\n     if (body() \u003d\u003d null)\n         select(\"html\").first().appendElement(\"body\");\n     normalise(this);\n     normalise(select(\"html\").first());\n     normalise(head());\n     return this;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "d24b485e252d9e86858207da7a57678d41d3f72c": {
      "type": "Yintroduced",
      "commitMessage": "Improved document normalisation.\n",
      "commitDate": "7/2/11, 4:11 AM",
      "commitName": "d24b485e252d9e86858207da7a57678d41d3f72c",
      "commitAuthor": "Jonathan Hedley",
      "diff": "@@ -0,0 +1,12 @@\n+public Document normalise() {\n+    if (select(\"html\").isEmpty())\n+        appendElement(\"html\");\n+    if (head() \u003d\u003d null)\n+        select(\"html\").first().appendElement(\"head\");\n+    if (body() \u003d\u003d null)\n+        select(\"html\").first().appendElement(\"body\");\n+    normalise(this);\n+    normalise(select(\"html\").first());\n+    normalise(head());\n+    return this;\n+}\n\\ No newline at end of file\n",
      "actualSource": "public Document normalise() {\n    if (select(\"html\").isEmpty())\n        appendElement(\"html\");\n    if (head() \u003d\u003d null)\n        select(\"html\").first().appendElement(\"head\");\n    if (body() \u003d\u003d null)\n        select(\"html\").first().appendElement(\"body\");\n    normalise(this);\n    normalise(select(\"html\").first());\n    normalise(head());\n    return this;\n}",
      "path": "src/main/java/org/jsoup/nodes/Document.java",
      "functionStartLine": 95,
      "functionName": "normalise",
      "functionAnnotation": "",
      "functionDoc": "     Normalise the document. This happens after the parse phase so generally does not need to be called.\n     Moves any text content that is not in the body element into the body.\n\n@ @return this document after normalisation\n"
    }
  }
}