{
  "origin": "codeshovel",
  "repositoryName": "Jsoup-55b",
  "repositoryPath": "/tmp/Jsoup-55b//.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Token.java",
  "functionName": "newAttribute",
  "functionId": "$newAttribute",
  "sourceFilePath": "src/main/java/org/jsoup/parser/Token.java",
  "functionAnnotation": "",
  "functionDoc": "",
  "functionStartLine": 94,
  "functionEndLine": 114,
  "numCommitsSeen": 21,
  "timeTaken": 1228,
  "changeHistory": [
    "8a22a9d595d26f573d015a5348aeef34e50171d1",
    "eafba57cb72af5b8980bc1ed75edf4a08e1cc43f",
    "e99193605b688e923d20054c13db897cff751607",
    "f61ba0f9cf5f5fa82af0938f5f4b3c28a119649d",
    "666275a54f3e6907b5244b612483815ee70a191d",
    "8633b01428e9b4ad3df37b5d3530f2c5c963a698",
    "ede131697f4a1e76d9c291e5070b700143622d30",
    "8749726a79c22451b1f01b14fb2137f734e926b4"
  ],
  "changeHistoryShort": {
    "8a22a9d595d26f573d015a5348aeef34e50171d1": "Ybodychange",
    "eafba57cb72af5b8980bc1ed75edf4a08e1cc43f": "Ybodychange",
    "e99193605b688e923d20054c13db897cff751607": "Ybodychange",
    "f61ba0f9cf5f5fa82af0938f5f4b3c28a119649d": "Ymodifierchange",
    "666275a54f3e6907b5244b612483815ee70a191d": "Ybodychange",
    "8633b01428e9b4ad3df37b5d3530f2c5c963a698": "Ybodychange",
    "ede131697f4a1e76d9c291e5070b700143622d30": "Ybodychange",
    "8749726a79c22451b1f01b14fb2137f734e926b4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8a22a9d595d26f573d015a5348aeef34e50171d1": {
      "type": "Ybodychange",
      "commitMessage": "Don\u0027t create StringBuilders for every attribute value\n\nOnly if actually going to append do we nee one.\n",
      "commitDate": "3/27/16, 2:51 PM",
      "commitName": "8a22a9d595d26f573d015a5348aeef34e50171d1",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "4/18/15, 11:44 AM",
      "commitNameOld": "eafba57cb72af5b8980bc1ed75edf4a08e1cc43f",
      "commitAuthorOld": "Leif Åstrand",
      "daysBetweenCommits": 344.13,
      "commitsBetweenForRepo": 32,
      "commitsBetweenForFile": 1,
      "actualSource": "final void newAttribute() {\n    if (attributes \u003d\u003d null)\n        attributes \u003d new Attributes();\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (hasPendingAttributeValue)\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.length() \u003e 0 ? pendingAttributeValue.toString() : pendingAttributeValueS);\n        else if (hasEmptyAttributeValue)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new BooleanAttribute(pendingAttributeName);\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    hasEmptyAttributeValue \u003d false;\n    hasPendingAttributeValue \u003d false;\n    reset(pendingAttributeValue);\n    pendingAttributeValueS \u003d null;\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 92,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,18 +1,19 @@\n final void newAttribute() {\n     if (attributes \u003d\u003d null)\n         attributes \u003d new Attributes();\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n         if (hasPendingAttributeValue)\n-            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n+            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.length() \u003e 0 ? pendingAttributeValue.toString() : pendingAttributeValueS);\n         else if (hasEmptyAttributeValue)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n             attribute \u003d new BooleanAttribute(pendingAttributeName);\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n     hasEmptyAttributeValue \u003d false;\n     hasPendingAttributeValue \u003d false;\n     reset(pendingAttributeValue);\n+    pendingAttributeValueS \u003d null;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "eafba57cb72af5b8980bc1ed75edf4a08e1cc43f": {
      "type": "Ybodychange",
      "commitMessage": "Add custom boolean attribute support #503\n\n* Adds BooleanAttribute that writes out itself without a value\n* Adds API in Element for setting boolean attributes\n* Update parser to distinguish between no value and empty value",
      "commitDate": "4/18/15, 11:44 AM",
      "commitName": "eafba57cb72af5b8980bc1ed75edf4a08e1cc43f",
      "commitAuthor": "Leif Åstrand",
      "commitDateOld": "4/17/15, 2:44 PM",
      "commitNameOld": "616d3c40fe99402c4b1311a2af2819fe1ad52cfb",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.88,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "actualSource": "final void newAttribute() {\n    if (attributes \u003d\u003d null)\n        attributes \u003d new Attributes();\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (hasPendingAttributeValue)\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        else if (hasEmptyAttributeValue)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new BooleanAttribute(pendingAttributeName);\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    hasEmptyAttributeValue \u003d false;\n    hasPendingAttributeValue \u003d false;\n    reset(pendingAttributeValue);\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 90,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,14 +1,18 @@\n final void newAttribute() {\n     if (attributes \u003d\u003d null)\n         attributes \u003d new Attributes();\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n-        if (!hasPendingAttributeValue)\n+        if (hasPendingAttributeValue)\n+            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n+        else if (hasEmptyAttributeValue)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n-            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n+            attribute \u003d new BooleanAttribute(pendingAttributeName);\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n+    hasEmptyAttributeValue \u003d false;\n+    hasPendingAttributeValue \u003d false;\n     reset(pendingAttributeValue);\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "e99193605b688e923d20054c13db897cff751607": {
      "type": "Ybodychange",
      "commitMessage": "Reuse Tokens, instead of creating all the time\n\nSaves an awful lot of GC. These are just data transfer objects, so not\nworth creating every time.\n",
      "commitDate": "10/27/14, 9:29 PM",
      "commitName": "e99193605b688e923d20054c13db897cff751607",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "10/26/14, 3:51 PM",
      "commitNameOld": "f61ba0f9cf5f5fa82af0938f5f4b3c28a119649d",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 1.24,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "actualSource": "final void newAttribute() {\n    if (attributes \u003d\u003d null)\n        attributes \u003d new Attributes();\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (!hasPendingAttributeValue)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    reset(pendingAttributeValue);\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 87,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,15 +1,14 @@\n final void newAttribute() {\n     if (attributes \u003d\u003d null)\n         attributes \u003d new Attributes();\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n-        if (pendingAttributeValue \u003d\u003d null)\n+        if (!hasPendingAttributeValue)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n             attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n-    if (pendingAttributeValue !\u003d null)\n-        pendingAttributeValue.delete(0, pendingAttributeValue.length());\n+    reset(pendingAttributeValue);\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "f61ba0f9cf5f5fa82af0938f5f4b3c28a119649d": {
      "type": "Ymodifierchange",
      "commitMessage": "Speed improvement, final marks\n\nHelps with this abstract hierarchy\n",
      "commitDate": "10/26/14, 3:51 PM",
      "commitName": "f61ba0f9cf5f5fa82af0938f5f4b3c28a119649d",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "4/4/14, 10:00 AM",
      "commitNameOld": "e187364d813bff6df326d46690ccc514aa4c84ec",
      "commitAuthorOld": "Tim Burke",
      "daysBetweenCommits": 205.24,
      "commitsBetweenForRepo": 70,
      "commitsBetweenForFile": 1,
      "actualSource": "final void newAttribute() {\n    if (attributes \u003d\u003d null)\n        attributes \u003d new Attributes();\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (pendingAttributeValue \u003d\u003d null)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    if (pendingAttributeValue !\u003d null)\n        pendingAttributeValue.delete(0, pendingAttributeValue.length());\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 55,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,15 +1,15 @@\n-void newAttribute() {\n+final void newAttribute() {\n     if (attributes \u003d\u003d null)\n         attributes \u003d new Attributes();\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n         if (pendingAttributeValue \u003d\u003d null)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n             attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n     if (pendingAttributeValue !\u003d null)\n         pendingAttributeValue.delete(0, pendingAttributeValue.length());\n }\n\\ No newline at end of file\n",
      "extendedDetails": {
        "oldValue": "[]",
        "newValue": "[final]"
      }
    },
    "666275a54f3e6907b5244b612483815ee70a191d": {
      "type": "Ybodychange",
      "commitMessage": "Only create attribute objects for end tag tokens when required.\n\nSaves a bit of GC time.\n",
      "commitDate": "6/3/12, 8:09 PM",
      "commitName": "666275a54f3e6907b5244b612483815ee70a191d",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "5/28/12, 8:16 PM",
      "commitNameOld": "8633b01428e9b4ad3df37b5d3530f2c5c963a698",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 5.99,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "actualSource": "void newAttribute() {\n    if (attributes \u003d\u003d null)\n        attributes \u003d new Attributes();\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (pendingAttributeValue \u003d\u003d null)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    if (pendingAttributeValue !\u003d null)\n        pendingAttributeValue.delete(0, pendingAttributeValue.length());\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 55,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,13 +1,15 @@\n void newAttribute() {\n+    if (attributes \u003d\u003d null)\n+        attributes \u003d new Attributes();\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n         if (pendingAttributeValue \u003d\u003d null)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n             attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n     if (pendingAttributeValue !\u003d null)\n         pendingAttributeValue.delete(0, pendingAttributeValue.length());\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "8633b01428e9b4ad3df37b5d3530f2c5c963a698": {
      "type": "Ybodychange",
      "commitMessage": "Reuse StringBuilders\n",
      "commitDate": "5/28/12, 8:16 PM",
      "commitName": "8633b01428e9b4ad3df37b5d3530f2c5c963a698",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "5/28/12, 6:39 PM",
      "commitNameOld": "ede131697f4a1e76d9c291e5070b700143622d30",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 0.07,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "actualSource": "void newAttribute() {\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (pendingAttributeValue \u003d\u003d null)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    if (pendingAttributeValue !\u003d null)\n        pendingAttributeValue.delete(0, pendingAttributeValue.length());\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 55,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,12 +1,13 @@\n void newAttribute() {\n     if (pendingAttributeName !\u003d null) {\n         Attribute attribute;\n         if (pendingAttributeValue \u003d\u003d null)\n             attribute \u003d new Attribute(pendingAttributeName, \"\");\n         else\n             attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n-    pendingAttributeValue \u003d null;\n+    if (pendingAttributeValue !\u003d null)\n+        pendingAttributeValue.delete(0, pendingAttributeValue.length());\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "ede131697f4a1e76d9c291e5070b700143622d30": {
      "type": "Ybodychange",
      "commitMessage": "Use a StringBuilder to accumulate attribute values.\n\nWhen initially implemented I expected attribute values to normally be read in one sweep,\nremoving the need to accumulate values. However profiling shows that attributes are\noften accumulated, and so the string concatination implementation was very slow.\n\nUsing a StringBuilder here gives reduces parse times \u003e 50%.\n",
      "commitDate": "5/28/12, 6:39 PM",
      "commitName": "ede131697f4a1e76d9c291e5070b700143622d30",
      "commitAuthor": "Jonathan Hedley",
      "commitDateOld": "3/19/12, 9:02 PM",
      "commitNameOld": "be94f5547d6b8f15ee48117afe46ae302c361464",
      "commitAuthorOld": "Jonathan Hedley",
      "daysBetweenCommits": 69.9,
      "commitsBetweenForRepo": 42,
      "commitsBetweenForFile": 1,
      "actualSource": "void newAttribute() {\n    if (pendingAttributeName !\u003d null) {\n        Attribute attribute;\n        if (pendingAttributeValue \u003d\u003d null)\n            attribute \u003d new Attribute(pendingAttributeName, \"\");\n        else\n            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    pendingAttributeValue \u003d null;\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 55,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": "",
      "diff": "@@ -1,10 +1,12 @@\n void newAttribute() {\n     if (pendingAttributeName !\u003d null) {\n+        Attribute attribute;\n         if (pendingAttributeValue \u003d\u003d null)\n-            pendingAttributeValue \u003d \"\";\n-        Attribute attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue);\n+            attribute \u003d new Attribute(pendingAttributeName, \"\");\n+        else\n+            attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue.toString());\n         attributes.put(attribute);\n     }\n     pendingAttributeName \u003d null;\n     pendingAttributeValue \u003d null;\n }\n\\ No newline at end of file\n",
      "extendedDetails": {}
    },
    "8749726a79c22451b1f01b14fb2137f734e926b4": {
      "type": "Yintroduced",
      "commitMessage": "Reimplementation of parser and tokeniser, to make jsoup a HTML5 conformat parser, against the\nhttp://whatwg.org/html spec.\n",
      "commitDate": "7/2/11, 4:12 AM",
      "commitName": "8749726a79c22451b1f01b14fb2137f734e926b4",
      "commitAuthor": "Jonathan Hedley",
      "diff": "@@ -0,0 +1,10 @@\n+void newAttribute() {\n+    if (pendingAttributeName !\u003d null) {\n+        if (pendingAttributeValue \u003d\u003d null)\n+            pendingAttributeValue \u003d \"\";\n+        Attribute attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue);\n+        attributes.put(attribute);\n+    }\n+    pendingAttributeName \u003d null;\n+    pendingAttributeValue \u003d null;\n+}\n\\ No newline at end of file\n",
      "actualSource": "void newAttribute() {\n    if (pendingAttributeName !\u003d null) {\n        if (pendingAttributeValue \u003d\u003d null)\n            pendingAttributeValue \u003d \"\";\n        Attribute attribute \u003d new Attribute(pendingAttributeName, pendingAttributeValue);\n        attributes.put(attribute);\n    }\n    pendingAttributeName \u003d null;\n    pendingAttributeValue \u003d null;\n}",
      "path": "src/main/java/org/jsoup/parser/Token.java",
      "functionStartLine": 51,
      "functionName": "newAttribute",
      "functionAnnotation": "",
      "functionDoc": ""
    }
  }
}